{"version":3,"sources":["containers/App.module.css","containers/Theme.tsx","store/ui/types.ts","store/ui/actions.ts","components/DownUpButtons.tsx","components/NumberIncrementer.tsx","fractals/math/real.ts","fractals/math/polar.ts","fractals/math/complex.ts","components/ComplexNumberIncrementer.tsx","components/Katex.tsx","components/TextWithMath.tsx","components/SettingsContainer.tsx","fractals/colors/ColorScale.tsx","fractals/colors/schemes.ts","fractals/colors/index.ts","components/ColorPreview.tsx","components/ComplexNumberInput.tsx","fractals/types.ts","components/NumberInput.tsx","containers/Bottombar.tsx","store/algorithm/types.ts","store/algorithm/actions.ts","containers/Settings/AlgorithmSettings.tsx","store/view/actions.ts","store/view/types.ts","containers/Settings/CustomColor.tsx","containers/Settings/SettingsMenu.tsx","containers/Settings/ColorSettings.tsx","store/color/actions.ts","store/color/types.ts","containers/Settings/ViewSettings.tsx","containers/Settings/FullResolution.tsx","containers/Settings/index.ts","containers/Controls/Zoom.tsx","fractals/CanvasDrawer.ts","fractals/FractalList/mixers/base.ts","fractals/escapeTime.ts","fractals/formatting.ts","fractals/FractalList/mixers/escape.ts","fractals/FractalList/mixers/julia.ts","fractals/math/util.ts","fractals/FractalList/burningship.ts","fractals/FractalList/julias.ts","fractals/FractalList/magnet.ts","fractals/FractalList/mandelbox.ts","fractals/FractalList/mandelbrot.ts","fractals/FractalList/index.ts","fractals/index.ts","containers/Controls/ParamControls.tsx","containers/Controls/Iterator.tsx","containers/Controls/Recenter.tsx","containers/Controls/Controls.tsx","containers/Canvas/Canvas.tsx","containers/Canvas/index.ts","containers/Display.tsx","containers/Controls/StretchToggle.tsx","containers/Info.tsx","containers/TopBar.tsx","containers/App.tsx","containers/Root.tsx","colors/schemes.ts","store/color/reducer.ts","store/view/reducer.ts","store/algorithm/reducer.ts","store/ui/reducer.ts","store/reducer.ts","store/index.ts","serviceWorker.ts","index.tsx","containers/Canvas/Canvas.module.css"],"names":["module","exports","Theme","props","state","type","dark","this","setState","setDark","window","matchMedia","matches","addListener","x","theme","palette","darkPalette","lightPalette","createMuiTheme","CssBaseline","children","React","Component","defaultProps","primary","blue","secondary","pink","lightGreen","amber","MuiAppBar","color","MuiBackdrop","invisible","MuiButton","variant","MuiButtonGroup","MuiIconButton","MuiTextField","size","fullWidth","margin","MuiTypography","style","Nav","Modal","StretchMode","CanvasAction","setModal","modal","payload","setNav","nav","setCanvasAction","startDrawing","fullResolution","DrawFullResolution","Draw","withStyles","createStyles","container","position","marginBottom","label","textAlign","bottom","width","userSelect","text","classes","onUp","onDown","fontSize","disableUp","disableDown","downIcon","Icon","upIcon","rest","Box","className","Typography","ButtonGroup","IconButton","onClick","disabled","createElement","NumberIncrementer","onClickDown","setValue","incrementDown","onClickUp","incrementUp","v","onChange","controlProps","min","step","value","undefined","Math","max","params","PI","TAU","abs","asin","atan2","exp","floor","pow","random","round","sin","sqrt","cos","powReal","z","k","angle","radius","complex","re","im","fromPolar","toPolar","add","a","b","addReal","subt","mult","multReal","div","d","abs2","powFloat","P","powInt","ComplexIncrementer","onAngleDown","angleDown","onAngleUp","angleUp","onRadiusDown","radiusDown","onRadiusUp","radiusUp","stepRadius","p","stepAngle","RotateRight","RotateLeft","styles","root","whiteSpace","Katex","ref","createRef","current","katex","render","math","displayMode","renderMath","PureComponent","RenderStringOrMath","data","TextWithMath","typographyProps","Array","isArray","map","height","ColorScale","interpolator","skew","reverse","domain","scale","scalePow","range","exponent","createScaler","n","result","i","colors","opts","piecewise","interpolateLab","D3_SCHEMES","Cool","Cubehelix","Greys","Inferno","Magma","Plasma","Rainbow","Spectral","Viridis","Warm","ALL_SCHEMES","colorScale","scheme","customSchemes","customScale","COLORSCHEMES","builtinScale","borderRadius","boxShadow","ColorPreview","docolors","canvas","context","getContext","orientation","discreteScale","forEach","fillStyle","fillRect","padding","grid","strokeLinecap","fill","major","strokeWidth","strokeOpacity","minor","marker","ComplexNumberInput","GRID","evt","getValueAtClick","onDoubleClick","r","precision","stepRect","angles","stepX","stepY","max_radius","circle","cx","cy","hline","vline","rect_minor","polar_minor","rad","RECT","MINOR","MAJOR","POLAR","makegrid","svg","rect","getBoundingClientRect","y","nativeEvent","clientX","clientY","clickX","clickY","vectorEffect","markerRadius","viewBox","join","stroke","gridColor","rectGrid","polarGrid","markerColor","ControlType","NumberInput","s","target","isEmpty","isNaN","onBlur","inputProps","emptyValue","TextField","borderTop","divider","StyledBottomNav","BottomNavigation","connect","ui","dispatch","BottomNavigationAction","Params","icon","Tune","Navigate","Help","updateParams","StyledMenuItem","MenuItem","AlgorithmSettings","selectMethod","apply","setFractal","onClose","reset","algorithm","SettingsContainer","m","select","maxWidth","Object","keys","fractals","sort","key","Button","CustomColor","changeName","name","changeNum","setNum","changeColor","addColor","num","removeColor","save","onSave","validName","takenNames","toLowerCase","length","push","slice","Grid","item","xs","InputLabel","CUSTOM","renderColorInput","alignSelf","Menu","ColorSettings","openCustomPopup","customPopup","closeCustomPopup","changeReverse","checked","changeSkew","changeAdaptiveScale","adaptiveScale","selectScheme","setScheme","hasChanged","saveScheme","addScheme","updateColor","revert","schemeList","FormControlLabel","control","Switch","edge","display","FormControl","shrink","Slider","Popover","open","updates","Color","ViewSettings","centerStep","h","ppu","updateView","setCX","setCurrent","setCY","setW","w","setH","setPPU","setPreviewPixels","previewPixels","spacing","view","update","anchorOrigin","vertical","horizontal","transformOrigin","StyledLabel","ListItemText","StyledSwipeableDrawer","paper","flexDirection","SwipeableDrawer","SettingsDrawer","openMenu","openAlgorithm","menu","Algorithm","openColor","openView","View","closeAll","None","closePopup","openPopup","popup","labelStyle","listStyle","onOpen","List","ListItemIcon","Functions","Palette","Divider","FullResolution","paddingTop","paddingBottom","Back","SettingsMenu","zoomIn","zoomOut","factor","ZoomOut","ZoomIn","linearScale","CanvasDrawer","values","document","resize","clear","ctx","clearRect","f","xscale","yscale","c","_setValue","iterations","tocalc","cmap","setTransform","beginPath","pt","vals","_applyColors","controls","settings","bound","b2","z0","sign","fixed","toFixed","toString","DefaultEscapeParams","create","pixel","func","escapeTime","zz","description","describeEscapeFunction","formula","escape","latexF","latexZ0","replace","_description","julia","noParam","isInt","absabs","BurningShip1","mix","cc","Number","param","randomC","Julia1KC","Call","onCall","Complex","Julia2","Julia3","divReal","sinh","Magnet1","Magnet2","a3","b3","ab","f1","f1latex","f2latex","f3latex","Mandelbox1","z1","abs2z1","Mandelbox2BurningShip","Mandelbrot","FractalList","burningship","julias","magnet","mandelbox","mandelbrot","fractal","alg","fr","ParamControls","paramUpdater","console","log","startIcon","Random","renderNumberIncrementer","renderComplexIncrementer","renderCall","renderControl","Recenter","OuterBox","backgroundColor","background","default","Paper","CenteringBox","flexFlow","alignItems","justifyContent","Controls","closeNav","parameters","navigation","help","elevation","Iterator","Canvas","drawer","canvasRef","isFullResolution","centerOnClick","setCenter","offsetX","offsetY","stretch","Contain","ww","hh","imageH","imageW","dx","dy","pixelcount","scaleDown","rx","ry","calculatePixels","changeIterations","colorPixels","calculateImage","colorCanvas","finishDrawing","attach","draw","canvasAction","Iterate","recolor","objectFit","outerClasses","Outer","Stretch","Cover","Inner","canvasStretch","MyBox","overflow","flexGrow","Display","setStretch","mode","labelPlacement","KatexButton","textTransform","InfoButton","Info","science","toPrecision","split","visible","fractalinfo","rounder","log10","centerx","centery","domainx","domainy","PaperProps","square","anchorEl","marginTop","gap","paddingLeft","paddingRight","_Box","AppBar","_AppBar","disableMenu","WithBottomNav","AboveBox","App","Settings","Root","store","initialState","recenter","Dflt","defaultParams","paramControls","combineReducers","action","createStore","reducer","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"+GACAA,EAAOC,QAAU,CAAC,IAAM,iBAAiB,eAAiB,4BAA4B,aAAe,0BAA0B,YAAc,2B,kjFCevIC,E,YA+CJ,WAAYC,GAAwC,IAAD,8BACjD,4CAAMA,KA/CRC,WA8CmD,EAEjD,EAAKA,MAAQ,CACXC,KAA0B,WAApB,EAAKF,MAAME,KAAoB,QAAU,EAAKF,MAAME,MAHX,E,qEAO3CC,GACNC,KAAKC,SAAS,CAACH,KAAMC,EAAO,OAAS,Y,0CAGlB,IAAD,OACM,WAApBC,KAAKJ,MAAME,OACbE,KAAKE,QAAQC,OAAOC,WAAW,+BAA+BC,SAC9DF,OAAOC,WAAW,+BAA+BE,aAAY,SAAAC,GAC3D,EAAKL,QAAQK,EAAEF,e,+BAMnB,IAAMG,EAAK,eACNR,KAAKJ,MAAMY,MADL,CAETC,QAAQ,eACHT,KAAKJ,MAAMY,MAAMC,QADf,GAEFT,KAAKH,MAFH,GAGmB,SAApBG,KAAKH,MAAMC,KAAkBE,KAAKJ,MAAMc,YAAcV,KAAKJ,MAAMe,gBAGzE,OACE,kBAAC,IAAD,CAAUH,MAAOI,YAAeJ,IAC9B,kBAACK,EAAA,EAAD,MACCb,KAAKJ,MAAMkB,c,GA/EAC,IAAMC,WAApBrB,EAGGsB,aAAe,CACpBnB,KAAM,SAENa,aAAc,CACZO,QAASC,IACTC,UAAWC,KAGbX,YAAa,CACXQ,QAASI,IACTF,UAAWG,KAGbf,MAAO,CACLZ,MAAO,CACL4B,UAAW,CAACC,MAAO,WACnBC,YAAa,CACXC,WAAW,GAEbC,UAAW,CACTC,QAAS,WACTJ,MAAO,WAETK,eAAgB,CACdD,QAAS,WACTJ,MAAO,WAETM,cAAe,CAACN,MAAO,WACvBO,aAAc,CACZH,QAAS,WACTI,KAAM,QACNC,WAAW,EACXC,OAAQ,UAEVC,cAAe,CAACX,MAAO,YAEzBY,MAAO,CACLT,UAAW,CACTO,OAAQ,YA4CHxC,IC7FH2C,EAOAC,EAOAC,EAMAC,EDyEG9C,K,SC7FH2C,O,eAAAA,I,mBAAAA,I,uBAAAA,I,gBAAAA,M,cAOAC,O,eAAAA,I,eAAAA,I,eAAAA,I,oCAAAA,M,cAOAC,O,eAAAA,I,qBAAAA,I,kBAAAA,M,cAMAC,O,eAAAA,I,eAAAA,I,2CAAAA,I,iBAAAA,I,sBAAAA,M,KCVL,IAUMC,EAAW,SAACC,GAAD,MAA6B,CACnD7C,KD7BuB,eC8BvB8C,QAASD,IAGEE,EAAS,SAACC,GAAD,MAAuB,CAC3ChD,KDjCqB,aCkCrB8C,QAASE,IAGEC,EAAkB,SAACxC,GAAD,MAAuC,CACpET,KDpC+B,gBCqC/B8C,QAASrC,IAGEyC,EAAe,WAAqD,IAApDC,EAAmD,wDAC9E,OAAIA,EACM,CACNnD,KD3C2B,gBC4C3B8C,QAASH,EAAaS,oBAGhB,CACNpD,KDhD2B,gBCiD3B8C,QAASH,EAAaU,O,6bCWbC,gBArDA,SAAC,GAAD,IAAE3C,EAAF,EAAEA,QAAF,OAAsB4C,YAAa,CAChDC,UAAW,CACTC,SAAU,WACVC,aAAc,OAEhBC,MAAO,CACLC,UAAW,SACXH,SAAU,WACVI,OAAQ,OACRC,MAAO,OACPC,WAAY,OACZpC,MAAOhB,EAAQqD,KAAK1C,eA0CTgC,EAxBO,SAAC,GAAD,IAAEK,EAAF,EAAEA,MAAOM,EAAT,EAASA,QAASC,EAAlB,EAAkBA,KAAMC,EAAxB,EAAwBA,OAAQC,EAAhC,EAAgCA,SACpDC,EADoB,EACpBA,UAAWC,EADS,EACTA,YADS,IACIC,gBADJ,MACaC,KADb,MACyBC,cADzB,MACgCD,KADhC,EAEjBE,EAFiB,oHAKpB,kBAACC,GAAA,EAAD,CAAKC,UAAWX,EAAQT,WACnBG,EACC,kBAACkB,GAAA,EAAD,CAAY9C,QAAQ,UAAU6C,UAAWX,EAAQN,OAC9CA,GAED,KACN,kBAACmB,GAAA,EAAgBJ,EACf,kBAACK,GAAA,EAAD,CACEC,QAASb,EACTc,SAAUX,GACVrD,IAAMiE,cAAcX,EAAU,CAACH,cACjC,kBAACW,GAAA,EAAD,CACEC,QAASd,EACTe,SAAUZ,GACVpD,IAAMiE,cAAcT,EAAQ,CAACL,mBCCtBe,G,2MAtBbC,YAAc,WACZ,EAAKC,SAAS,EAAKC,kB,EAGrBC,UAAY,WACV,EAAKF,SAAS,EAAKG,gB,wEA3BZC,GACPvF,KAAKJ,MAAM4F,SAASD,K,sCAGL,IAAD,EACMvF,KAAKJ,MAAM6F,aAAxBC,EADO,EACPA,IAAKC,EADE,EACFA,KACNJ,EAAIvF,KAAKJ,MAAMgG,MAAQD,EAC7B,YAAYE,IAARH,EACKI,KAAKC,IAAIL,EAAKH,GAEhBA,I,oCAGM,IAAD,EACQvF,KAAKJ,MAAM6F,aAAxBM,EADK,EACLA,IAAKJ,EADA,EACAA,KACNJ,EAAIvF,KAAKJ,MAAMgG,MAAQD,EAC7B,YAAYE,IAARE,EACKD,KAAKJ,IAAIK,EAAKR,GAEhBA,I,+BAYC,IAAD,EAC2CvF,KAAKJ,MAAhD6F,EADA,EACAA,aAAmCjB,GADnC,EACcwB,OADd,EACsBR,SADtB,sDAEP,OACE,kBAAC,GAAD,iBACMhB,EADN,CAEEf,MAAOgC,EAAahC,MACpBQ,OAAQjE,KAAKkF,YACblB,KAAMhE,KAAKqF,iB,GAxCatE,IAAMC,WCZhCiF,GAAKH,KAAKG,GACVC,GAAM,EAAED,GAGRE,GAAML,KAAKK,IACXC,GAAON,KAAKM,KACZC,GAAQP,KAAKO,MACbC,GAAMR,KAAKQ,IACXC,GAAQT,KAAKS,MACbC,GAAMV,KAAKU,IACXC,GAASX,KAAKW,OACdC,GAAQZ,KAAKY,MACbC,GAAMb,KAAKa,IACXC,GAAOd,KAAKc,KACZC,GAAMf,KAAKe,ICoCV,SAASC,GAAQC,EAAUC,GAChC,MAAO,CAACC,MAAOF,EAAEE,MAAQD,EAAGE,OAAQpB,GAASiB,EAAEG,OAAQF,IC/ClD,SAASG,GAAQC,EAAYC,GAClC,MAAO,CAACD,KAAIC,MAOP,SAASC,GAAT,GAA4C,IAAxBL,EAAuB,EAAvBA,MAAOC,EAAgB,EAAhBA,OAChC,MAAO,CACLE,GAAIF,EAASpB,GAASmB,GACtBI,GAAIH,EAASpB,GAASmB,IAInB,SAASM,GAAQR,GACtB,MAAO,CACLE,MAAOnB,GAAWiB,EAAEM,GAAIN,EAAEK,IAC1BF,OAAQpB,GAAUiB,EAAEK,GAAGL,EAAEK,GAAKL,EAAEM,GAAGN,EAAEM,KAWlC,SAASG,GAAIC,EAAYC,GAC9B,MAAO,CAACN,GAAIK,EAAEL,GAAGM,EAAEN,GAAIC,GAAII,EAAEJ,GAAGK,EAAEL,IAG7B,SAASM,GAAQF,EAAYC,GAClC,MAAO,CAACN,GAAIK,EAAEL,GAAKM,EAAGL,GAAII,EAAEJ,IAUvB,SAASO,GAAKH,EAAYC,GAC/B,MAAO,CAACN,GAAIK,EAAEL,GAAKM,EAAEN,GAAIC,GAAII,EAAEJ,GAAKK,EAAEL,IAcjC,SAASQ,GAAKJ,EAAYC,GAC/B,MAAO,CACLN,GAAIK,EAAEL,GAAGM,EAAEN,GAAKK,EAAEJ,GAAGK,EAAEL,GACvBA,GAAII,EAAEL,GAAGM,EAAEL,GAAKI,EAAEJ,GAAGK,EAAEN,IAIpB,SAASU,GAASL,EAAYC,GACnC,MAAO,CAACN,GAAIM,EAAID,EAAEL,GAAIC,GAAIK,EAAID,EAAEJ,IAU3B,SAASU,GAAIN,EAAYC,GAC9B,IAAMM,EAAIC,GAAKP,GACf,MAAO,CACLN,IAAKK,EAAEL,GAAKM,EAAEN,GAAKK,EAAEJ,GAAKK,EAAEL,IAAMW,EAClCX,IAAKI,EAAEJ,GAAKK,EAAEN,GAAKK,EAAEL,GAAKM,EAAEL,IAAMW,GAe/B,SAAS1B,GAAIS,GAClB,OAAOO,GAAU,CAACJ,OAAQpB,GAASiB,EAAEK,IAAKH,MAAOF,EAAEM,KAG9C,SAASa,GAASnB,EAAYC,GACnC,OAAOM,GAAUa,GAAUZ,GAAQR,GAAIC,IAGlC,SAASoB,GAAOrB,EAAYC,GACjC,OAAIA,EAAI,EAAUe,GAAIZ,GAAQ,EAAG,GAAIiB,GAAOrB,GAAIC,IACtC,IAANA,EAAgBG,GAAQ,EAAG,GACrB,IAANH,EAAgBD,EACV,IAANC,EAAgBa,GAAKd,EAAGA,GAClB,IAANC,EAAgBa,GAAKA,GAAKd,EAAGA,GAAIA,GAC3B,IAANC,EAAgBa,GAAKA,GAAKA,GAAKd,EAAGA,GAAIA,GAAIA,GACpC,IAANC,EAAgBa,GAAKA,GAAKA,GAAKA,GAAKd,EAAGA,GAAIA,GAAIA,GAAIA,GAC7C,IAANC,EAAgBa,GAAKA,GAAKA,GAAKA,GAAKA,GAAKd,EAAGA,GAAIA,GAAIA,GAAIA,GAAIA,GACtD,IAANC,EAAgBa,GAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAKd,EAAGA,GAAIA,GAAIA,GAAIA,GAAIA,GAAIA,GAC/D,IAANC,EAAgBa,GAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAKd,EAAGA,GAAIA,GAAIA,GAAIA,GAAIA,GAAIA,GAAIA,GAC3EmB,GAASnB,EAAGC,GAUd,SAASiB,GAAKlB,GACnB,OAAOA,EAAEK,GAAKL,EAAEK,GAAKL,EAAEM,GAAKN,EAAEM,GAGzB,SAASlB,GAAIY,GAClB,OAAOjB,GAAUmC,GAAKlB,I,ICjCTsB,G,2MAzCbC,YAAc,WACZ,EAAKnD,SAAS,EAAKoD,c,EAGrBC,UAAY,WACV,EAAKrD,SAAS,EAAKsD,Y,EAGrBC,aAAe,WACb,EAAKvD,SAAS,EAAKwD,e,EAGrBC,WAAa,WACX,EAAKzD,SAAS,EAAK0D,a,wEAnDZtD,GACPvF,KAAKJ,MAAM4F,SAASD,K,gCAIpB,OAAOgC,GAAQJ,GAAQnH,KAAKJ,MAAMgG,MAAM,GAAI5F,KAAKJ,MAAMgG,MAAM,O,gCAGrDL,GACR,IAAMkC,EAAIH,GAAU/B,GACpB,MAAO,CAACkC,EAAEL,GAAIK,EAAEJ,M,mCAGC,IACVyB,EAAc9I,KAAKJ,MAAM6F,aAAzBqD,WACDC,EAAI/I,KAAKuH,UACf,OAAOvH,KAAKsH,UAAL,eAAmByB,EAAnB,CAAsB7B,OAAQ6B,EAAE7B,OAAO4B,O,iCAG/B,IACRA,EAAc9I,KAAKJ,MAAM6F,aAAzBqD,WACDC,EAAI/I,KAAKuH,UACf,OAAOvH,KAAKsH,UAAL,eAAmByB,EAAnB,CAAsB7B,OAAQ6B,EAAE7B,OAAO4B,O,kCAG9B,IACTE,EAAahJ,KAAKJ,MAAM6F,aAAxBuD,UACDD,EAAI/I,KAAKuH,UACf,OAAOvH,KAAKsH,UAAL,eAAmByB,EAAnB,CAAsB9B,MAAO8B,EAAE9B,MAAM+B,O,gCAG9B,IACPA,EAAahJ,KAAKJ,MAAM6F,aAAxBuD,UACDD,EAAI/I,KAAKuH,UACf,OAAOvH,KAAKsH,UAAL,eAAmByB,EAAnB,CAAsB9B,MAAO8B,EAAE9B,MAAM+B,O,+BAqBpC,IAAD,EAC2ChJ,KAAKJ,MAAhD6F,EADA,EACAA,aAAmCjB,GADnC,EACcwB,OADd,EACsBR,SADtB,sDAEP,OACE,oCACA,kBAAC,GAAD,iBACMhB,EADN,CAGEf,MAAOgC,EAAahC,MAAQ,UAC5BQ,OAAQjE,KAAKsI,YACbtE,KAAMhE,KAAKwI,UACXnE,SAAUC,EAAK2E,YACf1E,OAAQD,EAAK4E,cAEf,kBAAC,GAAD,iBACM1E,EADN,CAEEf,MAAOgC,EAAahC,MAAQ,WAC5BQ,OAAQjE,KAAK0I,aACb1E,KAAMhE,KAAK4I,mB,GA1Ec7H,IAAMC,W,8BCfjCmI,I,OAAS9F,YAAa,CAC1B+F,KAAM,CACJC,WAAY,aAYVC,G,YAGJ,WAAY1J,GAAe,IAAD,8BACxB,4CAAMA,KAHR2J,SAE0B,EAExB,EAAKA,IAAMxI,IAAMyI,YAFO,E,0EAMpBxJ,KAAKuJ,IAAIE,SACXC,KAAMC,OAAO3J,KAAKJ,MAAMgK,KAAM5J,KAAKuJ,IAAIE,QAAS,CAC9CI,YAAa7J,KAAKJ,MAAMiK,gB,0CAM5B7J,KAAK8J,e,2CAIL9J,KAAK8J,e,+BAGG,IACA/F,EAAY/D,KAAKJ,MAAjBmE,QACR,OAAOhD,IAAMiE,cAAc,OAAQ,CACjCuE,IAAKvJ,KAAKuJ,IACV7E,UAAWX,EAAQqF,W,GA5BLrI,IAAMgJ,eAiCX3G,eAAW+F,GAAX/F,CAAmBkG,IC9C5BU,GAAqB,SAACC,GAC1B,MAAoB,kBAATA,EACFA,EAEAlJ,IAAMiE,cAAcsE,GAAOW,IAqBvBC,GAVM,SAAC,GAAgD,IAA/CD,EAA8C,EAA9CA,KAAME,EAAwC,EAAxCA,gBAC3B,OAAIC,MAAMC,QAAQJ,GACTlJ,IAAMiE,cAAN,MAAAjE,IAAK,CAAe4D,KAAYwF,GAA3B,oBAA+CF,EAAKK,IAAIN,OAElD,kBAATC,EACFlJ,IAAMiE,cAAcL,KAAYwF,EAAiBF,GAEnDlJ,IAAMiE,cAAcsE,GAAOW,ICzB9Bd,GAAS9F,aAAa,SAAC7C,GAAD,MAAmB,CAC7C4I,KAAM,CACJmB,OAAQ,YAKGnH,eAAW+F,GAAX/F,CAAmBqB,M,SCwCnB+F,G,WAtCb,WAAYC,GAGL,IAAD,yDAAJ,GAHgDC,EAG5C,EAH4CA,KAAMC,EAGlD,EAHkDA,QAGlD,yBAPNF,kBAOM,OANNC,UAMM,OALNC,aAKM,EACJ3K,KAAKyK,aAAeA,EACpBzK,KAAK2K,QAAUA,IAAW,EAC1B3K,KAAK0K,KAAOA,GAAQ,E,yDAOTE,GACX,IAAMC,EAAQC,eACXF,OAAOA,GAAU,CAAC,EAAE,IACpBG,MAAM/K,KAAK2K,QAAU,CAAC,EAAG,GAAK,CAAC,EAAG,IAIrC,OAHI3K,KAAK0K,MACPG,EAAMG,SAAN,SAAe,EAAGhL,KAAK0K,OAElBG,I,4BAGHD,GAAkD,IAAD,OAC/CC,EAAQ7K,KAAKiL,aAAaL,GAChC,OAAO,SAACM,GAAD,OAAe,EAAKT,aAAaI,EAAMK,O,oCAGlCN,GAGZ,IAFA,IAAMC,EAAQ7K,KAAKiL,aAAaL,GAC1BO,EAAmBf,MAAM,EAAItE,KAAKK,IAAI0E,EAAMD,SAAS,GAAKC,EAAMD,SAAS,KACtEQ,EAAIP,EAAMD,SAAS,GAAIQ,GAAKP,EAAMD,SAAS,GAAIQ,IACtDD,EAAOC,GAAKpL,KAAKyK,aAAaI,EAAMO,IAEtC,OAAOD,K,iCAzBQE,EAAkBC,GACjC,OAAO,IAAId,EAAWe,aAAUC,KAAgBH,GAASC,O,KCRhDG,GAAyB,CACpCC,UACAC,eACAC,WACAC,aACAC,WACAC,YACAC,aACAC,cACAC,aACAC,WAWaC,GALc,eACxBX,GADwB,GAHY,ICRzC,SAASY,GAAT,GAKI,IALiBC,EAKlB,EALkBA,OAAQ3B,EAK1B,EAL0BA,QAASD,EAKnC,EALmCA,KAAM6B,EAKzC,EALyCA,cAM1C,OAAIA,EAAcD,GAtBpB,SAAqBjB,GAGd,IAHgCC,EAGjC,uDAAJ,GACA,OAAOd,GAAWe,UAAUF,EAAQC,GAmB3BkB,CAAYD,EAAcD,GAAS,CAAC3B,UAASD,SAfxD,SAAsB4B,GAGf,IAH+BhB,EAGhC,uDAAJ,GACA,OAAO,IAAId,GAAWiC,GAAaH,GAAShB,GAanCoB,CAAaJ,EAAQ,CAAC3B,UAASD,SCX1C,IAAMvB,GAAS9F,YAAa,CAC1B+F,KAAM,CACJuD,aAAc,MACdC,UAAW,iCAMTC,G,YASJ,WAAYjN,GAAe,IAAD,8BACxB,4CAAMA,KATR2J,SAQ0B,EAExB,EAAKA,IAAMxI,IAAMyI,YAFO,E,iFAMxBxJ,KAAK8M,a,2CAIL9M,KAAK8M,a,iCAIL,IAAMC,EAAS/M,KAAKuJ,IAAIE,QACxB,GAAIsD,EAAQ,CACV,IAAMC,EAAUD,EAAOE,WAAW,MAClC,GAAID,EAAS,CAAC,IAAD,EACkEhN,KAAKJ,MAA1E0M,EADG,EACHA,OAAQ3B,EADL,EACKA,QAASD,EADd,EACcA,KAAM6B,EADpB,EACoBA,cAAe3I,EADnC,EACmCA,MAAO2G,EAD1C,EAC0CA,OACrD,GAAoB,eAFT,EACkD2C,YAEhDb,GAAW,CAACC,SAAQ3B,UAASD,OAAM6B,kBAAgBY,cAAc,CAAC,EAAEvJ,IAC5EwJ,SAAQ,SAAC3L,EAAO2J,GACjB4B,EAAQK,UAAY5L,EACpBuL,EAAQM,SAASlC,EAAG,EAAG,EAAGb,WAGjB8B,GAAW,CAACC,SAAQ3B,UAASD,OAAM6B,kBAAgBY,cAAc,CAAC5C,EAAO,IACjF6C,SAAQ,SAAC3L,EAAO2J,GACjB4B,EAAQK,UAAY5L,EACpBuL,EAAQM,SAAS,EAAGlC,EAAGxH,EAAO,U,+BAQtC,OACE,4BAAQ2F,IAAKvJ,KAAKuJ,IAChB3F,MAAO5D,KAAKJ,MAAMgE,MAClB2G,OAAQvK,KAAKJ,MAAM2K,OACnBlI,MAAOrC,KAAKJ,MAAMyC,MAClBqC,UAAW1E,KAAKJ,MAAMmE,QAAQqF,W,GAnDXrI,IAAMC,WAA3B6L,GAGG5L,aAAe,CACpB2C,MAAO,IACP2G,OAAQ,GACR2C,YAAa,cAmDF9J,mBAAW+F,GAAX/F,CAAmByJ,IC9D5B1D,GAAS9F,YAAa,CAC1B+F,KAAM,CACJmE,QAAS,MACT1J,WAAY,QAGd2J,KAAM,CACJC,cAAe,SACfC,KAAM,QAGRC,MAAO,CACLC,YAAa,GACbC,cAAe,GAGjBC,MAAO,CACLF,YAAa,GACbC,cAAe,IAGjBE,OAAQ,CACNH,YAAa,KAOXI,G,YAmBJ,WAAYpO,GAAwC,IAAD,uBACjD,4CAAMA,KAnBR2J,SAkBmD,IAjBnD0E,UAiBmD,IAbnDvH,WAamD,IAqBnD5B,QAAU,SAACoJ,GACT,GAAI,EAAKtO,MAAMkF,QAAS,CACtB,IAAMiE,EAAI,EAAKoF,gBAAgBD,GAC3BnF,GAAG,EAAKnJ,MAAMkF,QAAQiE,KAxBqB,EA4BnDqF,cAAgB,SAACF,GACf,GAAI,EAAKtO,MAAMwO,cAAe,CAC5B,IAAMrF,EAAI,EAAKoF,gBAAgBD,GAC3BnF,GAAG,EAAKnJ,MAAMwO,cAAcrF,KA7BlC,EAAKQ,IAAMxI,IAAMyI,YACjB,IAAM6E,EAAIvI,KAAKU,IAAI,GAAI5G,EAAM0O,WAC7B,EAAK5H,MAAQ,SAACwE,GAAD,OAAepF,KAAKY,MAAMwE,EAAEmD,GAAKA,GAJG,MAKM,EAAKzO,MAArDmG,EAL0C,EAK1CA,IAAK+C,EALqC,EAKrCA,WAAYyF,EALyB,EAKzBA,SAAUvF,EALe,EAKfA,UAAWwF,EALI,EAKJA,OALI,OAMjD,EAAKP,KA0GT,YAOI,IAPelI,EAOhB,EAPgBA,IAAK0I,EAOrB,EAPqBA,MAAOC,EAO5B,EAP4BA,MAAO5F,EAOnC,EAPmCA,WAAYE,EAO/C,EAP+CA,UAAWwF,EAO1D,EAP0DA,OAQrDG,EAAmB,IAAN5I,EAEnB,SAAS6I,EAAOC,EAAYC,EAAYT,GACtC,MACE,IAAMQ,EAAGR,EAAI,IAAMS,EACnB,IAAMT,EAAI,IAAMA,EAAI,UAAYQ,EAAK,IAAMC,EAAKT,EAChD,IAAMA,EAAI,IAAMA,EAAI,UAAYQ,EAAKR,EAAI,IAAMS,EAInD,SAASC,EAAMxJ,GACb,MAAO,KAAQQ,EAAO,IAAMR,EAAI,IAAMQ,EAGxC,SAASiJ,EAAMzJ,GACb,MAAO,IAAMA,EAAI,KAAQQ,EAAO,IAAMA,EAGxC,IAAIkJ,EAAa,GACb7D,EAAI,EACR,KAAOA,GAAKrF,GACVkJ,GAAcD,EAAM5D,GAAK4D,GAAO5D,GAChCA,GAAKqD,EAGPrD,EAAI,EACJ,KAAOA,GAAKrF,GACVkJ,GAAcF,EAAM3D,GAAK2D,GAAO3D,GAChCA,GAAKsD,EAGP,IAAIQ,EAAc,GAElB,GAAIV,EACFA,EAAOpB,SAAQ,SAAA3F,GACb,IAAM0H,EAAM1H,EAAI3B,KAAKG,GAAK,IAC1BiJ,GAAe,QAAUP,EAAa7I,KAAKe,IAAIsI,GAAO,IAAMR,EAAa7I,KAAKa,IAAIwI,WAIpF,IADA/D,EAAI,EACGA,EAAI,KAAK,CACd,IAAM+D,EAAM/D,EAAItF,KAAKG,GAAK,IAC1BiJ,GAAe,QAAUP,EAAa7I,KAAKe,IAAIsI,GAAO,IAAMR,EAAa7I,KAAKa,IAAIwI,GAClF/D,GAAKpC,EAIToC,EAAItC,EACJ,KAAOsC,GAAKuD,GACVO,GAAeN,EAAO,EAAG,EAAGxD,GAC5BA,GAAKtC,EAGP,MAAO,CACLsG,KAAM,CAACC,MAAOJ,EAAYK,MAAOP,EAAM,GAAKC,EAAM,IAClDO,MAAO,CAACF,MAAOH,EAAaI,MAAOV,EAAO,EAAG,EAAG,KAzKpCY,CAAS,CAACzJ,MAAK+C,aAAYE,YAAWwF,SAAQC,MAAOF,EAAUG,MAAOH,IANjC,E,6EASnCL,GACd,IAAMuB,EAAMzP,KAAKuJ,IAAIE,QACrB,GAAIgG,EAAK,CACP,IAAMC,EAAOD,EAAIE,wBACVpP,EAAQmP,EAARnP,EAAGqP,EAAKF,EAALE,EAFH,EAGoB1B,EAAI2B,YAAxBC,EAHA,EAGAA,QAASC,EAHT,EAGSA,QACVC,EAAmD,IAAxCF,EAAUvP,GAAKP,KAAKJ,MAAMqC,KAAO,IAASjC,KAAKJ,MAAMmG,IAChEkK,EAAoD,KAAxCF,EAAUH,GAAK5P,KAAKJ,MAAMqC,KAAO,IAASjC,KAAKJ,MAAMmG,IACvE,MAAO,CAAC/F,KAAK0G,MAAMsJ,GAAShQ,KAAK0G,MAAMuJ,O,kCAmBzC,OAAIjQ,KAAKiO,KAAKsB,MAEV,oCACCvP,KAAKiO,KAAKsB,MAAMF,MACf,0BAAMrH,EAAGhI,KAAKiO,KAAKsB,MAAMF,MACvB3K,UAAW1E,KAAKJ,MAAMmE,QAAQ+J,MAC9BoC,aAAa,uBACb,KACHlQ,KAAKiO,KAAKsB,MAAMD,MACf,0BAAMtH,EAAGhI,KAAKiO,KAAKsB,MAAMD,MACvB5K,UAAW1E,KAAKJ,MAAMmE,QAAQ4J,MAC9BuC,aAAa,uBACb,MAID,O,iCAIP,OAAIlQ,KAAKiO,KAAKmB,KAEV,oCACCpP,KAAKiO,KAAKmB,KAAKC,MACd,0BAAMrH,EAAGhI,KAAKiO,KAAKmB,KAAKC,MACtB3K,UAAW1E,KAAKJ,MAAMmE,QAAQ+J,MAC9BoC,aAAa,uBACb,KACHlQ,KAAKiO,KAAKmB,KAAKE,MACd,0BAAMtH,EAAGhI,KAAKiO,KAAKmB,KAAKE,MACtB5K,UAAW1E,KAAKJ,MAAMmE,QAAQ4J,MAC9BuC,aAAa,uBACb,MAID,O,+BAIP,IAAMC,EAAenQ,KAAKJ,MAAMmG,IAAM,GAChCqK,EAAU,EAAEpQ,KAAKJ,MAAMmG,KAAM/F,KAAKJ,MAAMmG,IAAK,EAAE/F,KAAKJ,MAAMmG,IAAK,EAAE/F,KAAKJ,MAAMmG,KAClF,OACE,yBACEwD,IAAKvJ,KAAKuJ,IACVzE,QAAS9E,KAAK8E,QACdsJ,cAAepO,KAAKoO,cACpBgC,QAASA,EAAQC,KAAK,KACtB3L,UAAW1E,KAAKJ,MAAMmE,QAAQqF,KAC9B/G,MAAK,eAAMrC,KAAKJ,MAAMyC,MAAjB,CAAwBuB,MAAO5D,KAAKJ,MAAMqC,KAAMsI,OAAQvK,KAAKJ,MAAMqC,QAExE,uBAAGyC,UAAW1E,KAAKJ,MAAMmE,QAAQyJ,KAC/BnL,MAAO,CAACiO,OAAQtQ,KAAKJ,MAAM2Q,YAE1BvQ,KAAKwQ,WACLxQ,KAAKyQ,aAER,4BACE5B,GAAI7O,KAAKJ,MAAMgG,MAAM,GACrBkJ,IAAK9O,KAAKJ,MAAMgG,MAAM,GACtByI,EAAG8B,EACHzL,UAAW1E,KAAKJ,MAAMmE,QAAQgK,OAC9B1L,MAAO,CACLiO,OAAQtQ,KAAKJ,MAAM8Q,YACnBhD,KAAM1N,KAAKJ,MAAM8Q,oB,GAvHI3P,IAAMC,WAAjCgN,GAQG/M,aAAe,CACpBgB,KAAM,IACNqM,UAAW,EACXtF,UAAW,GACXF,WAAY,GACZyF,SAAU,GAEVmC,YAAa,QAiHFtN,YAAW+F,GAAX/F,CAAmB4K,I,ICtKtB2C,G,UCgEGC,G,YA3Cb,WAAYhR,GAA0B,IAAD,8BACnC,4CAAMA,KAHRC,WAEqC,IAOrC2F,SAAW,SAAC0I,GACV,IAAM2C,EAAI3C,EAAI4C,OAAOlL,MACX,KAANiL,EACF,EAAK5Q,SAAS,CAAC8Q,SAAS,IAExB,EAAK9Q,SAAS,CAAC8Q,SAAS,IAEtB,EAAKnR,MAAM4F,WACRwL,OAAOH,IACV,EAAKjR,MAAM4F,SAAS0I,KAhBW,EAqBrC+C,OAAS,SAAC/C,GACJ,EAAKtO,MAAMqR,QACb,EAAKrR,MAAMqR,OAAO/C,GAEpB,EAAKjO,SAAS,CAAC8Q,SAAS,KAvBxB,EAAKlR,MAAQ,CACXkR,SAAS,GAHwB,E,sEA6B3B,IAAD,EACiF/Q,KAAKJ,MAAtF+F,EADA,EACAA,KAAMD,EADN,EACMA,IAAKK,EADX,EACWA,IAAKmL,EADhB,EACgBA,WADhB,KAC4B1L,SAD5B,EACsCyL,OADtC,EAC8CrL,cAD9C,MACoD,GADpD,MACwDuL,kBADxD,MACmE,EADnE,EACyE3M,EADzE,2FAEP,OAAOzD,IAAMiE,cAAcoM,KAApB,aACLtR,KAAM,SACN8F,MAAOA,GAASA,EAAQ5F,KAAKH,MAAMkR,QAAU,GAAKI,EAClDD,WAAW,aAAEvL,OAAMD,MAAKK,OAAQmL,GAChC1L,SAAUxF,KAAKwF,SACfyL,OAAQjR,KAAKiR,QACVzM,Q,GAxCiBzD,IAAMC,WCpB1BmI,GAAS9F,aAAa,kBAAuB,CACjD+F,KAAM,CAEJzF,OAAQ,EACRC,MAAO,OACPyN,UAAW,aALa,EAAE5Q,QAKQ6Q,aAIhCC,GAAkBnO,YAAW+F,GAAX/F,CAAmBoO,KAuB5BC,gBACb,SAAC5R,GAAD,MAAmB,CACjB+F,MAAO/F,EAAM6R,GAAG5O,QAElB,SAAC6O,GAAD,MAAyB,CACvBnM,SAAU,SAAC0I,EAAU3N,GAAX,OAAsBoR,EAAS9O,EAAOtC,QALrCkR,EArBG,SAAC7R,GAAD,OAChB,kBAAC2R,GAAoB3R,EAEnB,kBAACgS,EAAA,EAAD,CACEhM,MAAOtD,EAAIuP,OACXpO,MAAM,aACNqO,KAAM,kBAAC,EAAKC,KAAN,QAER,kBAACH,EAAA,EAAD,CACEhM,MAAOtD,EAAI0P,SACXvO,MAAM,UACNqO,KAAM,kBAAC,EAAKE,SAAN,QAER,kBAACJ,EAAA,EAAD,CACEhM,MAAOtD,EAAI2P,KACXxO,MAAM,OACNqO,KAAM,kBAAC,EAAKG,KAAN,a,SFzBAtB,O,eAAAA,I,mBAAAA,I,qBAAAA,I,sBAAAA,Q,KGHL,ICDMuB,GAAe,SAAClM,GAAD,MAAmC,CAC7DlG,KDC2B,0BCA3B8C,QAASoD,I,oBCULmM,GAAiB/O,YAAW,GAAXA,CACpBgP,MAOGC,G,YAGJ,WAAYzS,GAAe,IAAD,8BACxB,4CAAMA,KAHRC,WAE0B,IAQ1ByS,aAAe,SAACpE,GACd,EAAKjO,SAAS,CAACwJ,QAASyE,EAAI4C,OAAOlL,SATX,EAY1B2M,MAAQ,WACN,EAAK3S,MAAM4S,WAAW,EAAK3S,MAAM4J,SAC7B,EAAK7J,MAAM6S,SACb,EAAK7S,MAAM6S,WAfW,EAmB1BC,MAAQ,WACN,EAAKzS,SAAS,CACZwJ,QAAS,EAAK7J,MAAM+S,UAAUlJ,QAC9BzD,OAAO,eAAK,EAAKpG,MAAM+S,UAAU3M,WApBnC,EAAKnG,MAAQ,CACX4J,QAAS7J,EAAM+S,UAAUlJ,QACzBzD,OAAO,eAAKpG,EAAM+S,UAAU3M,SAJN,E,sEA0BhB,IAAD,OACP,OACE,kBAAC4M,GAAD,KACE,kBAACnO,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAACpO,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAACzB,GAAA,EAAD,CAAW0B,QAAM,EACfrP,MAAM,SACNmC,MAAO5F,KAAKH,MAAM4J,QAClBjE,SAAUxF,KAAKsS,aACfjQ,MAAO,CAAC0Q,SAAU,UAEjBC,OAAOC,KAAKjT,KAAKJ,MAAM+S,UAAUO,UAAUC,OAAO7I,KAAI,SAAAtD,GACrD,OACE,kBAACmL,GAAD,CAAgBiB,IAAKpM,EAAGpB,MAAOoB,GAC3B,kBAAC,GAAD,CACEiD,KAAM,EAAKrK,MAAM+S,UAAUO,SAASlM,GAAGvD,MACvC0G,gBAAiB,CACftI,QAAS,mBAQzB,kBAAC4C,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAACjO,GAAA,EAAD,CAAa1C,WAAS,EAACT,MAAM,UAAUyL,YAAY,YACjD,kBAACmG,GAAA,EAAD,CAAQnR,WAAS,EAAC4C,QAAS9E,KAAKuS,OAAhC,SACA,kBAACc,GAAA,EAAD,CAAQnR,WAAS,EAAC4C,QAAS9E,KAAK0S,OAAhC,iB,GAzDkB3R,IAAMC,WAkEvByQ,gBACb,SAAC5R,GAAD,MAAsB,CACpB8S,UAAW9S,EAAM8S,cAEnB,SAAChB,GAAD,MAAyB,CACvBa,WAAY,SAACY,GDtFS,IAAsBpN,ECuF1C2L,EDvF2E,CAC/E7R,KDLyB,wBCMzB8C,QAAS,CAAC6G,QCqFc2J,EDrFLpN,YCsFf2L,EChFmC,CACvC7R,KCRsB,kBFwFlB6R,EAAS3O,SARAyO,CAWbY,I,oBGrFIiB,G,YAOJ,WAAY1T,GAAe,IAAD,8BACxB,4CAAMA,KAPRC,WAM0B,IAS1B0T,WAAa,SAACrF,GACZ,IAAMsF,EAAOtF,EAAI4C,OAAOlL,MACxB,EAAK3F,SAAS,CAACuT,UAXS,EA4B1BC,UAAY,SAACvF,GAAD,OAA8C,EAAKwF,QAAQxF,EAAI4C,OAAOlL,QA5BxD,EA8B1B+N,YAAc,SAACvI,GACb,OAAO,SAAC8C,GACN,IAAM7C,EAAM,aAAO,EAAKxL,MAAMwL,QAC9BA,EAAOD,GAAK8C,EAAI4C,OAAOlL,MACvB,EAAK3F,SAAS,CAACoL,aAlCO,EAsC1BuI,SAAW,kBAAM,EAAKF,OAAO,EAAK7T,MAAMgU,IAAM,IAtCpB,EAuC1BC,YAAc,kBAAM,EAAKJ,OAAO,EAAK7T,MAAMgU,IAAM,IAvCvB,EAyC1BE,KAAO,WACL,EAAKnU,MAAMoU,OAAO,EAAKnU,MAAM2T,KAAM,EAAK3T,MAAMwL,QAC9C,EAAKzL,MAAM6S,WA3Ca,EA8C1BwB,UAAY,WACV,MAAwB,KAApB,EAAKpU,MAAM2T,OAGf,EAAK5T,MAAMsU,WAAW9G,SAAQ,SAAApG,GAC5B,GAAIA,EAAEmN,gBAAkB,EAAKtU,MAAM2T,KAAKW,cACtC,OAAO,MAGJ,IArDP,EAAKtU,MAAQ,CACX2T,KAAM,GACNK,IAAK,EACLxI,OAAQ,CAAC,UAAW,YALE,E,oEAcnBH,GACL,IAAM2I,EAAM/N,KAAKC,IAAI,EAAGmF,GACpBG,EAAM,aAAOrL,KAAKH,MAAMwL,QAC5B,GAAIwI,EAAMxI,EAAO+I,OAEf,IADA,IAAM7T,EAAI8K,EAAOA,EAAO+I,OAAO,GACxB/I,EAAO+I,OAASP,GACrBxI,EAAOgJ,KAAK9T,QAGd8K,EAASA,EAAOiJ,MAAM,EAAET,GAE1B7T,KAAKC,SAAS,CAAC4T,MAAKxI,a,uCAiCLD,GACf,OAAIA,EAAIpL,KAAKH,MAAMwL,OAAO+I,OAEtB,kBAACG,GAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,GACb,2BAAO3U,KAAK,QACV8F,MAAO5F,KAAKH,MAAMwL,OAAOD,GACzB5F,SAAUxF,KAAK2T,YAAYvI,GAC3B/I,MAAO,CAACuB,MAAO,OAAQ+I,aAAc,EAAGY,QAAS,MAKlD,O,+BAGC,IAAD,OACP,OACE,oCAEE,kBAACmH,GAAA,EAAD,wBAEA,kBAACjQ,GAAA,EAAD,KACA,kBAAC2M,GAAA,EAAD,CACM3N,MAAM,OACN5B,QAAQ,SACR+D,MAAO5F,KAAKH,MAAM2T,KAClBhO,SAAUxF,KAAKuT,WACfrC,WAAY,CAACpR,KAAM,WAGzB,kBAAC2E,GAAA,EAAD,CAAKsE,EAAG,GACN,kBAAC,GAAD,CACE1G,MAAO,CAACuB,MAAO,OAAQ2G,OAAQ,OAC/B+B,OAAO,SACPC,cAAe,CAACoI,OAAQ3U,KAAKH,MAAMwL,QACnCV,SAAS,EACTD,KAAM,EACN9G,MAAO,IACP2G,OAAQ,MAGZ,kBAAC9F,GAAA,EAAD,KACE,kBAAC8P,GAAA,EAAD,CAAMjR,WAAS,GACZtD,KAAKH,MAAMwL,OAAOf,KAAI,SAAC7I,EAAe2J,GAAhB,OACrB,kBAAC3G,GAAA,EAAD,CAAKoO,EAAG,IAAM,EAAK+B,iBAAiBxJ,QAGxC,kBAAC3G,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAAC,GAAD,CACEhR,QAAQ,YACRQ,MAAO,CAACwS,UAAW,UACnB5Q,OAAQjE,KAAK8T,YACb1P,YAAapE,KAAKH,MAAMwL,OAAO+I,OAAS,EACxCpQ,KAAMhE,KAAK4T,YAGf,kBAACnP,GAAA,EAAD,KACA,kBAAC4O,GAAA,EAAD,CACInR,WAAS,EAACT,MAAM,UAChBsD,UAAW/E,KAAKiU,YAChBnP,QAAS9E,KAAK+T,MAHlB,e,GA1HgBhT,IAAMC,WAA1BsS,GAGGrS,aAAe,CACpBiT,WAAY,IAkIDZ,IC5GVwB,GD4GUxB,M,kDE1HTyB,G,YASJ,WAAYnV,GAAe,IAAD,8BACxB,4CAAMA,KATRC,WAQ0B,IAW1BmV,gBAAkB,kBAAM,EAAK/U,SAAS,CAACgV,aAAa,KAX1B,EAY1BC,iBAAmB,kBAAM,EAAKjV,SAAS,CAACgV,aAAa,KAZ3B,EAkB1BE,cAAgB,SAACjH,GAAD,OAAc,EAAKjO,SAAS,CAAC0K,QAASuD,EAAI4C,OAAOsE,WAlBvC,EAmB1BC,WAAa,SAACnH,EAAUxD,GAAX,OAAuC,EAAKzK,SAAS,CAACyK,UAnBzC,EAqB1B4K,oBAAsB,SAACpH,GAAD,OAAc,EAAKjO,SAAS,CAACsV,cAAerH,EAAI4C,OAAOsE,WArBnD,EAuB1BI,aAAe,SAACtH,GACd,IAAM5B,EAAS4B,EAAI4C,OAAOlL,MACX,WAAX0G,EACF,EAAK0I,kBAEL,EAAKS,UAAUnJ,IA5BO,EAgC1BoJ,WAAa,WACX,OAAI,EAAK7V,MAAMyM,SAAW,EAAK1M,MAAM6J,QAAQ6C,QACxC,EAAKzM,MAAM8K,UAAY,EAAK/K,MAAM6J,QAAQkB,SAC1C,EAAK9K,MAAM0V,gBAAkB,EAAK3V,MAAM6J,QAAQ8L,eAChD,EAAK1V,MAAM6K,OAAS,EAAK9K,MAAM6J,QAAQiB,MApCpB,EA0C1BiL,WAAa,SAAC3O,EAAWqE,GACvB,EAAKzL,MAAMgW,UAAU5O,EAAGqE,GACxB,EAAKoK,UAAUzO,IA5CS,EA+C1BuL,MAAQ,WACN,EAAK3S,MAAMiW,YAAY,CACrBvJ,OAAQ,EAAKzM,MAAMyM,OACnB3B,QAAS,EAAK9K,MAAM8K,QACpBD,KAAM,EAAK7K,MAAM6K,KACjB6K,cAAe,EAAK1V,MAAM0V,gBAExB,EAAK3V,MAAM6S,SACb,EAAK7S,MAAM6S,WAvDW,EA2D1BqD,OAAS,WACP,EAAK7V,SAAS,CACZqM,OAAQ,EAAK1M,MAAM6J,QAAQ6C,OAC3B3B,QAAS,EAAK/K,MAAM6J,QAAQkB,QAC5BD,KAAM,EAAK9K,MAAM6J,QAAQiB,QA7D3B,EAAK7K,MAAQ,CACXyM,OAAQ1M,EAAM6J,QAAQ6C,OACtB3B,QAAS/K,EAAM6J,QAAQkB,QACvBD,KAAM9K,EAAM6J,QAAQiB,KACpB6K,cAAe3V,EAAM6J,QAAQ8L,cAC7BN,aAAa,GAPS,E,uEAchB3I,GACRtM,KAAKC,SAAS,CAACqM,a,+BAqDf,OACE,oCACE,kBAACsG,GAAD,KACE,kBAACnO,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAACpO,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAACzB,GAAA,EAAD,CAAW0B,QAAM,EACf7Q,KAAK,QACLwB,MAAM,SACNmC,MAAO5F,KAAKH,MAAMyM,OAClB9G,SAAUxF,KAAKwV,cAEf,kBAACpD,GAAA,EAAD,CAAUxM,MAAM,UAAhB,qBACC5F,KAAKJ,MAAM6J,QAAQsM,WAAW5C,OAAO7I,KAAI,SAAAtD,GAAC,OACzC,kBAACoL,GAAA,EAAD,CAAUgB,IAAKpM,EAAGpB,MAAOoB,GAAIA,MAE9BgM,OAAOC,KAAKjT,KAAKJ,MAAM6J,QAAQ8C,eAAe4G,OAAO7I,KAAI,SAAAtD,GAAC,OACzD,kBAACoL,GAAA,EAAD,CAAUgB,IAAKpM,EAAGpB,MAAOoB,GAAIA,QAInC,kBAACvC,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAACmD,GAAA,EAAD,CACEvS,MAAM,WACNwS,QACE,kBAACC,GAAA,EAAD,CAAQd,QAASpV,KAAKH,MAAM8K,QAC1BnF,SAAUxF,KAAKmV,cACfgB,KAAK,WAMb,kBAAC1R,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAACmD,GAAA,EAAD,CACEvS,MAAM,iBACNwS,QACE,kBAACC,GAAA,EAAD,CAAQd,QAASpV,KAAKH,MAAM0V,cAC1B/P,SAAUxF,KAAKsV,oBACfa,KAAK,WAMb,kBAAC1R,GAAA,EAAD,CAAKoO,EAAG,EAAGxQ,MAAOrC,KAAKH,MAAM0V,cAAgB,CAACa,QAAS,QAAU,IAC/D,kBAACC,GAAA,EAAD,CAAanU,WAAS,GACpB,kBAACwS,GAAA,EAAD,CAAY4B,QAAM,GAAlB,QACA,kBAACC,GAAA,EAAD,CACE9U,MAAM,YACNmE,MAAO5F,KAAKH,MAAM6K,KAClBlF,SAAUxF,KAAKqV,WACf3P,KAAM,EACNK,IAAK,EACLJ,KAAM,OAKZ,kBAAClB,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAAC,GAAD,CACExQ,MAAO,CAACuB,MAAO,OAAQ2G,OAAQ,OAC/B+B,OAAQtM,KAAKH,MAAMyM,OACnBC,cAAevM,KAAKJ,MAAM6J,QAAQ8C,cAClC5B,QAAS3K,KAAKH,MAAM8K,QACpBD,KAAM1K,KAAKH,MAAM6K,KACjB9G,MAAO,IACP2G,OAAQ,MAIZ,kBAAC9F,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAAC,GAAD,CACExQ,MAAO,CAACuB,MAAO,OAAQ2G,OAAQ,OAC/B+B,OAAQtM,KAAKJ,MAAM6J,QAAQ6C,OAC3BC,cAAevM,KAAKJ,MAAM6J,QAAQ8C,cAClC5B,QAAS3K,KAAKJ,MAAM6J,QAAQkB,QAC5BD,KAAM1K,KAAKJ,MAAM6J,QAAQiB,KACzB9G,MAAO,IACP2G,OAAQ,KAEV,kBAACmK,GAAA,EAAD,iBAIF,kBAAC9P,GAAA,EAAD,CAAa1C,WAAS,EAACT,MAAM,UAAUyL,YAAY,YACjD,kBAACmG,GAAA,EAAD,CACEvO,QAAS9E,KAAKuS,MACdxN,UAAW/E,KAAK0V,cAFlB,SAIA,kBAACrC,GAAA,EAAD,CACEvO,QAAS9E,KAAK8V,OACd/Q,UAAW/E,KAAK0V,cAFlB,YASN,kBAACc,GAAA,EAAD,CACEC,KAAMzW,KAAKH,MAAMoV,YACjBxC,QAASzS,KAAKkV,kBAEd,kBAACzQ,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAAC,GAAD,CACEmB,OAAQhU,KAAK2V,WACblD,QAASzS,KAAKkV,iBACdhB,WAAU,uBACLlU,KAAKJ,MAAM6J,QAAQsM,YADd,aAEL/C,OAAOC,KAAKjT,KAAKJ,MAAM6J,QAAQ8C,0B,GAzLtBxL,IAAMC,WAmMnByQ,gBACb,SAAC5R,GAAD,MAAsB,CACpB4J,QAAQ,eAAK5J,EAAM4B,WAErB,SAACkQ,GAAD,MAAe,CACbkE,YAAa,SAACa,GACZ/E,ECjOoD,CACxD7R,KCToB,eDUpB8C,QD+NyB8T,IACrB/E,EAAS5O,EAAgBN,EAAakU,SAExCf,UAAW,SAAC5O,EAAWqE,GACrBsG,EChOmB,SAAC6B,EAAcnI,GAAf,MAAgD,CACvEvL,KCfwB,mBDgBxB8C,QAAS,CAAC4Q,OAAMnI,WD8NHuK,CAAU5O,EAAGqE,QAVboG,CAabsD,IG5NI6B,G,YAMJ,WAAYhX,GAAe,IAAD,8BACxB,4CAAMA,KANRC,WAK0B,IAF1BgX,gBAE0B,IAQ1BnB,WAAa,WACX,IAAK,IAAM1O,KAAK,EAAKpH,MAAM6J,QACzB,GAAI,EAAK7J,MAAM6J,QAAQzC,KAAO,EAAKnH,MAAM4J,QAAQzC,GAC/C,OAAO,EAGX,OAAO,GAdiB,EAiB1BuL,MAAQ,WAAO,IAAD,EACY,EAAK1S,MAAM4J,QAA9BqN,EADO,EACPA,EAAGC,EADI,EACJA,IAAQvS,EADJ,4BAEZ,EAAK5E,MAAMoX,WAAX,aAAuBF,IAAGC,OAAQvS,IAC9B,EAAK5E,MAAM6S,SACb,EAAK7S,MAAM6S,WArBW,EAyB1BqD,OAAS,WACP,EAAK7V,SAAS,CAACwJ,QAAQ,eAAK,EAAK7J,MAAM6J,YA1Bf,EAiC1BwN,MAAQ,SAAC/I,GAAD,OAAc,EAAKgJ,WAAW,CAACrI,IAAKX,EAAI4C,OAAOlL,SAjC7B,EAkC1BuR,MAAQ,SAACjJ,GAAD,OAAc,EAAKgJ,WAAW,CAACpI,IAAKZ,EAAI4C,OAAOlL,SAlC7B,EAmC1BwR,KAAO,SAAClJ,GAAD,OAAc,EAAKgJ,WAAW,CAACG,GAAInJ,EAAI4C,OAAOlL,SAnC3B,EAoC1B0R,KAAO,SAACpJ,GAAD,OAAc,EAAKgJ,WAAW,CAACJ,GAAI5I,EAAI4C,OAAOlL,SApC3B,EAqC1B2R,OAAS,SAACrJ,GAAD,OAAc,EAAKgJ,WAAW,CAACH,KAAM7I,EAAI4C,OAAOlL,SArC/B,EAsC1B4R,iBAAmB,SAACtJ,GAAD,OAAc,EAAKgJ,WAAW,CAACO,eAAgBvJ,EAAI4C,OAAOlL,SApC3E,EAAKiR,WAAa,GAAK,EAAKjX,MAAM6J,QAAQsN,IAC1C,EAAKlX,MAAQ,CACX4J,QAAQ,eAAK7J,EAAM6J,UAJG,E,wEA6BflJ,GACTP,KAAKC,SAAS,CAACwJ,QAAQ,eAAKzJ,KAAKH,MAAM4J,QAAjB,GAA6BlJ,O,+BAYnD,OACE,kBAACqS,GAAD,KAEE,kBAACnO,GAAA,EAAD,CAAKoO,EAAG,GACR,kBAACpO,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAAC6B,GAAA,EAAD,wBACA,kBAACH,GAAA,EAAD,CAAMjR,WAAS,EAACoU,QAAS,GACvB,kBAACnD,GAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,GACb,kBAAC,GAAD,CACEvS,WAAW,EACXuB,MAAM,QACNmC,OAAQ5F,KAAKH,MAAM4J,QAAQ4N,EAC3B7R,SAAUxF,KAAKoX,KACfzR,KAAM,EACND,IAAK,EACLwL,WAAY,CAAC7O,MAAO,CAAC0Q,SAAU,WAGnC,kBAACwB,GAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,GACb,kBAAC,GAAD,CACEvS,WAAW,EACXuB,MAAM,SACNmC,OAAQ5F,KAAKH,MAAM4J,QAAQqN,EAC3BtR,SAAUxF,KAAKsX,KACf3R,KAAM,EACND,IAAK,EACLwL,WAAY,CAAC7O,MAAO,CAAC0Q,SAAU,YAKrC,kBAACtO,GAAA,EAAD,KACE,kBAAC,GAAD,CACEhB,MAAM,sBACNmC,OAAQ5F,KAAKH,MAAM4J,QAAQgO,cAC3BjS,SAAUxF,KAAKwX,iBACf7R,KAAM,IACND,IAAK,OAIT,kBAACjB,GAAA,EAAD,KACE,kBAAC,GAAD,CACEhB,MAAM,sBACNmC,OAAQ5F,KAAKH,MAAM4J,QAAQoF,GAC3BrJ,SAAUxF,KAAKiX,MACftR,KAAM3F,KAAK6W,cAIf,kBAACpS,GAAA,EAAD,KACE,kBAAC,GAAD,CACEhB,MAAM,sBACNmC,OAAQ5F,KAAKH,MAAM4J,QAAQqF,GAC3BtJ,SAAUxF,KAAKmX,MACfxR,KAAM3F,KAAK6W,cAIf,kBAACpS,GAAA,EAAD,KACE,kBAAC,GAAD,CACEhB,MAAM,0BACNmC,OAAQ5F,KAAKH,MAAM4J,QAAQsN,IAC3BvR,SAAUxF,KAAKuX,OACf5R,KAAM,GACND,IAAK,KAIT,kBAACd,GAAA,EAAD,CAAa1C,WAAS,EAACT,MAAM,UAAUyL,YAAY,YACjD,kBAACmG,GAAA,EAAD,CACEvO,QAAS9E,KAAKuS,MACdxN,UAAW/E,KAAK0V,cAFlB,SAIA,kBAACrC,GAAA,EAAD,CACEvO,QAAS9E,KAAK8V,OACd/Q,UAAW/E,KAAK0V,cAFlB,iB,GA1He3U,IAAMC,WAwIlByQ,gBACb,SAAC5R,GAAD,MAAsB,CACpB4J,QAAS5J,EAAM8X,SAEjB,SAAChG,GAAD,MAAe,CACbqF,WAAY,SAACY,GACXjG,EPlJqD,CACzD7R,KCNoB,cDOpB8C,QOgJgCgV,IAC5BjG,EAAS3O,SAPAyO,CAUbmF,I,kDC7GanF,eACb,MACA,SAACE,GAAD,MAAoB,CAClB3O,aAAc,eAACC,EAAD,+DAAmC0O,EAAS3O,EAAaC,QAH5DwO,EA3Ca,SAAC7R,GAM3B,OACE,kBAAC4W,GAAA,EAAD,CACEC,KAAM7W,EAAM6W,KACZhE,QAAS7S,EAAM6S,QACfoF,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,WAGd,kBAACtT,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAACpO,GAAA,EAAD,CAAKoO,EAAG,GACN,kBAAClO,GAAA,EAAD,wFAKJ,kBAACC,GAAA,EAAD,CACE1C,WAAS,EACTT,MAAM,UACNI,QAAQ,YACR,kBAACwR,GAAA,EAAD,CAAQvO,QA7BG,WACflF,EAAMoD,cAAa,GACnBpD,EAAM6S,YA2BF,kCAGA,kBAACY,GAAA,EAAD,CAAQvO,QAASlF,EAAM6S,SAAvB,gBLxBFN,GAAiB/O,YAAW,CAChCgG,KAAM,CACJmE,QAAS,QAFUnK,CAIpBgP,MAEG6F,GAAc7U,YAAW,CAC7BgG,KAAM,CACJmE,QAAS,EACTpL,OAAQ,IAHQiB,CAKjB8U,MAGGC,GAAwB/U,YAAW,CACvCgV,MAAO,CACLhC,QAAS,OACTiC,cAAe,MACf9N,OAAQ,OACRwI,SAAU,SALgB3P,CAO3BkV,O,SAEExD,O,eAAAA,I,yBAAAA,I,iBAAAA,I,gBAAAA,Q,SAOCyD,G,YAMJ,WAAY3Y,GAAe,IAAD,8BACxB,4CAAMA,KANRC,WAK0B,IAU1B2Y,SAAW,kBAAM,EAAK5Y,MAAM8C,SAASH,EAAMuS,OAVjB,EAW1B2D,cAAgB,kBAAM,EAAKxY,SAAS,CAACyY,KAAM5D,GAAK6D,aAXtB,EAY1BC,UAAY,kBAAM,EAAK3Y,SAAS,CAACyY,KAAM5D,GAAK6B,SAZlB,EAa1BkC,SAAW,kBAAM,EAAK5Y,SAAS,CAACyY,KAAM5D,GAAKgE,QAbjB,EAc1BC,SAAW,WACT,EAAK9Y,SAAS,CAACyY,KAAM5D,GAAKkE,OAC1B,EAAKC,aACL,EAAKrZ,MAAM8C,SAASH,EAAMyW,OAjBF,EAoB1BE,UAAY,kBAAM,EAAKjZ,SAAS,CAACkZ,OAAO,KApBd,EAqB1BF,WAAa,kBAAM,EAAKhZ,SAAS,CAACkZ,OAAO,KAnBvC,EAAKtZ,MAAQ,CACX6Y,KAAM5D,GAAKkE,KACXG,OAAO,GAJe,E,sEAwBxB,IAAMC,EAAapZ,KAAKH,MAAM6Y,OAAS5D,GAAKkE,KAAO,GAAK,CAAC5C,QAAS,QAC5DiD,EAAYrZ,KAAKH,MAAM6Y,OAAS5D,GAAKkE,KAAO,GAAK,CAACpV,MAAO,OAC/D,OACE,oCACA,kBAACuU,GAAD,CACE1B,KAAMzW,KAAKJ,MAAM6W,KACjB6C,OAAQtZ,KAAKwY,SACb/F,QAASzS,KAAK+Y,UAEd,kBAACQ,GAAA,EAAD,CAAMlX,MAAOgX,GACX,kBAAC,GAAD,CAAgBvU,QAAS9E,KAAKyY,eAC5B,kBAACe,GAAA,EAAD,KAAc,kBAAC,EAAKC,UAAN,OACd,kBAACxB,GAAD,CAAa5V,MAAO+W,GAApB,cAEF,kBAAC,GAAD,CAAgBtU,QAAS9E,KAAK4Y,WAC5B,kBAACY,GAAA,EAAD,KAAc,kBAAC,EAAKE,QAAN,OACd,kBAACzB,GAAD,CAAa5V,MAAO+W,GAApB,WAEF,kBAAC,GAAD,CAAgBtU,QAAS9E,KAAK6Y,UAC5B,kBAACW,GAAA,EAAD,KAAc,kBAAC,EAAKV,KAAN,OACd,kBAACb,GAAD,CAAa5V,MAAO+W,GAApB,SAEF,kBAACO,GAAA,EAAD,MACA,kBAAC,GAAD,CAAgB7U,QAAS9E,KAAKkZ,WAC5B,kBAACM,GAAA,EAAD,KAAc,kBAAC,EAAKI,eAAN,OACd,kBAAC3B,GAAD,CAAa5V,MAAO+W,GAApB,2BAEF,kBAAC,GAAD,CAAgBtU,QAAS9E,KAAK+Y,SAAU1W,MAAO,CAACwX,WAAY,MAAOC,cAAe,QAChF,kBAACN,GAAA,EAAD,KAAc,kBAAC,EAAKO,KAAN,OACd,kBAAC9B,GAAD,CAAa5V,MAAO+W,GAApB,WAGJ,kBAAC3U,GAAA,EAAD,KACGzE,KAAKH,MAAM6Y,OAAS5D,GAAK6D,UAAY,kBAAC,GAAD,CAAmBlG,QAASzS,KAAK+Y,WACrE/Y,KAAKH,MAAM6Y,OAAS5D,GAAK6B,MAAQ,kBAAC,GAAD,CAAelE,QAASzS,KAAK+Y,WAC9D/Y,KAAKH,MAAM6Y,OAAS5D,GAAKgE,KAAO,kBAAC,GAAD,CAAcrG,QAASzS,KAAK+Y,WAC5D,OAIN,kBAACa,GAAD,CAAgBnD,KAAMzW,KAAKH,MAAMsZ,MAAO1G,QAASzS,KAAKiZ,kB,GAtE/BlY,IAAMC,WMpDpBgZ,GNgIAvI,aACb,SAAC5R,GAAD,MAAmB,CACjB4W,KAAM5W,EAAM6R,GAAG/O,QAAUJ,EAAMuS,SAEjC,SAACnD,GAAD,MAAyB,CACvBjP,SAAU,SAACC,GAAD,OAAkBgP,EAASjP,EAASC,QALnC8O,CAOb8G,IOvGa9G,eACb,MACA,SAACE,GAAD,MAAoB,CAClBsI,OAAQ,SAAC/O,GACPyG,EVF6C,CACjD7R,KCxBqB,eDyBrB8C,QUAoBsI,IAChByG,EAAS3O,MAEXkX,QAAS,SAAChP,GACRyG,EVD+C,CACnD7R,KC5BsB,gBD6BtB8C,QUDqBsI,IACjByG,EAAS3O,SATAyO,EAjBF,SAAC,GAAiD,IAAD,IAA/C0I,cAA+C,MAAxC,EAAwC,EAArCF,EAAqC,EAArCA,OAAQC,EAA6B,EAA7BA,QAAY1V,EAAiB,8CAI5D,OACE,kBAAC,GAAD,iBACMA,EADN,CAEER,KANQ,kBAAMiW,EAAOE,IAOrBlW,OANS,kBAAMiW,EAAQC,IAOvB9V,SAAUC,EAAK8V,QACf7V,OAAQD,EAAK+V,a,kBCvBnB,SAASC,GAAY1P,EAA0BG,GAC7C,IAAM8H,GAAK9H,EAAM,GAAKA,EAAM,KAAOH,EAAO,GAAKA,EAAO,IAChDlD,EAAIqD,EAAM,GAAK8H,EAAEjI,EAAO,GAC9B,OAAO,SAACM,GAAD,OAAe2H,EAAE3H,EAAIxD,G,IAiHf6S,G,WAvGb,WAAYtY,GAGR,yBARJ8K,YAQG,OAPHyN,YAOG,OANH3P,WAMG,OALH5I,UAKG,EACDjC,KAAKiC,KAAOA,EACZjC,KAAK+M,OAAS0N,SAASzV,cAAc,UACrChF,KAAKwa,OAAS,GACdxa,KAAK6K,MAAQ,EACb7K,KAAK0a,S,mDAGA3N,GACL/M,KAAK+M,OAASA,EACd/M,KAAK0a,SACL1a,KAAK2a,U,6BAGA1Y,GACDA,GACFjC,KAAKiC,KAAL,eAAgBjC,KAAKiC,KAArB,GAA8BA,GAC9BjC,KAAK0a,WAEL1a,KAAK+M,OAAOnJ,MAAQ5D,KAAKiC,KAAKoV,EAAIrX,KAAK6K,MACvC7K,KAAK+M,OAAOxC,OAASvK,KAAKiC,KAAK6U,EAAI9W,KAAK6K,S,8BAK1C,IAAM+P,EAAM5a,KAAK+M,OAAOE,WAAW,MAC/B2N,GAAKA,EAAIC,UAAU,EAAG,EAAG7a,KAAKiC,KAAKoV,EAAGrX,KAAKiC,KAAK6U,GACpD9W,KAAKwa,OAAS,K,gCAGNja,EAAWqP,EAAWhK,GACzB5F,KAAKwa,OAAO5U,KAAQ5F,KAAKwa,OAAO5U,GAAS,IAC9C5F,KAAKwa,OAAO5U,GAAOyO,KAAK,CAAC9T,EAAGqP,M,sCAGdkL,EAAoBva,EAAoBqP,GACtD5P,KAAKwa,OAAS,GAId,IAL0E,MAE3Dxa,KAAKiC,KAAboV,EAFmE,EAEnEA,EAAGP,EAFgE,EAEhEA,EACJiE,EAAST,GAAY,CAAC,EAAGjD,GAAI9W,GAC7Bya,EAASV,GAAY,CAACxD,EAAG,GAAIlH,GAC1BvB,EAAI,EAAGA,EAAIyI,EAAGzI,IAErB,IADA,IAAMuB,EAAIoL,EAAO3M,GACR4M,EAAI,EAAGA,EAAI5D,EAAG4D,IAAK,CAC1B,IAAM1a,EAAIwa,EAAOE,GACjBjb,KAAKkb,UAAUD,EAAG5M,EAAGyM,EAAEva,EAAGqP,O,uCAKfkL,EAAoBva,EAAoBqP,EAAoBuL,GAC3E,IAAMC,EAA4B,GAC5BrV,EAAMD,KAAKC,IAAL,MAAAD,KAAI,aAAQkN,OAAOC,KAAKjT,KAAKwa,QAAQlQ,KAAI,SAAAY,GAAC,OAAKA,OAC3D,GAAInF,EAAMoV,EACRC,EAAO/G,KAAP,MAAA+G,EAAM,aAASpb,KAAKwa,OAAOzU,KAC3B/F,KAAKwa,OAAOzU,GAAO,QACd,GAAIA,EAAMoV,EACf,IAAK,IAAM5V,KAAKvF,KAAKwa,OAAQ,CACL,IAAD,EAArB,IAAKjV,EAAI4V,GACP,EAAAnb,KAAKwa,OAAOW,IAAY9G,KAAxB,qBAAgCrU,KAAKwa,OAAOjV,KAC5CvF,KAAKwa,OAAOjV,GAAK,GAIvB,GAAI6V,EAAOhH,OAAQ,CAAC,IAAD,EACFpU,KAAKiC,KAAboV,EADU,EACVA,EAAGP,EADO,EACPA,EACJiE,EAAST,GAAY,CAAC,EAAGjD,GAAI9W,GAC7Bya,EAASV,GAAY,CAACxD,EAAG,GAAIlH,GAHlB,uBAIjB,YAAqBwL,EAArB,+CAA6B,CAAC,IAAD,0BAAjB/M,EAAiB,KAAd4M,EAAc,KAC3Bjb,KAAKkb,UAAUD,EAAG5M,EAAGyM,EAAEC,EAAO1M,GAAI2M,EAAOC,MAL1B,sF,mCAURI,GACX,IAAMT,EAAM5a,KAAK+M,OAAOE,WAAW,MAKnC,IAAK,IAAMrH,KAJQ,IAAf5F,KAAK6K,OACP+P,EAAIU,aAAatb,KAAK6K,MAAO,EAAG,EAAG7K,KAAK6K,MAAO,EAAG,GAEpD+P,EAAIC,UAAU,EAAG,EAAG7a,KAAKiC,KAAKoV,EAAGrX,KAAKiC,KAAK6U,GACvB9W,KAAKwa,OAAQ,CAC/BI,EAAIW,YAD2B,2BAE/B,YAAiBvb,KAAKwa,OAAO5U,GAA7B,+CAAqC,CAAC,IAA3B4V,EAA0B,QACnCZ,EAAIlL,KAAK8L,EAAG,GAAIA,EAAG,GAAI,EAAG,IAHG,kFAK/BZ,EAAIvN,UAAYgO,GAAMzV,GACtBgV,EAAIlN,U,kCAKIrC,GAAoF,IAA1CT,EAAyC,uDAAR,OACrF,GAAe,SAAXA,EAAmB,CACrB,IAAM6Q,EAAOzI,OAAOC,KAAKjT,KAAKwa,QAAQlQ,KAAI,SAAAY,GAAC,OAAKA,KAChDN,EAAS,CAAC9E,KAAKJ,IAAL,MAAAI,KAAI,aAAQ2V,IAAO3V,KAAKC,IAAL,MAAAD,KAAI,aAAQ2V,KAE3Czb,KAAK0b,aAAarP,GAAWhB,GAAQR,MAAMD,Q,KC7GxC,SAAS+Q,KAAyE,IAA7Dpb,EAA4D,uDAA1C,GAC5C,MAAO,CAACob,SAAUpb,GAGb,SAASqb,KAAgE,IAApDrb,EAAmD,uDAA1C,GACnC,MAAO,CAACqb,SAAUrb,GCPL,gBAASsb,EAAeV,GACrC,IAAMW,EAAKD,EAAQA,EACnB,OAAO,SACLf,GAKA,IAHI,IADJiB,EACG,uDADW,CAAC3U,GAAI,EAAGC,GAAI,GAEtBL,EAAI,EACJD,EAAIgV,EACD/U,EAAImU,IACTnU,GAAK,IAEDiB,GADJlB,EAAI+T,EAAE/T,IACQ+U,MAEhB,OAAO9U,ICVJ,SAAS6M,GAAI3I,GAGO,IAAD,yDAAZ,GAFZ8Q,EAEwB,EAFxBA,KAEwB,IADxBC,aACwB,MADlB,EACkB,EACxB,OAAID,GAAU9Q,EAAI,EAGd+Q,IACQ/Q,EAAEgR,QAAQD,IAASE,WAExBjR,EAAEiR,WALA,IAAMtI,GAAI3I,EAAG,CAAC+Q,UCCzB,IAAMG,GAAmC,CACvCP,MAAO,GACPV,WAAY,IAGP,SAASkB,GAAU9b,GACxB,MAAO,CAAC8b,OAAQ,iCAAWD,GAAX,GAAmC7b,OAG9C,SAAS+b,GACZxB,GAEiD,IADjDiB,EACgD,uDADE,EAEpD,OAAW,IAAPA,EACM,CAACO,MAAO,SAACvT,GACf,IAAMwT,EAAOzB,EAAE/R,GACf,OAAO,SAACxI,EAAWqP,GACjB,OAAO4M,GAAWzT,EAAE8S,MAAO9S,EAAEoS,WAAtBqB,CAAkCD,EAAKpV,GAAQ5G,EAAGqP,QAIpD,MAAPmM,EACM,CAACO,MAAO,SAACvT,GACf,IAAMwT,EAAOzB,EAAE/R,GACf,OAAO,SAACxI,EAAWqP,GACjB,OAAO4M,GAAWzT,EAAE8S,MAAO9S,EAAEoS,WAAtBqB,CAAkCD,EAAKpV,GAAQ5G,EAAGqP,IAAKzI,GAAQ5G,EAAGqP,OAIvE,CAAC0M,MAAO,SAACvT,GACf,IAAMwT,EAAOzB,EAAE/R,GACT0T,EAAKV,EAAGhT,GACd,OAAO,SAACxI,EAAWqP,GACjB,OAAO4M,GAAWzT,EAAE8S,MAAO9S,EAAEoS,WAAtBqB,CAAkCD,EAAKpV,GAAQ5G,EAAGqP,IAAK6M,EAAGtV,GAAQ5G,EAAGqP,QAK3E,SAAS8M,GACZ5B,GAEuD,IADvDiB,EACsD,uDADN,EAElD,MAAO,CACLW,YAAa,SAAC3T,GAAD,OAAyB4T,GACpC7B,EAAE/R,GACK,IAAPgT,EAAW,IAAa,MAAPA,EAAa,OAASA,EAAGhT,GAC1CA,EAAE8S,MACF9S,EAAEoS,cAKD,SAASyB,GACd9B,GAEA,MAAQ,CAAC8B,QAAS,SAAC7T,GAAD,MAAW,CAACa,KAAMkR,EAAE/R,MAGjC,SAAS8T,GAAUjd,GAUxB,OAAO,aACL6D,MAAO7D,EAAM6D,OACV6Y,GAAM1c,EAAMkb,EAAGlb,EAAMmc,IAF1B,GAGKW,GAAY9c,EAAMkd,OAAQld,EAAMmd,SAHrC,GAIKH,GAAQhd,EAAMkd,QAJnB,GAKKT,GAAOzc,EAAMyc,QALlB,GAMKT,GAAShc,EAAMgc,UANpB,GAOKD,GAAS/b,EAAM+b,WAKf,SAASgB,GACd7B,EACAiB,EACAF,EACAV,GAWA,MAAO,CACL,CAACvR,KARD,0BACcmS,EACZ,kBACgBjB,EAAEkC,QAAQ,KAAM,OAChC,iBAIWnT,aAAa,GAC1B,qCAAsC,CAACD,KAAM,UAC7C,mBAAoB,CAACA,KAAM,KAAM,WAAY,CAACA,KAAM,OACpD,sDACA,CAACA,KAAK,WAAD,OAAaiK,GAAIgI,KACtB,yCAA0C,CAACjS,KAAMiK,GAAIsH,IACrD,gCAAiC,CAACvR,KAAM,OAASiK,GAAIsH,IAAc,KC5GhE,SAAS1X,GAASqX,GACvB,MAAQ,CAACrX,MAAO,CAAC,UAAW,CAACmG,KAAMkR,GAAI,MAGlC,SAASwB,GACdxB,GAEA,MAAQ,CAACwB,MAAO,SAACvT,GACf,IAAMwT,EAAOzB,EAAE/R,GACf,OAAO,SAACxI,EAAWqP,GACjB,OAAO4M,GAAWzT,EAAE8S,MAAO9S,EAAEoS,WAAtBqB,CAAkCD,EAAMpV,GAAQ5G,EAAGqP,OAKzD,SAAS8M,GACd5B,GAEA,OAAOmC,GAAgBnC,EAAG,KAGrB,SAASoC,GAAStd,GAQvB,OAAO,eACF6D,GAAM7D,EAAM6D,OADjB,GAEK6Y,GAAM1c,EAAMkb,GAFjB,GAGK4B,GAAY9c,EAAMkd,QAHvB,GAIKF,GAAQhd,EAAMkd,QAJnB,GAKKT,GAAOzc,EAAMyc,QALlB,GAMKT,GAAShc,EAAMgc,UANpB,GAOKD,GAAS/b,EAAM+b,WAIf,SAASwB,GAAQvd,GAMtB,OAAO,eACFsd,GAAM,CACLpC,EAAG,kBAAMlb,EAAMkb,GACfrX,MAAO7D,EAAMkd,OACbA,OAAQ,kBAAMld,EAAMkd,QACpBT,OAAQ,iBAAO,IACfT,SAAUhc,EAAMgc,SAChBD,SAAU/b,EAAM+b,YC3DjB,SAASyB,GAAMlS,GACpB,OAAOA,EAAI,IAAM,ECanB,SAASmS,GAAOtW,GACd,MAAO,CAACK,GAAItB,EAAKK,IAAIY,EAAEK,IAAKC,GAAIvB,EAAKK,IAAIY,EAAEM,KAGtC,IAAMiW,GAAeC,EAAWV,OAA0B,CAC/DpZ,MAAO,eACPqZ,OAAQ,SAAC/T,GAAD,gDAA6D8K,GAAI9K,EAAE/B,GAAnE,WACR8T,EAAG,SAAC/R,GACF,IAAM/B,EAAI+B,EAAE/B,EACZ,OAAIoW,GAAMpW,GACD,SAACiU,GACN,IAAMuC,EAAK,CAACpW,GAAI6T,EAAE7T,GAAIC,IAAK4T,EAAE5T,IAC7B,OAAO,SAACN,GAAD,OAAgBS,GAAIY,GAAOiV,GAAOtW,GAAIC,GAAIwW,KAG5C,SAACvC,GACN,IAAMuC,EAAK,CAACpW,GAAI6T,EAAE7T,GAAIC,IAAK4T,EAAE5T,IAC7B,OAAO,SAACN,GAAD,OAAgBS,GAAIU,GAASmV,GAAOtW,GAAIC,GAAIwW,MAIzDnB,OAAQ,iBAAO,CAACrV,EAAG,IACnB2U,SAAU,CACR,CACE7b,KAAM6Q,GAAY8M,OAClBha,MAAO,eACPia,MAAO,IACP/X,KAAM,EACND,IAAK,MAOU6X,EAAWV,OAA0B,CACxDpZ,MAAO,kBACPqZ,OAAQ,SAAC/T,GAAD,gDAA6D8K,GAAI9K,EAAE/B,GAAnE,WACR8T,EAAG,SAAC/R,GACF,IAAM/B,EAAI+B,EAAE/B,EACZ,OAAIoW,GAAMpW,GACD,SAACiU,GACN,IAAMuC,EAAK,CAACpW,GAAI6T,EAAE7T,GAAIC,IAAK4T,EAAE5T,IAC7B,OAAO,SAACN,GAAD,OAAgBS,GAAIY,GAAOiV,GAAOtW,GAAIC,GAAIwW,KAG5C,SAACvC,GACN,IAAMuC,EAAK,CAACpW,GAAI6T,EAAE7T,GAAIC,IAAK4T,EAAE5T,IAC7B,OAAO,SAACN,GAAD,OAAgBS,GAAIU,GAASmV,GAAOtW,GAAIC,GAAIwW,MAIzDnB,OAAQ,iBAAO,CAACrV,EAAG,IACnB2U,SAAU,CACR,CACE7b,KAAM6Q,GAAY8M,OAClBha,MAAO,eACPia,MAAO,IACP/X,KAAM,EACND,IAAK,MCzDX,SAASiY,KACP,IAAI1W,EAAQnB,EAAKG,GAAI,EAAIH,EAAKM,KAAKN,EAAKU,IAAIV,EAAKW,SAAU,KACvDX,EAAKW,SAAW,KAAKQ,EAAQ,EAAEnB,EAAKG,GAAGgB,GAC3C,IAAMC,EAAS,GAA4B,GAAtBpB,EAAKa,IAAIM,EAAQ,IAA4B,GAAhBnB,EAAKW,SAAiB,IACxE,MAAO,CACLX,EAAKY,MAAMQ,EAASpB,EAAKe,IAAII,GAAS,KAAQ,IAC9CnB,EAAKY,MAAMQ,EAASpB,EAAKa,IAAIM,GAAS,KAAQ,KAS3C,IAAM2W,GAAQ,eAChBL,EAAUL,MAAqB,CAChCzZ,MAAO,QAEPqX,EAAG,SAAC/R,GACF,IAAMyU,EAAKrW,GAAQ4B,EAAEkS,EAAE,GAAIlS,EAAEkS,EAAE,IACxBjU,EAAK+B,EAAL/B,EACP,OAAIoW,GAAMrU,EAAE/B,GACH,SAACD,GAAD,OAAgBS,GAAIY,GAAOrB,EAAGC,GAAIwW,IAElC,SAACzW,GAAD,OAAgBS,GAAIU,GAASnB,EAAGC,GAAIwW,KAI/CV,OAAQ,SAAC/T,GAAD,mBAA4B8K,GAAI9K,EAAE/B,GAAlC,YAAwC6M,GAAI9K,EAAEkS,EAAE,GAAG,CAACe,MAAK,KAAzD,OAAkEnI,GAAI9K,EAAEkS,EAAE,GAAG,CAACe,MAAK,IAAnF,MAERK,OAAQ,iBAAO,CAACrV,EAAG,EAAGiU,EAAG0C,OAEzBhC,SAAU,CACR,CACE7b,KAAM6Q,GAAYkN,KAClB/L,KAAM,SAENgM,OAAQ,iBAAO,CAAC7C,EAAG0C,QAErB,CACE7d,KAAM6Q,GAAYoN,QAClBta,MAAO,WACPia,MAAO,IACP5U,WAAY,IACZE,UAAW,IAEb,CACElJ,KAAM6Q,GAAY8M,OAClBha,MAAO,eACPia,MAAO,IACP/X,KAAM,GAER,CACE7F,KAAM6Q,GAAY8M,OAClBha,MAAO,QACPia,MAAO,QACP/X,KAAM,EACND,IAAK,IAITkW,SAAU,MAKDoC,GAAST,EAAUJ,QAAQ,CACtCL,OAAQ,cACRhC,EAAG,SAAC/T,GAAD,OAAgBS,GAAIlB,GAAI8B,GAAOrB,EAAG,IAAKI,IAAS,GAAK,OAG7C8W,GAASV,EAAUJ,QAAQ,CACtCL,OAAQ,iCACRhC,EAAG,SAAC/T,GAAD,OAAgBS,GnCmDd,SAAcT,GAEnB,OAAOO,GAAU,CACfL,MAFYnB,GAAWiB,EAAEM,GAAIN,EAAEK,IAEhB,EACfF,OAAQpB,GAAUK,GAAIY,MmCvDDH,CnC2DlB,SAAcG,GACnB,OA7DK,SAAiBU,EAAYC,GAClC,MAAO,CAACN,GAAIK,EAAEL,GAAKM,EAAGL,GAAII,EAAEJ,GAAKK,GA4D1BwW,CAAQtW,GAAKtB,GAAIS,GAAIT,GA3HrB,CAACc,KADUK,EA4HkBV,GA3HrBK,GAAIC,IAAKI,EAAEJ,MA2HgB,GA5HrC,IAAaI,EmCgEU0W,CAAKtW,GAAKd,EAAGA,KAAMI,GAAQ,IAAM,SCvElDiX,GAAUb,EAAWV,OAAqB,CACrDpZ,MAAO,gBAEPqX,EAAG,YAAwB,IAAtB9T,EAAqB,EAArBA,EACGR,EAAM4W,GAAMpW,IAAMA,EAAI,EAAIoB,GAASF,GACzC,OAAO,SAAC+S,GAEN,IAAMxT,EAAIE,GAAQsT,GAAI,GAChBvT,EAAIC,GAAQsT,GAAI,GACtB,OAAO,SAAClU,GAAD,OAAgBP,EAAIuB,GACzBP,GAAIY,GAAOrB,EAAG,GAAIU,GAClBD,GAAIM,GAASf,EAAG,GAAIW,IACnBV,MAIP8V,OAAQ,kBAAuB,yDAA2DjJ,GAAlF,EAAE7M,GAAyF,KAEnGqV,OAAQ,iBAAO,CAACrV,EAAG,IAEnB2U,SAAU,CACR,CACE7b,KAAM6Q,GAAY8M,OAClBC,MAAO,IACPja,MAAO,WACPkC,KAAM,IAER,CACE7F,KAAM6Q,GAAY8M,OAClBC,MAAO,QACPja,MAAO,QACPkC,KAAM,EACND,IAAK,MAOE2Y,GAAUd,EAAWV,OAAsB,CACtDpZ,MAAO,iBAEP4Y,OAAQ,iBAAO,CAACrV,EAAG,IAEnB8T,EAAG,YAAyB,IAAvB9T,EAAsB,EAAtBA,EACGR,EAAM4W,GAAMpW,IAAMA,EAAI,EAAIoB,GAASF,GACzC,OAAO,SAAC+S,GAEN,IAAMxT,EAAIE,GAAQsT,GAAI,GAChBvT,EAAIC,GAAQsT,GAAI,GAChBqD,EAAKxW,GAASL,EAAG,GACjB8W,EAAKzW,GAASJ,EAAG,GACjB8W,EAAK3W,GAAKJ,EAAGC,GACnB,OAAO,SAACX,GAAD,OAAgBP,EAAIuB,GACzBP,GAAIA,GAAIY,GAAOrB,EAAG,GAAIc,GAAKyW,EAAIvX,IAAKyX,GACpChX,GAAIA,GAAIM,GAASM,GAAOrB,EAAG,GAAI,GAAIc,GAAK0W,EAAIxX,IAAKY,GAAQ6W,EAAI,KAC5DxX,MAIP8V,OAAQ,kBAAyB,yGAGhBjJ,GAHT,EAAE7M,GAGgB,KAG1B2U,SAAU,CACR,CACE7b,KAAM6Q,GAAY8M,OAClBC,MAAO,IACPja,MAAO,WACPkC,KAAM,IAER,CACE7F,KAAM6Q,GAAY8M,OAClBC,MAAO,QACPja,MAAO,QACPkC,KAAM,EACND,IAAK,MC7EX,SAAS+Y,GAAGvT,GACV,OAAIA,EAAI,EAAU,EAAIA,EACbA,GAAK,GAAW,EAAGA,EAChBA,EAKd,IAAMwT,GACJ,qLAQIC,GACJ,2DAIIC,GACJ,sMAaWC,GAA4D,aACvEpb,MAAO,aAEJ8Z,EAAWjB,OACZ,gBAAEzR,EAAF,EAAEA,MAAF,OAA8B,SAACoQ,GAAD,OAAgB,SAAClU,GAC7C,IAAI+X,EAAK3X,GAAQsX,GAAG1X,EAAEK,IAAKqX,GAAG1X,EAAEM,KAC5B0X,EAAS9W,GAAK6W,GAClB,OACStX,GAAIM,GAASgX,EADlBC,EAAS,IACa,EAAElU,EACjBkU,EAAS,EACMlU,EAAMkU,EAENlU,GAJUoQ,QAR+B,GAiBpEsC,EAAWlB,QAAO,iBAAO,CAACxR,MAAO,QAjBmC,GAkBpE0S,EAAS3B,WAlB2D,CAoBvEgB,QAAS,kBAA8B,CAAC,cAAe/I,GAA9C,EAAEhJ,OAAwD,MAEnE6R,YAAa,gBAAE7R,EAAF,EAAEA,MAAOgR,EAAT,EAASA,MAAOV,EAAhB,EAAgBA,WAAhB,OACX,CAACvR,KAAM8U,GAAS7U,aAAa,GAC7B,CAACD,KAAM+U,GAAS9U,aAAa,GAC7B,CAACD,KAAMgV,GAAS/U,aAAa,IAHlB,oBAIR8S,GACD9I,GAAIhJ,GAAS,sBACb,IACAgR,EACAV,OAIDoC,EAAS5B,SAAS,CACnB,CACE7b,KAAM6Q,GAAYkN,KAClB/L,KAAM,SACNgM,OAAQ,iBA9EL,CAACjT,MAAO/E,EAAKY,MAAsB,GAAhBZ,EAAKW,UAAe,GAAK,KAgFjD,CACE3G,KAAM6Q,GAAY8M,OAClBC,MAAO,QACPja,MAAO,QACPkC,KAAM,GACND,IAAK,MAaEsZ,GAAwE,aACnFvb,MAAO,iCAEJ8Z,EAAWjB,OACZ,YAAmC,IAAjCzR,EAAgC,EAAhCA,MAAO7D,EAAyB,EAAzBA,EACDR,EAAM4W,GAAMpW,IAAMA,EAAI,EAAIoB,GAASF,GACzC,OAAO,SAAC+S,GAAD,OAAgB,SAAClU,GACtB,IAAI+X,EAAKhX,GAAStB,EAAIW,GAAQrB,EAAKK,IAAIY,EAAEK,IAAKtB,EAAKK,IAAIY,EAAEM,KAAML,GAAI,EAAE6D,GAEjEkU,EAAS9W,GADb6W,EAAK3X,GAAQsX,GAAGK,EAAG1X,IAAKqX,GAAGK,EAAGzX,MAE9B,OACSG,GAAIM,GAASgX,EADlBC,EAAS,IACa,EAAElU,EACjBkU,EAAS,EACMlU,EAAMkU,EAENlU,GAJUoQ,QAXyC,GAqBhFsC,EAAWlB,QAAO,iBAAO,CAACxR,MAAO,IAAK7D,EAAG,EAAG6U,MAAO,OArB6B,GAsBhF0B,EAAS3B,WAtBuE,CAwBnFgB,QAAS,gBAAE/R,EAAF,EAAEA,MAAM7D,EAAR,EAAQA,EAAR,MAAiC,CAAC,kBAAmB6M,GAAIhJ,GAAQ,IAAKgJ,GAAI7M,GAAI,MAEvF0V,YAAa,gBAAE7R,EAAF,EAAEA,MAAO7D,EAAT,EAASA,EAAT,EAAY6U,MAAZ,EAAmBV,WAAnB,MAAoE,CAC/E,4FACA,CACEvR,KAAK,8CAAD,OAAgDiK,GAAI7M,GAApD,mBAAiE6M,GAAIhJ,IACzEhB,aAAa,MAId0T,EAAS5B,SAAS,CACnB,CACE7b,KAAM6Q,GAAYkN,KAClB/L,KAAM,SACNgM,OAAQ,iBAAO,CAACjT,MAAO/E,EAAKY,MAAsB,IAAhBZ,EAAKW,UAAgB,IAAM,MAE/D,CACE3G,KAAM6Q,GAAY8M,OAClBC,MAAO,QACPja,MAAO,QACPkC,KAAM,IAGR,CACE7F,KAAM6Q,GAAY8M,OAClBC,MAAO,IACPja,MAAO,IACPkC,KAAM,IAGR,CACE7F,KAAM6Q,GAAY8M,OAClBC,MAAO,QACPja,MAAO,QACPkC,KAAM,GACND,IAAK,MChKEuZ,GAAa1B,EAAWV,OAAyB,CAC5DpZ,MAAO,aACPqZ,OAAQ,SAAC/T,GAAD,mBAA+B8K,GAAI9K,EAAE/B,GAArC,WACR8T,EAAG,SAAC/R,GACF,IAAM/B,EAAI+B,EAAE/B,EACZ,OAAIoW,GAAMpW,GACD,SAACiU,GAAD,OAAgB,SAAClU,GAAD,OAAgBS,GAAIY,GAAOrB,EAAGC,GAAIiU,KAElD,SAACA,GAAD,OAAgB,SAAClU,GAAD,OAAgBS,GAAIU,GAASnB,EAAGC,GAAIiU,MAG/DoB,OAAQ,iBAAO,CAACrV,EAAG,IACnB2U,SAAU,CACR,CACE7b,KAAM6Q,GAAY8M,OAClBha,MAAO,eACPia,MAAO,IACP/X,KAAM,EACND,IAAK,MCjBIwZ,GARwC,eAClDC,EADkD,GAElDC,EAFkD,GAGlDC,EAHkD,GAIlDC,EAJkD,GAKlDC,GCNL,SAASC,GAAQC,GACf,IAAMC,EAAKD,EAAIvM,SAASuM,EAAIhW,SACtBzD,EAASyZ,EAAIzZ,OACnB,MAAO,CACLvC,MAAOic,EAAGjc,MACV6Y,MAAOoD,EAAGpD,MAAMtW,GAChB4W,QAAS8C,EAAG9C,QAAQ5W,GACpB0W,YAAagD,EAAGhD,YAAY1W,GAC5B4V,SAAU8D,EAAG9D,SACbD,SAAU+D,EAAG/D,U,ICUXgE,G,2MAEJC,aAAe,SAAC5Y,GACd,OAAO,SAACzB,GACNsa,QAAQC,IAAI,WAAa9Y,EAAI,OAASzB,GACtC,EAAK3F,MAAM4F,SAAX,gBAAsBwB,EAAIzB,M,uFAINhF,GAAmB,IAClCmd,EAASnd,EAATmd,MACP,OACE,kBAAC,GAAD,CACEjY,aAAclF,EACdqF,MAAO5F,KAAKJ,MAAMoG,OAAO0X,GACzBlY,SAAUxF,KAAK4f,aAAalC,O,+CAKTnd,GAAoB,IACpCmd,EAASnd,EAATmd,MACP,OACE,kBAAC,GAAD,CACEjY,aAAclF,EACdqF,MAAO5F,KAAKJ,MAAMoG,OAAO0X,GACzBlY,SAAUxF,KAAK4f,aAAalC,O,iCAKvBnd,GAAiB,IAAD,OAClBuR,EAAevR,EAAfuR,KAAMrO,EAASlD,EAATkD,MACb,OAAIA,GAAkB,WAATqO,EAET,kBAACuB,GAAA,EAAD,CACExR,QAAQ,WACRJ,MAAM,UACNQ,KAAK,QACL6C,QAAS,kBAAM,EAAKlF,MAAM4F,SAASjF,EAAEud,WACrCiC,UAAW,kBAAC,EAAKC,OAAN,OACXzf,EAAEkD,OAGHA,GAAkB,WAATqO,EAOVrO,EAEA,kBAAC4P,GAAA,EAAD,CACExR,QAAQ,WACRI,KAAK,QACL6C,QAAS,kBAAM,EAAKlF,MAAM4F,SAASjF,EAAEud,YACrCvd,EAAEkD,YANR,EALI,kBAACoB,GAAA,EAAD,CAAYC,QAAS,kBAAM,EAAKlF,MAAM4F,SAASjF,EAAEud,YAC/C,kBAAC,EAAKkC,OAAN,S,oCAeMzf,GACZ,OAAIA,EAAET,OAAS6Q,GAAY8M,OAClBzd,KAAKigB,wBAAwB1f,GAElCA,EAAET,OAAS6Q,GAAYoN,QAClB/d,KAAKkgB,yBAAyB3f,GAEnCA,EAAET,OAAS6Q,GAAYkN,KAClB7d,KAAKmgB,WAAW5f,GAElB,O,+BAIC,IAAD,OACP,OACE,oCACGP,KAAKJ,MAAM+b,SAASrR,KAAI,SAAA/J,GAAC,OAAI,EAAK6f,cAAc7f,W,GA/E7BQ,IAAMC,WAqFnByQ,gBACb,SAAC5R,GAAD,MAAmB,CACjB8b,SAAS,aAAK6D,GAAQ3f,EAAM8S,WAAWgJ,UACvC3V,OAAO,eAAKnG,EAAM8S,UAAU3M,YAE9B,SAAC2L,GAAD,MAAyB,CACvBnM,SAAU,SAACjF,GACToR,EAASO,GAAa3R,IACtBoR,EAAS3O,SARAyO,CAWbkO,IClHalO,gBACb,SAAC5R,GAAD,MAAmB,CACjB+F,MAAO/F,EAAM8S,UAAU3M,OAAOmV,WAC9B1V,aAAc,CACZ3F,KAAM6Q,GAAY8M,OAClBC,MAAO,aACPja,MAAO,aACPkC,KAAM,EACND,IAAK,OAGT,SAACiM,GAAD,MAAyB,CACvBnM,SAAU,SAAC2V,GACTxJ,EAASO,GAAa,CAACiJ,gBACvBxJ,EAAS3O,SAdAyO,CAiBbxM,ICRawM,eACb,MACA,SAACE,GAAD,MAAyB,CACvB7M,QAAS,WACP6M,E3BEmC,CACvC7R,KCRsB,kB0BMlB6R,EAAS3O,SALAyO,EANQ,SAAC7R,GAAD,OACrB,kBAACyT,GAAA,EAAD,eAAQ0M,UAAW,kBAAC,EAAKM,SAAN,OAAsBzgB,GAAzC,e,UCSI0gB,GAAWld,aAAW,SAAC5C,GAAD,MAAmB,CAC7C4I,KAAM,CAGJxF,MAAO,OACP2c,gBAAiB/f,EAAMC,QAAQ+f,WAAWC,QAAU,SALvCrd,CAObsd,MAEEC,GAAevd,YAAW,CAC9BgG,KAAM,CACJgN,QAAS,OACTwK,SAAU,WACVC,WAAY,SAEZC,eAAgB,iBANC1d,CAQlBqB,MAGGsc,G,2MAEJC,SAAW,WACT,EAAKphB,MAAMiD,OAAOP,EAAI0W,O,wEAItB,IAAMiI,EAAajhB,KAAKJ,MAAMkD,MAAQR,EAAIuP,OAAS,GAAK,CAACuE,QAAS,QAC5D8K,EAAalhB,KAAKJ,MAAMkD,MAAQR,EAAI0P,SAAW,GAAK,CAACoE,QAAS,QAC9D+K,EAAOnhB,KAAKJ,MAAMkD,MAAQR,EAAI2P,KAAO,CAAC1E,QAAS,OAAS,CAAC6I,QAAS,QACxE,OACE,kBAACkK,GAAD,CAAUc,UAAW,GACnB,kBAACT,GAAD,CAActe,MAAO4e,GACnB,kBAAC,GAAD,OAEF,kBAACN,GAAD,CAActe,MAAO6e,GACnB,kBAACG,GAAD,CAAUnd,SAAS,UACnB,kBAAC,GAAD,CAAMiW,OAAQ,EAAGjW,SAAS,QAAQT,MAAM,SACxC,kBAAC4c,GAAD,CAAgB5e,MAAM,aAExB,kBAACkf,GAAD,CAActe,MAAO8e,GACnB,kBAACxc,GAAA,EAAD,CAAY9C,QAAQ,WAApB,2J,GArBad,IAAMC,WAgCdyQ,gBACb,SAAC5R,GAAD,MAAmB,CAACiD,IAAKjD,EAAM6R,GAAG5O,QAClC,SAAC6O,GAAD,MAAyB,CACvB9O,OAAQ,SAACC,GAAD,OAAc6O,EAAS9O,EAAOC,QAH3B2O,CAKbsP,I,oBC/CIO,G,YAMJ,WAAY1hB,GAAe,IAAD,8BACxB,4CAAMA,KANR2hB,YAK0B,IAJ1BC,eAI0B,IAF1BC,sBAE0B,IAyG1BC,cAAgB,SAACxT,GACf,GAAI,EAAKtO,MAAM+hB,WACT,EAAK5U,OAAQ,CAAC,IAAD,EACa,EAAKnN,MAAM+X,KAAhCb,EADQ,EACRA,EAAGO,EADK,EACLA,EAAGN,EADE,EACFA,IAAKlI,EADH,EACGA,GAAIC,EADP,EACOA,GADP,EAEO,EAAK/B,OAAO4C,wBAA7B/L,EAFU,EAEVA,MAAO2G,EAFG,EAEHA,OAFG,EAGU2D,EAAI2B,YAAxB+R,EAHU,EAGVA,QAASC,EAHC,EAGDA,QAEd,GAAI,EAAKjiB,MAAMkiB,UAAYtf,EAAYuf,QAAS,CAC9C,IAAMC,EAAKpe,EAAQyT,EACb4K,EAAK1X,EAASuM,EACpB,GAAImL,EAAKD,EAAI,CACX,IAAME,EAASpL,EAAIkL,EACnBH,IAAYtX,EAAS2X,GAAU,EAC/B3X,EAAS2X,OACJ,GAAIF,EAAKC,EAAI,CAClB,IAAME,EAAS9K,EAAI4K,EACnBL,IAAYhe,EAAQue,GAAU,EAC9Bve,EAAQue,GAIZ,IAEMC,GAFUtc,KAAKY,MAAOkb,EAAUhe,EAASyT,GAExBA,EAAI,GAAMN,EAC3BsL,GAFUvc,KAAKY,MAAOmb,EAAUtX,EAAUuM,GAEzBA,EAAI,GAAMC,EACjC,EAAKnX,MAAM+hB,UAAU9S,EAAKuT,EAAItT,EAAKuT,KAhIvC,EAAKd,OAAS,IAAIhH,GAAa,CAAClD,EAAG,EAAKzX,MAAM+X,KAAKN,EAAGP,EAAG,EAAKlX,MAAM+X,KAAKb,IACzE,EAAK0K,UAAYzgB,IAAMyI,YACvB,EAAKiY,kBAAmB,EAJA,E,sEAYxBzhB,KAAKuhB,OAAO7G,OAAO1a,KAAK2X,U,6BAIxB,OAAI3X,KAAKyhB,iBACAzhB,KAAKJ,MAAM+X,KAEX,eAAI3X,KAAKJ,MAAM+X,KAAtB,GA0KN,YAKI,IALgBN,EAKjB,EALiBA,EAAGP,EAKpB,EALoBA,EAAGC,EAKvB,EALuBA,IAAKU,EAK5B,EAL4BA,cAMvB6K,EAAajL,EAAIP,EACjBqD,EAASrU,KAAKJ,IAAI,EAAGI,KAAKc,KAAK6Q,EAAgB6K,IAMrD,MALe,CACbjL,EAAGvR,KAAKY,MAAM2Q,EAAI8C,GAClBrD,EAAGhR,KAAKY,MAAMoQ,EAAIqD,GAClBpD,IAAKjR,KAAKY,MAAMqQ,EAAMoD,IArLWoI,CAAUviB,KAAKJ,MAAM+X,S,uCAItC,IACThF,EAAa3S,KAAKJ,MAAlB+S,UACDgF,EAAO3X,KAAK2X,OACZmD,EAAI0E,GAAQ7M,GAAW2J,MACvBkG,EAAK7K,EAAKN,EAAIM,EAAKZ,IAAM,EACzB0L,EAAK9K,EAAKb,EAAIa,EAAKZ,IAAM,EAC/B/W,KAAKuhB,OAAOmB,gBACV5H,EACA,CAACnD,EAAK9I,GAAK2T,EAAI7K,EAAK9I,GAAK2T,GACzB,CAAC7K,EAAK7I,GAAK2T,EAAI9K,EAAK7I,GAAK2T,M,yCAIT,IACXtH,EAAcnb,KAAKJ,MAAM+S,UAAU3M,OAAnCmV,WACAxI,EAAa3S,KAAKJ,MAAlB+S,UACDgF,EAAO3X,KAAK2X,OACZmD,EAAI0E,GAAQ7M,GAAW2J,MACvBkG,EAAK7K,EAAKN,EAAIM,EAAKZ,IAAM,EACzB0L,EAAK9K,EAAKb,EAAIa,EAAKZ,IAAM,EAC3BoE,GACFnb,KAAKuhB,OAAOoB,iBACV7H,EACA,CAACnD,EAAK9I,GAAK2T,EAAI7K,EAAK9I,GAAK2T,GACzB,CAAC7K,EAAK7I,GAAK2T,EAAI9K,EAAK7I,GAAK2T,GACzBtH,K,oCAMJ,GAAInb,KAAKJ,MAAM6B,MAAM8T,cACnBvV,KAAKuhB,OAAOqB,YAAY5iB,KAAKJ,MAAM6B,WAC9B,CAAC,IACC0Z,EAAcnb,KAAKJ,MAAM+S,UAAU3M,OAAnCmV,WACPnb,KAAKuhB,OAAOqB,YAAY5iB,KAAKJ,MAAM6B,MAAO,CAAC,EAAG0Z,O,6BAKhDnb,KAAK0a,SACL1a,KAAK6iB,iBACL7iB,KAAK8iB,cACL9iB,KAAKJ,MAAMmjB,kB,kCAIX/iB,KAAK2iB,mBACL3iB,KAAK8iB,cACL9iB,KAAKJ,MAAMmjB,kB,gCAIX/iB,KAAK8iB,cACL9iB,KAAKJ,MAAMmjB,kB,0CAIP/iB,KAAK+M,SACP/M,KAAKuhB,OAAOyB,OAAOhjB,KAAK+M,QACxB/M,KAAKyhB,kBAAmB,EACxBzhB,KAAKijB,U,2CAKHjjB,KAAKJ,MAAMsjB,eAAiBzgB,EAAaU,MAC3CnD,KAAKyhB,kBAAmB,EACxBzhB,KAAKijB,QAEEjjB,KAAKJ,MAAMsjB,eAAiBzgB,EAAaS,oBAChDlD,KAAKyhB,kBAAmB,EACxBzhB,KAAKijB,QAEEjjB,KAAKJ,MAAMsjB,eAAiBzgB,EAAa0gB,QAChDnjB,KAAK2iB,mBAEE3iB,KAAKJ,MAAMsjB,eAAiBzgB,EAAakU,OAChD3W,KAAKojB,Y,+BAmCP,IACIC,EADEC,EAAe,CAACna,KAAOoa,OAE7B,OAAQvjB,KAAKJ,MAAMkiB,SACjB,KAAKtf,EAAYuf,QACfsB,EAAY,UACZC,EAAajP,KAAKlL,KAAOqa,SACzB,MACF,KAAKhhB,EAAYihB,MACfJ,EAAY,QACZC,EAAajP,KAAKlL,KAAOqa,SAO7B,OAHIxjB,KAAKyhB,kBACP6B,EAAajP,KAAKlL,KAAOyQ,gBAGzB,kBAACnV,GAAA,EAAD,CAAKoO,EAAG,EAAGnO,UAAW4e,EAAajT,KAAK,MACtC,yBAAK3L,UAAWyE,KAAOua,OACrB,4BACEhf,UAAWyE,KAAOmY,OAClB/X,IAAKvJ,KAAKwhB,UACVpT,cAAepO,KAAK0hB,cACpBrf,MAAO,CAACghB,mB,6BAvJhB,OAAOrjB,KAAKwhB,UAAU/X,Y,GAdL1I,IAAMC,WC3BZsgB,ODyMA7P,aACb,SAAC5R,GAAD,MAAsB,CACpB8S,UAAU,eAAK9S,EAAM8S,WACrBlR,MAAO5B,EAAM4B,MACbyhB,aAAcrjB,EAAM6R,GAAGwR,aACvBvL,KAAK,eAAK9X,EAAM8X,MAChBmK,QAASjiB,EAAM6R,GAAGiS,kBAEpB,SAAChS,GAAD,MAAyB,CACvBgQ,UAAW,SAACphB,EAAWqP,GACrB+B,E7B5L2D,CAC/D7R,KCVwB,kBDWxB8C,QAAS,CAACiM,G6B0LatO,E7B1LTuO,G6B0LYc,KACtB+B,EAAS5O,EAAgBN,EAAaU,QAExC4f,cAAe,kBAAMpR,EAAS5O,EAAgBN,EAAauW,WAbhDvH,CAeb6P,IErNIsC,GAAQxgB,YAAW,CACvBgG,KAAM,CACJ7F,SAAU,WACVsgB,SAAU,SACVzN,QAAS,OACTiC,cAAe,iBACfyL,SAAU,EACVjK,WAAY,SAPFzW,CASXqB,MAQYsf,GANC,kBACd,kBAACH,GAAD,KACE,kBAAC,GAAD,QCgBWnS,gBACb,SAAC5R,GAAD,MAAsB,CAACiiB,QAASjiB,EAAM6R,GAAGiS,kBACzC,SAAChS,GAAD,MAAoB,CAClBqS,WAAY,SAACC,GAAD,OAAuBtS,ErDf0B,CAC/D7R,KDtByB,iBCuBzB8C,QqDayDqhB,QAH5CxS,EArBO,SAAC,GAA4D,IAA3DqQ,EAA0D,EAA1DA,QAASkC,EAAiD,EAAjDA,WAAiD,IAArCC,YAAqC,MAAhCzhB,EAAYuf,QAAoB,EAMhF,OACE,kBAAC/L,GAAA,EAAD,CACEvS,MAAM,MACNygB,eAAe,MACfjO,QACE,kBAACC,GAAA,EAAD,CACEd,QAAS0M,IAAYmC,EACrBze,SAXS,SAAC0I,GACZA,EAAI4C,OAAOsE,QAAS4O,EAAWC,GAC9BD,EAAWxhB,EAAYwW,c,UCF1BmL,GAAc/gB,YAAW,CAC7BK,MAAO,CAAC2gB,cAAe,SADLhhB,CAEjBiQ,MAUUgR,GAAa5S,aACxB,SAAC5R,GAAqB,IACb+c,EAAW4C,GAAQ3f,EAAM8S,WAAzBiK,QACP,MAAO,CACL7X,SAAUlF,EAAM6R,GAAG/O,QAAUJ,EAAM+hB,KACnC1H,cAGJ,SAACjL,GAAD,MAAyB,CACvB7M,QAAS,kBAAM6M,EAASjP,EAASH,EAAM+hB,WATjB7S,EARN,SAAC,GAAD,IAAEmL,EAAF,EAAEA,QAAYpY,EAAd,mCAGlB,kBAAC2f,GAAgB3f,EACf,kBAAC,GAAD,CAAcyF,KAAM2S,QA2BxB,SAAS2H,GAAQrZ,GAAwB,wDAAC,IAClCzD,EAAIyD,EAAEsZ,YAAY,GAClB9c,EAAID,EAAEgd,MAAM,KAClB,OAAiB,IAAb/c,EAAE0M,OACG3M,EAEAC,EAAE,GAAK,eAAiBA,EAAE,GAAK,IAgB1C,IA2De+J,gBACb,SAAC5R,GAAqB,IAAD,EACSA,EAAM8X,KAA3B9I,EADY,EACZA,GAAIC,EADQ,EACRA,GAAIiI,EADI,EACJA,IACTyL,EAFa,EACCnL,EACPN,EAAI,EAAG0L,EAFD,EACI3L,EACIC,EAAI,EAC/B,MAAO,CACL2N,QAAS7kB,EAAM6R,GAAG/O,QAAUJ,EAAM+hB,KAClCzV,GAAIA,EACJC,GAAIA,EACJ0T,GAAIA,EACJC,GAAIA,EACJ9P,UAAW9S,EAAM8S,cAGrB,SAAChB,GAAD,MAAyB,CACvBc,QAAS,kBAAMd,EAASjP,EAASH,EAAMyW,WAd5BvH,EA3DK,SAAC7R,GAAkB,IAG/B+kB,EAAcnF,GADA5f,EAAb+S,WACgC+J,YAEjChW,EAhCR,SAAiBqC,GACf,IAAMf,EAAIlC,KAAKU,IAAI,GAAIuC,GACvB,OAAO,SAACmC,GAAD,OAAepF,KAAKY,MAAMwE,EAAIlD,GAAKA,GA8B5B4c,CAAQ,EAAE9e,KAAKS,MAAMT,KAAK+e,MAAMjlB,EAAM4iB,MAQ9CsC,EAAU,SANLpe,EAAM9G,EAAMiP,IAOjBkW,EAAU,SANLre,EAAM9G,EAAMkP,IAOjBkW,EAAU,mBALLT,GAAQze,KAAKK,IAAIvG,EAAM4iB,KAM5ByC,EAAU,mBALLV,GAAQze,KAAKK,IAAIvG,EAAM6iB,KAyBlC,OACE,kBAACjM,GAAA,EAAD,CACE0O,WAAY,CAACC,QAAQ,GACrB1O,KAAM7W,EAAM8kB,QACZjS,QAAS7S,EAAM6S,QACf2S,SAAUxlB,EAAMwlB,UAEhB,kBAAC3gB,GAAA,EAAD,CAAKsE,EAAG,IAAKjE,QAASlF,EAAM6S,SAC1B,kBAAC,GAAD,CAAcxI,KAAM0a,IACpB,kBAAChgB,GAAA,EAAD,CAAYtC,MAAO,CAACgjB,UAAW,QAA/B,kEAEK,kBAAC,GAAD,CAAOzb,KAAK,eAFjB,WAIA,kBAAC,GAAD,CAAOA,KAAMkb,EAAU,gBAAkBC,EAASlb,aAAa,IAC/D,kBAAClF,GAAA,EAAD,yBACmB,kBAAC,GAAD,CAAOiF,KAAK,WAD/B,cAGA,kBAAC,GAAD,CAAOA,KAAMob,EAAU,gBAAkBC,EAASpb,aAAa,SChHjEpF,GAAMrB,YAAW,CACrBgG,KAAM,CACJgN,QAAS,OACTyK,WAAY,SACZC,eAAgB,gBAChBwE,IAAK,MACLC,YAAa,MACbC,aAAc,QAPNpiB,CASTqiB,MAEGC,GAAStiB,aAAW,SAAA5C,GAAK,MAAK,CAClC4I,KAAM,CACJmX,gBAAiB/f,EAAMC,QAAQ+f,WAAWC,QAAU,SAFzCrd,CAIXuiB,MAiBWlU,gBACb,SAAC5R,GAAD,MAAmB,CACjB+lB,YAAa/lB,EAAM6R,GAAG/O,QAAUJ,EAAMuS,SAExC,SAACnD,GAAD,MAAyB,CACvB6G,SAAU,kBAAM7G,EAASjP,EAASH,EAAMuS,WAL7BrD,EAfA,SAAC7R,GAAD,OAIb,kBAAC,GAAD,CAAQ6B,MAAM,eACZ,kBAAC,GAAD,KACE,kBAACoD,GAAA,EAAD,CAAYC,QAASlF,EAAM4Y,UACzB,kBAAC,EAAK1D,KAAN,OAEF,kBAACuP,GAAD,CAAYxiB,QAAQ,OAAOK,WAAS,IACpC,kBAAC,GAAD,W,qBCtBA2jB,GAAgBziB,YAAW,CAC/BgG,KAAM,CACJmB,OAAQ,OACR3G,MAAO,OACPwS,QAAS,OACTiC,cAAe,mBALGjV,CAOnBqB,MAEGqhB,GAAW1iB,YAAW,CAC1BgG,KAAM,CACJ7F,SAAU,WACVsgB,SAAU,SACVzN,QAAS,OACTiC,cAAe,iBACfyL,SAAU,IANG1gB,CAQdqB,MAEGshB,G,iLAIF,OACE,yBAAKrhB,UAAWyE,KAAO4c,KACrB,kBAAC,GAAD,MACA,kBAACzB,GAAD,MACA,kBAAC0B,GAAD,MACA,kBAACH,GAAD,KACE,kBAAC,GAAD,MACE,kBAAC,GAAD,MACF,kBAACC,GAAD,KACE,kBAAC,GAAD,a,GAbM/kB,IAAMC,WAqBTyQ,gBACb,SAAC5R,GAAD,MAAmB,CAACiD,IAAKjD,EAAM6R,GAAG5O,OADrB2O,CAEbsU,IClDmBE,G,iLACT,IACAC,EAAUlmB,KAAKJ,MAAfsmB,MACR,OACE,kBAAC,IAAD,CAAUA,MAAOA,GACf,kBAAC,EAAD,KACE,kBAAC,GAAD,Y,GANwBnlB,IAAMC,W,SCK3ByK,GAAyB,CACpCI,aACAC,WACAC,YACAG,aACAR,UACAS,UACAH,aACAC,cACAN,eACAC,YAWaQ,GALc,eACxBX,GADwB,GAHY,ICrBzC,IAAM0a,GAAsB,CAC1B7Z,OAAQ,UACR3B,SAAS,EACT4K,eAAe,EACf7K,KAAM,EACNqL,WAAY/C,OAAOC,KAAKxG,IAAc0G,OACtC5G,cAAe,CACb,KAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,WACrD,IAAO,CAAC,UAAW,aCLjB4Z,GAAsB,CAE1BtX,GAAI,EAAGC,GAAI,EAAGiI,IAAK,IACnBM,EAAG,KAAMP,EAAG,KACZW,cAAe,KAGjB,SAAS2O,GAAT,GAAmD,IAAhC/O,EAA+B,EAA/BA,EAAGP,EAA4B,EAA5BA,EACpB,MAAO,CAACjI,GAAI,EAAGC,GAAI,EAAGiI,IAAKjR,KAAKY,MAAMZ,KAAKJ,IAAIoR,EAAEO,GAAG,IAGvC,ICdTgP,GAAO,WAGPF,GAAsB,CAC1B1c,QAAS4c,GACTrgB,OAAQkZ,GAAYmH,IAAMhK,SAC1BiK,cAAe,CAACzK,MAAO,GAAIV,WAAY,IACvCjI,SAAUgM,GACVqH,cAAerH,GAAYmH,IAAM1K,UCD7BwK,GAAe,CACnBxC,cAAenhB,EAAYuf,QAC3Bpf,MAAOJ,EAAMyW,KACblW,IAAKR,EAAI0P,SACTkR,aAAczgB,EAAauW,MCbdwN,gBAAgB,CAC7B7T,UFaa,WAAqD,IAA5C9S,EAA2C,uDAA9BsmB,GAAcM,EAAgB,uCACjE,OAAQA,EAAO3mB,MACb,I3CZuB,wB2CarB,YAA8B+F,IAA1B4gB,EAAO7jB,QAAQoD,OACV,eACFnG,EADL,CAEE4J,QAASgd,EAAO7jB,QAAQ6G,QACxBzD,OAAQnG,EAAMqT,SAASuT,EAAO7jB,QAAQ6G,SAAS4S,SAC/CkK,cAAe1mB,EAAMqT,SAASuT,EAAO7jB,QAAQ6G,SAASkS,WAGjD,eACF9b,EADL,CAEE4J,QAASgd,EAAO7jB,QAAQ6G,QACxBzD,OAAQygB,EAAO7jB,QAAQoD,OACvBugB,cAAe1mB,EAAMqT,SAASuT,EAAO7jB,QAAQ6G,SAASkS,WAG5D,I3C3ByB,0B2C4BvB,OAAO,eAAI9b,EAAX,CAAkBmG,OAAO,eAAKnG,EAAMmG,OAAZ,GAAuBygB,EAAO7jB,WACxD,QACE,OAAO/C,IEjCX4B,MJYa,WAAqD,IAA5C5B,EAA2C,uDAA9BsmB,GAAcM,EAAgB,uCACjE,OAAOA,EAAO3mB,MACZ,IhCrBkB,egCsBhB,OAAO,eAAID,EAAX,GAAqB4mB,EAAO7jB,SAC9B,IhCxBsB,mBgCyBpB,OAAO,eACF/C,EADL,CAEE0M,cAAc,eACT1M,EAAM0M,cADE,gBAEVka,EAAO7jB,QAAQ4Q,KAAOiT,EAAO7jB,QAAQyI,WAG5C,QACE,OAAOxL,IIxBX8X,KHaa,WAAqF,IAA5E9X,EAA2E,sEAA1DsmB,GAA0D,GAAzCC,GAASD,KAAgBM,EAAgB,uCACjG,OAAOA,EAAO3mB,MACZ,ItCZkB,csCahB,OAAO,eAAID,EAAX,GAAqB4mB,EAAO7jB,SAC9B,ItCXoB,gBsCYlB,OAAO,eAAI/C,EAAX,GAAqBumB,GAASvmB,IAChC,ItCXsB,kBsCYpB,OAAO,eAAIA,EAAX,CAAkBgP,GAAI4X,EAAO7jB,QAAQiM,GAAIC,GAAI2X,EAAO7jB,QAAQkM,KAC9D,ItCdoB,gBsCelB,OAAO,eAAIjP,EAAX,CAAkBwX,EAAGoP,EAAO7jB,QAAQyU,EAAGP,EAAG2P,EAAO7jB,QAAQkU,IAC3D,ItCnBmB,esCoBjB,OAAO,eAAIjX,EAAX,CAAkBkX,IAAKlX,EAAMkX,IAAM0P,EAAO7jB,UAC5C,ItCpBoB,gBsCqBlB,OAAO,eAAI/C,EAAX,CAAkBkX,IAAKjR,KAAKY,MAAM7G,EAAMkX,IAAM0P,EAAO7jB,WACvD,QACE,OAAO/C,IG3BX6R,GDYa,WAAqD,IAA5C7R,EAA2C,uDAA9BsmB,GAAcM,EAAgB,uCACjE,OAAOA,EAAO3mB,MACZ,I/DpBkB,Y+DqBhB,OAAO,eAAID,EAAX,GAAqB4mB,EAAO7jB,SAC9B,I/DzBmB,a+D0BjB,OAAO,eAAI/C,EAAX,CAAkBiD,IAAK2jB,EAAO7jB,UAChC,I/D5BqB,e+D6BnB,OAAO,eAAI/C,EAAX,CAAkB8C,MAAO8jB,EAAO7jB,UAClC,I/D5BuB,iB+D6BrB,OAAO,eAAI/C,EAAX,CAAkB8jB,cAAe8C,EAAO7jB,UAC1C,I/D7B6B,gB+D8B3B,OAAO,eAAI/C,EAAX,CAAkBqjB,aAAcuD,EAAO7jB,UACzC,QACE,OAAO/C,MEhCE6mB,gBAAYC,ICSrBC,I,OAAcC,QACW,cAA7B1mB,OAAO2mB,SAASC,UAEe,UAA7B5mB,OAAO2mB,SAASC,UAEhB5mB,OAAO2mB,SAASC,SAASC,MACvB,4DA8CN,SAASC,GAAgBC,EAAeC,GACtCC,UAAUC,cACPC,SAASJ,GACTK,MAAK,SAAAC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB7nB,QACfunB,UAAUC,cAAcQ,YAI1BhI,QAAQC,IACN,iHAKEqH,GAAUA,EAAOW,UACnBX,EAAOW,SAASN,KAMlB3H,QAAQC,IAAI,sCAGRqH,GAAUA,EAAOY,WACnBZ,EAAOY,UAAUP,WAO5BQ,OAAM,SAAAC,GACLpI,QAAQoI,MAAM,4CAA6CA,MCjGjEC,IAASve,OAAO,kBAAC,GAAD,CAAMuc,MAAOA,KAAWzL,SAAS0N,eAAe,SDoBzD,SAAkBhB,GACvB,GAA6C,kBAAmBC,UAAW,CAMzE,GAJkB,IAAIgB,IACpBC,oBACAloB,OAAO2mB,SAASwB,MAEJC,SAAWpoB,OAAO2mB,SAASyB,OAIvC,OAGFpoB,OAAOqoB,iBAAiB,QAAQ,WAC9B,IAAMtB,EAAK,UAAMmB,oBAAN,sBAEPzB,KAgEV,SAAiCM,EAAeC,GAE9CsB,MAAMvB,EAAO,CACXwB,QAAS,CAAE,iBAAkB,YAE5BnB,MAAK,SAAAoB,GAEJ,IAAMC,EAAcD,EAASD,QAAQG,IAAI,gBAEnB,MAApBF,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAYG,QAAQ,cAG5C3B,UAAUC,cAAc2B,MAAMzB,MAAK,SAAAC,GACjCA,EAAayB,aAAa1B,MAAK,WAC7BpnB,OAAO2mB,SAASoC,eAKpBjC,GAAgBC,EAAOC,MAG1Ba,OAAM,WACLnI,QAAQC,IACN,oEAvFAqJ,CAAwBjC,EAAOC,GAI/BC,UAAUC,cAAc2B,MAAMzB,MAAK,WACjC1H,QAAQC,IACN,iHAMJmH,GAAgBC,EAAOC,OC7C/BE,I,mBCZA5nB,EAAOC,QAAU,CAAC,MAAQ,sBAAsB,MAAQ,sBAAsB,OAAS,uBAAuB,QAAU,wBAAwB,eAAiB,kC","file":"static/js/main.b1051033.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1IQbR\",\"SettingsDrawer\":\"App_SettingsDrawer__20WS9\",\"SettingsMenu\":\"App_SettingsMenu__2rwrn\",\"KatexButton\":\"App_KatexButton__2A4iT\"};","import React from 'react';\nimport {\n  ThemeProvider as Provider, \n  createMuiTheme, \n} from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {amber, pink, blue, lightGreen} from '@material-ui/core/colors';\n\n\ntype Props = {\n  type: 'light' | 'dark' | 'detect'\n  lightPalette?: any\n  darkPalette?: any\n  theme: any\n}\n\nclass Theme extends React.Component<Props> {\n  state: {type: 'light' | 'dark'}\n\n  static defaultProps = {\n    type: 'detect',\n\n    lightPalette: {\n      primary: blue,\n      secondary: pink,\n    },\n\n    darkPalette: {\n      primary: lightGreen,\n      secondary: amber,\n    },\n\n    theme: {\n      props: {\n        MuiAppBar: {color: 'inherit'},\n        MuiBackdrop: {\n          invisible: true\n        },\n        MuiButton: {\n          variant: 'outlined',\n          color: 'primary',\n        },\n        MuiButtonGroup: {\n          variant: 'outlined',\n          color: 'inherit',\n        },\n        MuiIconButton: {color: 'inherit'},\n        MuiTextField: {\n          variant: 'outlined',\n          size: 'small',\n          fullWidth: true,\n          margin: 'normal',\n        },\n        MuiTypography: {color: 'inherit'},\n      },\n      style: {\n        MuiButton: {\n          margin: '0.5em',\n        },\n      }\n    }\n  }\n\n  constructor(props: React.PropsWithChildren<Props>) {\n    super(props);\n    this.state = {\n      type: this.props.type === 'detect' ? 'light' : this.props.type\n    }\n  }\n\n  setDark(dark: boolean) {\n    this.setState({type: dark ? 'dark' : 'light'})\n  }\n\n  componentDidMount() {\n    if (this.props.type === 'detect') {\n      this.setDark(window.matchMedia(\"(prefers-color-scheme:dark)\").matches)\n      window.matchMedia(\"(prefers-color-scheme:dark)\").addListener(x => {\n        this.setDark(x.matches)\n      })\n    }\n  }\n\n  render() {\n    const theme = {\n      ...this.props.theme,\n      palette: {\n        ...this.props.theme.palette,\n        ...this.state,\n        ...(this.state.type === 'dark' ? this.props.darkPalette : this.props.lightPalette)\n      }\n    }\n    return (\n      <Provider theme={createMuiTheme(theme)}>\n        <CssBaseline/>\n        {this.props.children}\n      </Provider>\n    )\n  }\n}\n\nexport default Theme;","export const SET_MODAL = 'UI_SET_MODAL'\nexport const SET_NAV = 'UI_SET_NAV'\nexport const SET_STRETCH = 'UI_SET_STRETCH'\nexport const SET_CANVAS_ACTION = 'UI_SET_ACTION'\nexport const UPDATE = 'UI_UPDATE'\n\n\n\nexport enum Nav {\n  None,\n  Params,\n  Navigate,\n  Help,\n}\n\nexport enum Modal {\n  None,\n  Menu,\n  Info,\n  FullResolution,\n}\n\nexport enum StretchMode {\n  None,\n  Contain,\n  Cover,\n}\n\nexport enum CanvasAction {\n  None,\n  Draw,\n  DrawFullResolution,\n  Color,\n  Iterate,\n}\n\nexport type ParamControl = {\n  label: string\n  param: string\n}\n\nexport interface State {\n  canvasStretch: StretchMode\n  nav: Nav\n  modal: Modal\n  canvasAction: CanvasAction\n}\n\nexport type Update = {\n  type: typeof UPDATE\n  payload: Partial<State>\n}\n\nexport type SetModal = {\n  type: typeof SET_MODAL\n  payload: Modal\n}\n\nexport type SetNav = {\n  type: typeof SET_NAV\n  payload: Nav\n}\n\nexport type SetStretch = {\n  type: typeof SET_STRETCH\n  payload: StretchMode\n}\n\nexport type SetCanvasAction = {\n  type: typeof SET_CANVAS_ACTION\n  payload: CanvasAction\n}\n\nexport type Action = Update | SetModal | SetNav | SetStretch | SetCanvasAction","import {\n  State,\n  SetStretch,\n  StretchMode,\n  SET_STRETCH,\n  SetModal,\n  SET_MODAL,\n  SetNav,\n  SET_NAV,\n  Modal,\n  Nav,\n  CanvasAction,\n  SetCanvasAction,\n  SET_CANVAS_ACTION,\n  Update,\n  UPDATE,\n} from './types'\n\nexport const update = (x: Partial<State>): Update => ({\n  type: UPDATE,\n  payload: x\n})\n\nexport const setStretch = (stretch: StretchMode): SetStretch => ({\n  type: SET_STRETCH,\n  payload: stretch\n})\n\nexport const setModal = (modal: Modal): SetModal => ({\n  type: SET_MODAL,\n  payload: modal\n})\n\nexport const setNav = (nav: Nav): SetNav => ({\n  type: SET_NAV,\n  payload: nav\n})\n\nexport const setCanvasAction = (x: CanvasAction): SetCanvasAction => ({\n  type: SET_CANVAS_ACTION,\n  payload: x,\n})\n\nexport const startDrawing = (fullResolution: boolean=false): SetCanvasAction => {\n  if (fullResolution) {\n    return ({\n      type: SET_CANVAS_ACTION,\n      payload: CanvasAction.DrawFullResolution\n    })\n  } else {\n    return ({\n      type: SET_CANVAS_ACTION,\n      payload: CanvasAction.Draw\n    })\n  }\n}\n\nexport const startIterating = (): SetCanvasAction => ({\n  type: SET_CANVAS_ACTION,\n  payload: CanvasAction.Iterate,\n})\n\nexport const startColoring = (): SetCanvasAction => ({\n  type: SET_CANVAS_ACTION,\n  payload: CanvasAction.Color\n})\n","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport ButtonGroup, { ButtonGroupProps } from '@material-ui/core/ButtonGroup';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport * as Icon from './icons'\n\n\nconst styles = ({palette}: Theme) => createStyles({\n  container: {\n    position: 'relative',\n    marginBottom: '5px',\n  },\n  label: {\n    textAlign: 'center',\n    position: 'absolute',\n    bottom: '-5px',\n    width: '100%',\n    userSelect: 'none',\n    color: palette.text.secondary,\n  },\n});\n\n\nexport interface DownUpButtonsProps extends WithStyles<typeof styles>, Omit<ButtonGroupProps, 'classes'> {\n  [k: string]: any\n  onUp?: () => void\n  onDown?: () => void\n  disableUp?: boolean\n  disableDown?: boolean\n  label?: string\n  fontSize?: \"small\" | \"default\" | \"large\" | \"inherit\"\n  iconDown?: typeof SvgIcon\n  iconUp?: typeof SvgIcon\n}\n\n\nconst DownUpButtons = ({label, classes, onUp, onDown, fontSize, \n  disableUp, disableDown, downIcon=Icon.Minus, upIcon=Icon.Plus,\n  ...rest\n}: DownUpButtonsProps) => (\n\n  <Box className={classes.container}>\n      {label ? (\n        <Typography variant=\"caption\" className={classes.label}>\n          {label}\n        </Typography>\n      ) : null}\n    <ButtonGroup {...rest}>\n      <IconButton\n        onClick={onDown}\n        disabled={disableDown}\n      >{React.createElement(downIcon, {fontSize})}</IconButton> \n      <IconButton\n        onClick={onUp}\n        disabled={disableUp}\n      >{React.createElement(upIcon, {fontSize})}</IconButton>\n    </ButtonGroup>\n  </Box>\n)\n\nexport default withStyles(styles)(DownUpButtons)","import React from 'react';\nimport { ControlNumber } from '../fractals/types'\nimport DownUpButtons, { DownUpButtonsProps } from './DownUpButtons';\n\n\ninterface NewProps {\n  controlProps: ControlNumber\n  value: number\n  onChange: (x: number) => void\n}\n\ninterface Props extends NewProps, Omit<DownUpButtonsProps, 'label' | 'onDown' | 'onUp'> {}\n\nclass NumberIncrementer extends React.Component<Props> {\n\n  setValue(v: number) {\n    this.props.onChange(v)\n  }\n\n  incrementDown() {\n    const {min, step} = this.props.controlProps;\n    const v = this.props.value - step;\n    if (min !== undefined) {\n      return Math.max(min, v)\n    }\n    return v;\n  }\n\n  incrementUp() {\n    const {max, step} = this.props.controlProps;\n    const v = this.props.value + step;\n    if (max !== undefined) {\n      return Math.min(max, v)\n    }\n    return v;\n  }\n\n  onClickDown = () => {\n    this.setValue(this.incrementDown())\n  }\n\n  onClickUp = () => {\n    this.setValue(this.incrementUp())\n  }\n\n\n  render() {\n    const {controlProps, params, onChange, ...rest} = this.props;\n    return (\n      <DownUpButtons\n        {...rest}\n        label={controlProps.label}\n        onDown={this.onClickDown}\n        onUp={this.onClickUp}\n      />\n    )\n  }\n}\n\nexport default NumberIncrementer\n","// Constants\nconst PI = Math.PI\nconst TAU = 2*PI\n\n// Functions\nconst abs = Math.abs\nconst asin = Math.asin\nconst atan2 = Math.atan2\nconst exp = Math.exp\nconst floor = Math.floor\nconst pow = Math.pow\nconst random = Math.random\nconst round = Math.round\nconst sin = Math.sin\nconst sqrt = Math.sqrt\nconst cos = Math.cos\n\nexport {\n  PI,\n  TAU,\n\n  abs,\n  asin,\n  atan2,\n  cos,\n  exp,\n  floor,\n  pow,\n  random,\n  round,\n  sin,\n  sqrt,\n}\n","import { Complex, Polar } from './types';\nimport * as Math from './real';\n\n\nexport function polar(angle: number, radius: number): Polar {\n  return {angle, radius};\n}\n\nexport function fromComplex({re, im}: Complex): Polar {\n  return {\n    angle: Math.atan2(im, re),\n    radius: Math.sqrt(re*re + im*im),\n  };\n}\n\nexport function toComplex(z: Polar): Complex {\n  return {\n    re: z.radius * Math.cos(z.angle),\n    im: z.radius * Math.sin(z.angle),\n  };\n}\n\nexport function neg(z: Polar): Polar {\n  return {\n    angle: z.angle,\n    radius: -z.radius,\n  };\n}\n\nexport function mult(a: Polar, b: Polar): Polar {\n  return {\n    angle: a.angle + b.angle,\n    radius: a.radius * b.radius,\n  };\n}\n\nexport function multReal(a: Polar, b: number): Polar {\n  return {angle: a.angle, radius: b* a.radius}\n}\n\nexport function div(a: Polar, b: Polar): Polar {\n  return {\n    angle: a.angle - b.angle,\n    radius: a.radius / b.radius,\n  };\n}\n\nexport function divReal(a: Polar, b: number): Polar {\n  return {angle: a.angle, radius: a.radius / b}\n}\n\nexport function powReal(z: Polar, k: number): Polar {\n  return {angle: z.angle * k, radius: Math.pow(z.radius, k)}\n}\n","import { Complex, Polar } from './types';\nimport * as P from './polar';\nimport * as Math from './real';\n\n\nexport function complex(re: number, im: number): Complex {\n  return {re, im}\n}\n\nexport function conjugate(z: Complex) {\n  return {re: z.re, im: -z.im}\n}\n\nexport function fromPolar({angle, radius}: Polar) {\n  return {\n    re: radius * Math.cos(angle),\n    im: radius * Math.sin(angle),\n  }\n}\n\nexport function toPolar(z: Complex): Polar {\n  return {\n    angle: Math.atan2(z.im, z.re),\n    radius: Math.sqrt(z.re*z.re + z.im*z.im),\n  }\n}\n\nexport function neg(a: Complex): Complex {\n  return {re: -a.re, im: -a.im}\n}\n\n\n// Addition\n\nexport function add(a: Complex, b: Complex): Complex {\n  return {re: a.re+b.re, im: a.im+b.im}\n}\n\nexport function addReal(a: Complex, b: number): Complex {\n  return {re: a.re + b, im: a.im}\n}\n\nexport function addPolar(a: Complex, b: Polar): Complex {\n  return add(a, fromPolar(b))\n}\n\n\n// Subtraction\n\nexport function subt(a: Complex, b: Complex): Complex {\n  return {re: a.re - b.re, im: a.im - b.im}\n}\n\nexport function subtReal(a: Complex, b: number): Complex {\n  return {re: a.re - b, im: a.im}\n}\n\nexport function subtPolar(a: Complex, b: Polar): Complex {\n  return subt(a, fromPolar(b))\n}\n\n\n// Multiplication\n\nexport function mult(a: Complex, b: Complex): Complex {\n  return {\n    re: a.re*b.re - a.im*b.im,\n    im: a.re*b.im + a.im*b.re,\n  }\n}\n\nexport function multReal(a: Complex, b: number): Complex {\n  return {re: b * a.re, im: b * a.im}\n}\n\nexport function multPolar(a: Complex, b: Polar): Complex {\n  return mult(a, fromPolar(b))\n}\n\n\n// Division\n\nexport function div(a: Complex, b: Complex): Complex {\n  const d = abs2(b);\n  return {\n    re: (a.re * b.re + a.im * b.im) / d,\n    im: (a.im * b.re - a.re * b.im) / d,\n  }\n}\n\nexport function divReal(a: Complex, b: number): Complex {\n  return {re: a.re / b, im: a.im / b}\n}\n\nexport function divPolar(a: Complex, b: Polar): Complex {\n  return fromPolar(P.div(toPolar(a), b))\n}\n\n\n// Exponentiation\n\nexport function exp(z: Complex): Complex {\n  return fromPolar({radius: Math.exp(z.re), angle: z.im})\n}\n\nexport function powFloat(z: Complex, k: number): Complex {\n  return fromPolar(P.powReal(toPolar(z), k))\n}\n\nexport function powInt(z: Complex, k: number): Complex {\n  if (k < 0) return div(complex(1, 0), powInt(z, -k))\n  if (k === 0) return complex(1, 0)\n  if (k === 1) return z\n  if (k === 2) return mult(z, z)\n  if (k === 3) return mult(mult(z, z), z)\n  if (k === 4) return mult(mult(mult(z, z), z), z)\n  if (k === 5) return mult(mult(mult(mult(z, z), z), z), z)\n  if (k === 6) return mult(mult(mult(mult(mult(z, z), z), z), z), z)\n  if (k === 7) return mult(mult(mult(mult(mult(mult(z, z), z), z), z), z), z)\n  if (k === 8) return mult(mult(mult(mult(mult(mult(mult(z, z), z), z), z), z), z), z)\n  return powFloat(z, k)\n}\n\nexport function powReal(z: Complex, k: number): Complex {\n  return powInt(z, k);\n}\n\n\n// Other\n\nexport function abs2(z: Complex): number {\n  return z.re * z.re + z.im * z.im;\n}\n\nexport function abs(z: Complex): number {\n  return Math.sqrt(abs2(z));\n}\n\nexport function angle(z: Complex): number {\n  return Math.atan2(z.im, z.re);\n}\n\nexport function sqrt(z: Complex): Complex {\n  const angle = Math.atan2(z.im, z.re);\n  return fromPolar({\n    angle: angle / 2,\n    radius: Math.sqrt(abs(z))\n  })\n}\n\nexport function sinh(z: Complex): Complex {\n  return divReal(subt(exp(z), exp(neg(z))), 2)\n}\n","import React from 'react';\nimport { ControlComplex } from '../fractals/types'\nimport DownUpButtons, { DownUpButtonsProps } from './DownUpButtons';\nimport {\n  complex,\n  fromPolar,\n  toPolar,\n} from '../fractals/math/complex';\nimport { Polar } from '../fractals/math/types';\nimport { Icon } from '.';\n\ntype Vec = [number, number]\n\ninterface NewProps {\n  controlProps: ControlComplex\n  value: Vec\n  onChange: (x: Vec) => void\n}\n\ninterface Props extends NewProps, Omit<DownUpButtonsProps, 'label' | 'onDown' | 'onUp'> {}\n\nclass ComplexIncrementer extends React.Component<Props> {\n\n  setValue(v: Vec) {\n    this.props.onChange(v)\n  }\n\n  toPolar() {\n    return toPolar(complex(this.props.value[0], this.props.value[1]))\n  }\n\n  fromPolar(v: Polar): Vec {\n    const a = fromPolar(v);\n    return [a.re, a.im];\n  }\n\n  radiusDown(): Vec {\n    const {stepRadius} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, radius: p.radius-stepRadius})\n  }\n\n  radiusUp(): Vec {\n    const {stepRadius} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, radius: p.radius+stepRadius})\n  }\n\n  angleDown(): Vec {\n    const {stepAngle} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, angle: p.angle-stepAngle})\n  }\n\n  angleUp(): Vec {\n    const {stepAngle} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, angle: p.angle+stepAngle})\n  }\n\n\n  onAngleDown = () => {\n    this.setValue(this.angleDown())\n  }\n\n  onAngleUp = () => {\n    this.setValue(this.angleUp())\n  }\n\n  onRadiusDown = () => {\n    this.setValue(this.radiusDown())\n  }\n\n  onRadiusUp = () => {\n    this.setValue(this.radiusUp())\n  }\n\n\n  render() {\n    const {controlProps, params, onChange, ...rest} = this.props;\n    return (\n      <>\n      <DownUpButtons\n        {...rest}\n        //label={controlProps.label + ': θ'}\n        label={controlProps.label + ': angle'}\n        onDown={this.onAngleDown}\n        onUp={this.onAngleUp}\n        downIcon={Icon.RotateRight}\n        upIcon={Icon.RotateLeft}\n      />\n      <DownUpButtons\n        {...rest}\n        label={controlProps.label + ': radius'}\n        onDown={this.onRadiusDown}\n        onUp={this.onRadiusUp}\n      />\n      </>\n    )\n  }\n}\n\nexport default ComplexIncrementer\n","import React from 'react'\nimport katex from 'katex'\nimport { withStyles, createStyles, WithStyles } from '@material-ui/core/styles';\nimport 'katex/dist/katex.css';\n\n\nconst styles = createStyles({\n  root: {\n    whiteSpace: 'nowrap',\n  }\n})\n\nexport interface KatexProps {\n  math: string\n  displayMode?: boolean\n  style?: React.CSSProperties\n}\n\ninterface Props extends KatexProps, WithStyles<typeof styles> {}\n\nclass Katex extends React.PureComponent<Props> {\n  ref: React.RefObject<HTMLSpanElement>\n\n  constructor(props: Props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  renderMath() {\n    if (this.ref.current) {\n      katex.render(this.props.math, this.ref.current, {\n        displayMode: this.props.displayMode\n      })\n    }\n  }\n\n  componentDidMount() {\n    this.renderMath()\n  }\n\n  componentDidUpdate() {\n    this.renderMath()\n  }\n\n  render() {\n    const { classes } = this.props;\n    return React.createElement('span', {\n      ref: this.ref,\n      className: classes.root,\n    })\n  }\n}\n\nexport default withStyles(styles)(Katex)","import React from 'react';\nimport Katex, { KatexProps } from './Katex';\nimport Typography, {TypographyProps} from '@material-ui/core/Typography';\n\n\nexport type StringOrMath = string | KatexProps\n\nconst RenderStringOrMath = (data: StringOrMath) => {\n  if (typeof data === 'string') {\n    return data;\n  } else {\n    return React.createElement(Katex, data);\n  }\n}\n\nexport type StringWithMath = StringOrMath | StringOrMath[]\n\nexport type TextWithMathProps = {\n  data: StringWithMath\n  typographyProps?: TypographyProps\n}\n\nconst TextWithMath = ({data, typographyProps}: TextWithMathProps) => {\n  if (Array.isArray(data)) {\n    return React.createElement(Typography, typographyProps, ...data.map(RenderStringOrMath))\n  }\n  if (typeof data === 'string') {\n    return React.createElement(Typography, typographyProps, data);\n  }\n  return React.createElement(Katex, data);\n}\n\nexport default TextWithMath","import Box from '@material-ui/core/Box';\nimport { withStyles, Theme, createStyles } from '@material-ui/core/styles';\n\n\nconst styles = createStyles((theme: Theme) => ({\n  root: {\n    height: '100%',\n  }\n}));\n\n\nexport default withStyles(styles)(Box)","import {\n  interpolateLab,\n  piecewise,\n  scalePow,\n  ScalePower,\n} from 'd3';\n\n\nclass ColorScale {\n  interpolator: (n: number) => string\n  skew: number\n  reverse: boolean\n\n  constructor(interpolator: (n: number) => string, {skew, reverse}: {\n    reverse?: boolean,\n    skew?: number,\n  }={}) {\n    this.interpolator = interpolator;\n    this.reverse = reverse || false;\n    this.skew = skew || 0;\n  }\n\n  static piecewise(colors: string[], opts?: {skew?: number, reverse?: boolean}) {\n    return new ColorScale(piecewise(interpolateLab, colors), opts)\n  }\n\n  createScaler(domain?: [number, number]): ScalePower<number,number> {\n    const scale = scalePow()\n      .domain(domain || [0,1])\n      .range(this.reverse ? [1, 0] : [0, 1])\n    if (this.skew) {\n      scale.exponent(2**this.skew);\n    }\n    return scale;\n  }\n\n  scale(domain?: [number,number]): (n: number) => string {\n    const scale = this.createScaler(domain);\n    return (n: number) => this.interpolator(scale(n));\n  }\n\n  discreteScale(domain?: [number, number]): string[] {\n    const scale = this.createScaler(domain);\n    const result: string[] = Array(1 + Math.abs(scale.domain()[1] - scale.domain()[0]));\n    for (let i = scale.domain()[0]; i <= scale.domain()[1]; i++) {\n      result[i] = this.interpolator(scale(i));\n    }\n    return result;\n  }\n}\n\nexport default ColorScale","import {\n  interpolateInferno as Inferno,\n  interpolateMagma as Magma,\n  interpolatePlasma as Plasma,\n  interpolateViridis as Viridis,\n  interpolateCool as Cool,\n  interpolateWarm as Warm,\n  interpolateGreys as Greys,\n  interpolateRainbow as Rainbow,\n  interpolateSpectral as Spectral,\n  interpolateCubehelixDefault as Cubehelix\n} from 'd3';\n\ntype SchemeDict = {[k: string]: (n: number) => string}\n\nexport const D3_SCHEMES: SchemeDict = {\n  Cool,\n  Cubehelix,\n  Greys,\n  Inferno,\n  Magma,\n  Plasma,\n  Rainbow,\n  Spectral,\n  Viridis,\n  Warm,\n}\n\nexport const OTHER_SCHEMES: SchemeDict = {\n}\n\nconst ALL_SCHEMES: SchemeDict = {\n  ...D3_SCHEMES,\n  ...OTHER_SCHEMES,\n}\n\nexport default ALL_SCHEMES\n","import ColorScale from './ColorScale';\nimport COLORSCHEMES from './schemes';\n\n\nfunction customScale(colors: string[], opts: {\n  reverse?: boolean,\n  skew?: number,\n}={}) {\n  return ColorScale.piecewise(colors, opts);\n}\n\n\nfunction builtinScale(scheme: string, opts: {\n  reverse?: boolean,\n  skew?: number,\n}={}) {\n  return new ColorScale(COLORSCHEMES[scheme], opts);\n}\n\n\nfunction colorScale({scheme, reverse, skew, customSchemes}: {\n  scheme: string\n  reverse: boolean,\n  skew: number,\n  customSchemes: {[k: string]: string[]}\n}) {\n  if (customSchemes[scheme]) {\n    return customScale(customSchemes[scheme], {reverse, skew});\n  } else {\n    return builtinScale(scheme, {reverse, skew});\n  }\n}\n\nexport {\n  ColorScale,\n  colorScale,\n  COLORSCHEMES,\n}","import React from 'react';\nimport { SchemeName } from '../store/color/types';\nimport { colorScale } from '../fractals/colors';\nimport { withStyles, WithStyles, createStyles } from '@material-ui/core/styles';\n//import { CSSProperties } from '@material-ui/core'\n\n\nexport interface ColorPreviewProps {\n  width: number\n  height: number\n  orientation: string\n  scheme: SchemeName\n  customSchemes: {[k: string]: string[]}\n  reverse: boolean\n  skew: number\n  style?: React.CSSProperties\n}\n\nconst styles = createStyles({\n  root: {\n    borderRadius: '8px',\n    boxShadow: '2px 2px 4px rgba(0,0,0,0.5)',\n  }\n})\n\ninterface Props extends ColorPreviewProps, WithStyles<typeof styles> {}\n\nclass ColorPreview extends React.Component<Props> {\n  ref: React.RefObject<HTMLCanvasElement>\n\n  static defaultProps = {\n    width: 400,\n    height: 10,\n    orientation: 'horizontal',\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    this.docolors();\n  }\n\n  componentDidUpdate() {\n    this.docolors();\n  }\n\n  docolors() {\n    const canvas = this.ref.current;\n    if (canvas) {\n      const context = canvas.getContext('2d');\n      if (context) {\n        const { scheme, reverse, skew, customSchemes, width, height, orientation } = this.props;\n        if (orientation === 'horizontal') {\n          const cm = colorScale({scheme, reverse, skew, customSchemes}).discreteScale([0,width]);\n          cm.forEach((color, i) => {\n            context.fillStyle = color;\n            context.fillRect(i, 0, 1, height);\n          })\n        } else {\n          const cm = colorScale({scheme, reverse, skew, customSchemes}).discreteScale([height,0]);\n          cm.forEach((color, i) => {\n            context.fillStyle = color;\n            context.fillRect(0, i, width, 1);\n          })\n        }\n      }\n    }\n  }\n\n  render() {\n    return (\n      <canvas ref={this.ref} \n        width={this.props.width} \n        height={this.props.height} \n        style={this.props.style}\n        className={this.props.classes.root}\n      />\n    )\n  }\n}\n\nexport default withStyles(styles)(ColorPreview)","import React from 'react';\nimport { withStyles, createStyles, WithStyles } from '@material-ui/core/styles';\n\n\nexport interface ComplexNumberInputProps {\n  value: [number, number],\n  max: number,\n  onClick?: (v: [number, number]) => void,\n  onDoubleClick?: (v: [number, number]) => any,\n  size: number,\n  precision: number,\n  stepRect: number,\n  stepRadius: number,\n  stepAngle: number,\n  angles?: number[],\n  style?: React.CSSProperties,\n  markerColor: string,\n  gridColor?: string,\n  textColor?: string,\n}\n\n\nconst styles = createStyles({\n  root: {\n    padding: '0px',\n    userSelect: 'none',\n  },\n  \n  grid: {\n    strokeLinecap: 'square',\n    fill: 'none',\n  },\n  \n  major: {\n    strokeWidth: 0.5,\n    strokeOpacity: 1,\n  },\n  \n  minor: {\n    strokeWidth: 0.5,\n    strokeOpacity: 0.3,\n  },\n  \n  marker: {\n    strokeWidth: 0,\n  },\n});\n\n\ninterface Props extends ComplexNumberInputProps, WithStyles<typeof styles> {}\n\nclass ComplexNumberInput extends React.Component<Props> {\n  ref: React.RefObject<SVGSVGElement>\n  GRID: {\n    RECT?: {MAJOR?: string, MINOR?: string},\n    POLAR?: {MAJOR?: string, MINOR?: string},\n  }\n  round: (n: number) => number\n\n  static defaultProps = {\n    size: 100,\n    precision: 3,\n    stepAngle: 30,\n    stepRadius: 0.2,\n    stepRect: 0.2,\n\n    markerColor: 'blue',\n    //gridColor: 'black',\n  }\n\n  constructor(props: React.PropsWithChildren<Props>) {\n    super(props);\n    this.ref = React.createRef();\n    const r = Math.pow(10, props.precision);\n    this.round = (n: number) => Math.round(n*r) / r;\n    const {max, stepRadius, stepRect, stepAngle, angles} = this.props;\n    this.GRID = makegrid({max, stepRadius, stepAngle, angles, stepX: stepRect, stepY: stepRect});\n  }\n\n  getValueAtClick(evt: any): [number, number] | undefined {\n    const svg = this.ref.current;\n    if (svg) {\n      const rect = svg.getBoundingClientRect();\n      const {x, y} = rect;\n      const {clientX, clientY} = evt.nativeEvent;\n      const clickX = ((clientX - x) / this.props.size - 0.5) * 2*this.props.max;\n      const clickY = -((clientY - y) / this.props.size - 0.5) * 2*this.props.max;\n      return [this.round(clickX), this.round(clickY)];\n    }\n  }\n\n  onClick = (evt: any) => {\n    if (this.props.onClick) {\n      const p = this.getValueAtClick(evt);\n      if (p) this.props.onClick(p);\n    }\n  }\n\n  onDoubleClick = (evt: any) => {\n    if (this.props.onDoubleClick) {\n      const p = this.getValueAtClick(evt);\n      if (p) this.props.onDoubleClick(p);\n    }\n  }\n\n  polarGrid() {\n    if (this.GRID.POLAR) {\n      return (\n        <>\n        {this.GRID.POLAR.MINOR ? (\n          <path d={this.GRID.POLAR.MINOR} \n            className={this.props.classes.minor} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        {this.GRID.POLAR.MAJOR ? (\n          <path d={this.GRID.POLAR.MAJOR} \n            className={this.props.classes.major} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        </>\n      )\n    }\n    return null;\n  }\n\n  rectGrid() {\n    if (this.GRID.RECT) {\n      return (\n        <>\n        {this.GRID.RECT.MINOR ? (\n          <path d={this.GRID.RECT.MINOR} \n            className={this.props.classes.minor} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        {this.GRID.RECT.MAJOR ? (\n          <path d={this.GRID.RECT.MAJOR} \n            className={this.props.classes.major} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        </>\n      )\n    }\n    return null;\n  }\n  \n  render() {\n    const markerRadius = this.props.max / 24;\n    const viewBox = [-this.props.max, -this.props.max, 2*this.props.max, 2*this.props.max]\n    return (\n      <svg \n        ref={this.ref}\n        onClick={this.onClick}\n        onDoubleClick={this.onDoubleClick}\n        viewBox={viewBox.join(' ')}\n        className={this.props.classes.root}\n        style={{...this.props.style, width: this.props.size, height: this.props.size}}\n      >\n        <g className={this.props.classes.grid}\n          style={{stroke: this.props.gridColor}}\n        >\n          {this.rectGrid()}\n          {this.polarGrid()}\n        </g>\n        <circle \n          cx={this.props.value[0]}\n          cy={-this.props.value[1]}\n          r={markerRadius} \n          className={this.props.classes.marker}\n          style={{\n            stroke: this.props.markerColor,\n            fill: this.props.markerColor,\n          }}\n        />\n      </svg>\n    )\n  }\n}\n\n\nexport default withStyles(styles)(ComplexNumberInput)\n\n\nfunction makegrid({max, stepX, stepY, stepRadius, stepAngle, angles}: {\n  max: number,\n  stepX: number,\n  stepY: number,\n  stepAngle: number,\n  stepRadius: number,\n  angles?: number[],\n}) {\n  const max_radius = max * 1.5;\n\n  function circle(cx: number, cy: number, r: number) {\n    return (\n      'M' + cx+r + ',' + cy + \n      'A' + r + ',' + r + ',0,1,0,' + cx + ',' + cy + r +\n      'A' + r + ',' + r + ',0,0,0,' + cx + r + ',' + cy\n    )\n  }\n\n  function hline(v: number) {\n    return 'M' + (-max) + ',' + v + 'H' + max;\n  }\n\n  function vline(v: number) {\n    return 'M' + v + ',' + (-max) + 'V' + max;\n  }\n  \n  let rect_minor = ''\n  let i = 0;\n  while (i <= max) {\n    rect_minor += vline(i) + vline(-i);\n    i += stepX;\n  }\n\n  i = 0;\n  while (i <= max) {\n    rect_minor += hline(i) + hline(-i);\n    i += stepY;\n  }\n  \n  let polar_minor = '';\n  \n  if (angles) {\n    angles.forEach(a => {\n      const rad = a * Math.PI / 180;\n      polar_minor += 'M0,0L' + max_radius * Math.cos(rad) + ',' + max_radius * Math.sin(rad);\n    })\n  } else {\n    i = 0;\n    while (i < 360) {\n      const rad = i * Math.PI / 180;\n      polar_minor += 'M0,0L' + max_radius * Math.cos(rad) + ',' + max_radius * Math.sin(rad);\n      i += stepAngle;\n    }\n  }\n\n  i = stepRadius;\n  while (i <= max_radius) {\n    polar_minor += circle(0, 0, i);\n    i += stepRadius;\n  }\n\n  return {\n    RECT: {MINOR: rect_minor, MAJOR: hline(0) + vline(0)},\n    POLAR: {MINOR: polar_minor, MAJOR: circle(0, 0, 1)},\n  }\n  \n}\n","import { Complex as _Complex } from './math/types';\nimport { StringWithMath } from '../components/TextWithMath';\n\nexport type Complex = _Complex\n\nexport type TextWithMath = StringWithMath\n\nexport type Label = StringWithMath\n\nexport type PixelCalculator = (x: number, y: number) => number\n\nexport interface Params {[k: string]: any}\n\nexport enum ControlType {\n  Call,\n  Number,\n  Complex,\n  Boolean,\n}\n\ninterface ControlBase {\n  type: ControlType\n}\n\nexport interface ControlCall extends ControlBase {\n  type: ControlType.Call\n  label?: string\n  icon?: string\n  onCall: () => Params\n}\n\nexport interface ControlNumber extends ControlBase {\n  type: ControlType.Number\n  label: string\n  param: string\n  step: number\n  min?: number\n  max?: number\n}\n\nexport interface ControlComplex extends ControlBase {\n  type: ControlType.Complex\n  label: string\n  param: string\n  stepRadius: number\n  stepAngle: number\n}\n\nexport interface ControlBoolean extends ControlBase {\n  type: ControlType.Boolean\n  label: string\n  param: string\n}\n\nexport type ControlProps = ControlCall | ControlNumber | ControlComplex | ControlBoolean\n\nexport interface FractalInterface<T> {\n  label: StringWithMath\n  pixel(params: T): PixelCalculator\n  formula(params: T): StringWithMath\n  description(params: T): StringWithMath\n  create(): T\n  settings: any[]\n  controls: ControlProps[]\n}\n\n\nexport type Vector = [number, number]\n\n\n","import React from 'react';\nimport TextField, { \n  StandardTextFieldProps,\n  FilledTextFieldProps,\n  OutlinedTextFieldProps,\n} from '@material-ui/core/TextField';\n\n\ninterface NewProps {\n  value?: number\n  step?: number\n  min?: number\n  max?: number\n  emptyValue?: number\n}\n\ninterface StandardNumberInputProps\n  extends NewProps, Omit<StandardTextFieldProps, 'value' | 'type'> {}\n\ninterface FilledNumberInputProps\n  extends NewProps, Omit<FilledTextFieldProps, 'value' | 'type'> {}\n\ninterface OutlinedNumberInputProps\n  extends NewProps, Omit<OutlinedTextFieldProps, 'value' | 'type'> {}\n\ntype NumberInputProps = \n  StandardNumberInputProps | \n  FilledNumberInputProps | \n  OutlinedNumberInputProps;\n\n\nclass NumberInput extends React.Component<NumberInputProps> {\n  state: {isEmpty: boolean}\n\n  constructor(props: NumberInputProps) {\n    super(props);\n    this.state = {\n      isEmpty: false\n    }\n  }\n\n  onChange = (evt: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const s = evt.target.value;\n    if (s === '') {\n      this.setState({isEmpty: true})\n    } else {\n      this.setState({isEmpty: false})\n    }\n    if (this.props.onChange) {\n      if (!isNaN(+s)) {\n        this.props.onChange(evt)\n      }\n    }\n  }\n\n  onBlur = (evt: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    if (this.props.onBlur) {\n      this.props.onBlur(evt);\n    }\n    this.setState({isEmpty: false});\n  }\n\n\n  render() {\n    const {step, min, max, inputProps, onChange, onBlur, value='', emptyValue=0, ...rest} = this.props;\n    return React.createElement(TextField, {\n      type: 'number',\n      value: value ? +value : this.state.isEmpty ? '' : emptyValue,\n      inputProps: {step, min, max, ...inputProps},\n      onChange: this.onChange,\n      onBlur: this.onBlur,\n      ...rest, \n    })\n  }\n}\n\n\nexport default NumberInput","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../store/types';\nimport { Nav } from '../store/ui/types';\nimport { setNav } from '../store/ui/actions';\nimport BottomNavigation, { BottomNavigationProps } from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport { withStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { Icon } from '../components';\n\n\nconst styles = createStyles(({palette}: Theme) => ({\n  root: {\n    //position: 'absolute',\n    bottom: 0,\n    width: '100%',\n    borderTop: '1px solid ' + palette.divider,\n  },\n}))\n\nconst StyledBottomNav = withStyles(styles)(BottomNavigation)\n\nconst BottomNav = (props: BottomNavigationProps) => (\n  <StyledBottomNav {...props}>\n    \n    <BottomNavigationAction\n      value={Nav.Params}\n      label=\"Parameters\"\n      icon={<Icon.Tune/>}\n    />\n    <BottomNavigationAction\n      value={Nav.Navigate}\n      label=\"Explore\"\n      icon={<Icon.Navigate/>}\n    />\n    <BottomNavigationAction\n      value={Nav.Help}\n      label=\"Help\"\n      icon={<Icon.Help/>}\n    />\n  </StyledBottomNav>\n);\n\nexport default connect(\n  (state: State) => ({\n    value: state.ui.nav,\n  }),\n  (dispatch: Dispatch) => ({\n    onChange: (evt: any, x: Nav) => dispatch(setNav(x)),\n  })\n)(BottomNav)","import {\n  FractalInterface,\n  Params as FractalParams,\n  ControlProps,\n  ControlType\n} from '../../fractals/types';\n\nexport type Fractal = FractalInterface<FractalParams>\nexport type Params = FractalParams\n\nexport const SET_FRACTAL = 'ALGORITHM_SET_FRACTAL';\nexport const UPDATE_PARAMS = 'ALGORITHM_UPDATE_PARAMS';\n\n\nexport type FractalList = {[k: string]: Fractal}\n\nexport type FractalKey = keyof FractalList\n\nexport type ParamControl = ControlProps\n\nexport { ControlType }\n\nexport interface State{\n  current: FractalKey\n  fractals: FractalList\n  params: Params\n  defaultParams: {bound: number, iterations: number}\n  paramControls: ParamControl[]\n}\n\nexport type SetFractal = {\n  type: typeof SET_FRACTAL,\n  payload: {current: FractalKey, params?: Params},\n}\n\nexport type UpdateParams = {\n  type: typeof UPDATE_PARAMS,\n  payload: Params\n}\n\nexport type Action = SetFractal | UpdateParams","import {\n  UpdateParams,\n  UPDATE_PARAMS,\n  SetFractal,\n  SET_FRACTAL,\n  Params,\n  FractalKey,\n} from './types';\n\nexport const updateParams = (params: Params): UpdateParams => ({\n  type: UPDATE_PARAMS,\n  payload: params\n})\n\nexport const setFractal = (current: FractalKey, params?: Params): SetFractal => ({\n  type: SET_FRACTAL,\n  payload: {current, params}\n})","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState, Dispatch } from '../../store/types';\nimport { State as AlgState, FractalKey, Params } from '../../store/algorithm/types';\nimport { setFractal } from '../../store/algorithm/actions';\nimport { startDrawing } from '../../store/ui/actions'\nimport { recenter } from '../../store/view/actions';\nimport { SettingsContainer, TextWithMath } from '../../components';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport { withStyles } from '@material-ui/core/styles';\n\ntype Props = {\n  algorithm: AlgState\n  setFractal: (key: FractalKey) => void\n  onClose?: () => void\n}\n\nconst StyledMenuItem = withStyles({\n})(MenuItem)\n\ninterface State {\n  current: FractalKey,\n  params: Params,\n}\n\nclass AlgorithmSettings extends React.Component<Props> {\n  state: State\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      current: props.algorithm.current,\n      params: {...props.algorithm.params},\n    };\n  }\n\n  selectMethod = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({current: evt.target.value});\n  }\n\n  apply = () => {\n    this.props.setFractal(this.state.current)\n    if (this.props.onClose) {\n      this.props.onClose();\n    }\n  }\n\n  reset = () => {\n    this.setState({\n      current: this.props.algorithm.current,\n      params: {...this.props.algorithm.params},\n    })\n  }\n\n  render() {\n    return (\n      <SettingsContainer>\n        <Box m={1}>\n          <Box m={1}>\n            <TextField select\n              label=\"Method\"\n              value={this.state.current}\n              onChange={this.selectMethod}\n              style={{maxWidth: '300px'}}\n            >\n              {Object.keys(this.props.algorithm.fractals).sort().map(k => {\n                return (\n                  <StyledMenuItem key={k} value={k}>\n                      <TextWithMath \n                        data={this.props.algorithm.fractals[k].label}\n                        typographyProps={{\n                          variant: 'caption',\n                        }}\n                      />\n                  </StyledMenuItem>\n                )\n              })}\n            </TextField>\n          </Box>\n          <Box m={1}>\n            <ButtonGroup fullWidth color=\"primary\" orientation=\"vertical\">\n              <Button fullWidth onClick={this.apply}>Apply</Button>\n              <Button fullWidth onClick={this.reset}>Reset</Button>\n            </ButtonGroup>\n          </Box>\n        </Box>\n      </SettingsContainer>\n    )\n  }\n}\n\nexport default connect(\n  (state: AppState) => ({\n    algorithm: state.algorithm,\n  }),\n  (dispatch: Dispatch) => ({\n    setFractal: (key: FractalKey) => {\n      dispatch(setFractal(key))\n      dispatch(recenter())\n      dispatch(startDrawing())\n    },\n  })\n)(AlgorithmSettings)","import {\n  State,\n  Update,\n  Recenter,\n  SetCenter,\n  SetDims,\n  ZoomIn,\n  ZoomOut,\n  UPDATE,\n  RECENTER,\n  SET_CENTER,\n  SET_DIMS,\n  ZOOM_IN,\n  ZOOM_OUT,\n} from './types';\n\n\nexport const update = (update: Partial<State>): Update => ({\n  type: UPDATE,\n  payload: update,\n})\n\nexport const recenter = (): Recenter => ({\n  type: RECENTER,\n})\n\nexport const setCenter = (cx: number, cy: number): SetCenter => ({\n  type: SET_CENTER,\n  payload: {cx, cy},\n})\n\nexport const setDims = (w: number, h: number): SetDims => ({\n  type: SET_DIMS,\n  payload: {w, h}\n})\n\nexport const zoomIn = (factor: number): ZoomIn => ({\n  type: ZOOM_IN,\n  payload: factor,\n})\n\nexport const zoomOut = (factor: number): ZoomOut => ({\n  type: ZOOM_OUT,\n  payload: factor,\n})","//import Big from 'big.js';\n\nexport type State = {\n  [k: string]: number | boolean\n  cx: number\n  cy: number\n  w: number\n  h: number\n  ppu: number // pixels per unit\n  previewPixels: number\n}\n\nexport const UPDATE = 'VIEW_UPDATE';\nexport const ZOOM_IN = 'VIEW_ZOOM_IN';\nexport const ZOOM_OUT = 'VIEW_ZOOM_OUT';\nexport const RECENTER = 'VIEW_RECENTER';\nexport const SET_DIMS = 'VIEW_SET_DIMS';\nexport const SET_CENTER = 'VIEW_SET_CENTER';\n\nexport type Update = {\n  type: typeof UPDATE,\n  payload: Partial<State>,\n}\n\nexport type Recenter = {\n  type: typeof RECENTER,\n}\n\nexport type SetDims = {\n  type: typeof SET_DIMS,\n  payload: {w: number, h: number},\n}\n\nexport type SetCenter = {\n  type: typeof SET_CENTER,\n  payload: {cx: number, cy: number},\n}\n\nexport type ZoomIn = {\n  type: typeof ZOOM_IN,\n  payload: number,\n}\n\nexport type ZoomOut = {\n  type: typeof ZOOM_OUT,\n  payload: number,\n}\n\nexport type Action = Update | ZoomIn | ZoomOut | Recenter | SetDims | SetCenter;","import React from 'react';\nimport { ColorPreview, DownUpButtons } from '../../components';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\n\n\ntype Props = {\n  takenNames: string[],\n  onSave: (name: string, colors: string[]) => void;\n  onClose: () => void;\n}\n\ntype State = {\n  name: string,\n  num: number,\n  colors: string[],\n}\n\nclass CustomColor extends React.Component<Props> {\n  state: State\n\n  static defaultProps = {\n    takenNames: [],\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      name: '',\n      num: 2,\n      colors: ['#FF0055', '#0055FF'],\n    }\n  }\n\n  changeName = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const name = evt.target.value;\n    this.setState({name});\n  }\n\n  setNum(n: number) {\n    const num = Math.max(2, n)\n    let colors = [...this.state.colors];\n    if (num > colors.length) {\n      const x = colors[colors.length-1];\n      while (colors.length < num) {\n        colors.push(x);\n      }\n    } else {\n      colors = colors.slice(0,num);\n    }\n    this.setState({num, colors});\n  }\n\n  changeNum = (evt: React.ChangeEvent<HTMLInputElement>) => this.setNum(+evt.target.value)\n\n  changeColor = (i: number) => {\n    return (evt: React.ChangeEvent<HTMLInputElement>) => {\n      const colors = [...this.state.colors];\n      colors[i] = evt.target.value;\n      this.setState({colors});\n    }\n  }\n\n  addColor = () => this.setNum(this.state.num + 1);\n  removeColor = () => this.setNum(this.state.num - 1);\n\n  save = () => {\n    this.props.onSave(this.state.name, this.state.colors);\n    this.props.onClose();\n  }\n\n  validName = () => {\n    if (this.state.name === '') {\n      return false;\n    }\n    this.props.takenNames.forEach(k => {\n      if (k.toLowerCase() === this.state.name.toLowerCase()) {\n        return false;\n      }\n    })\n    return true;\n  }\n\n  renderColorInput(i: number) {\n    if (i < this.state.colors.length) {\n      return (\n        <Grid item xs={1}>\n          <input type=\"color\"\n            value={this.state.colors[i]}\n            onChange={this.changeColor(i)}\n            style={{width: '40px', borderRadius: 0, padding: 0}}\n          />\n        </Grid>\n      )\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <>\n\n        <InputLabel>New Colorscheme</InputLabel>\n\n        <Box>\n        <TextField\n              label=\"Name\"\n              variant=\"filled\"\n              value={this.state.name}\n              onChange={this.changeName}\n              inputProps={{type: 'text'}}\n            />\n        </Box>\n        <Box p={1}>\n          <ColorPreview\n            style={{width: '100%', height: '4mm'}}\n            scheme=\"CUSTOM\"\n            customSchemes={{CUSTOM: this.state.colors}}\n            reverse={false}\n            skew={0}\n            width={100}\n            height={10}\n          />\n        </Box>\n        <Box>\n          <Grid container>\n            {this.state.colors.map((color: string, i: number) => (\n              <Box m={0.5}>{this.renderColorInput(i)}</Box>\n            ))}\n          </Grid>\n          <Box m={1}>\n            <DownUpButtons\n              variant=\"contained\"\n              style={{alignSelf: 'center'}}\n              onDown={this.removeColor}\n              disableDown={this.state.colors.length < 3}\n              onUp={this.addColor}\n            />\n          </Box>\n          <Box>\n          <Button \n              fullWidth color=\"primary\"\n              disabled={!this.validName()}\n              onClick={this.save}\n            >Save</Button>\n          </Box>\n        </Box>\n      </>\n    )\n  }\n}\n\nexport default CustomColor","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types';\nimport { Modal } from '../../store/ui/types';\nimport { setModal } from '../../store/ui/actions'\nimport AlgorithmSettings from './AlgorithmSettings';\nimport ColorSettings from './ColorSettings';\nimport ViewSettings from './ViewSettings';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Box from '@material-ui/core/Box';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport FullResolution from './FullResolution';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Icon } from '../../components';\n\ntype Props = {\n  open: boolean\n  setModal: (modal: Modal) => void\n}\n\nconst StyledMenuItem = withStyles({\n  root: {\n    padding: '1em',\n  }\n})(MenuItem)\n\nconst StyledLabel = withStyles({\n  root: {\n    padding: 0,\n    margin: 0,\n  }\n})(ListItemText)\n\n\nconst StyledSwipeableDrawer = withStyles({\n  paper: {\n    display: 'flex',\n    flexDirection: 'row',\n    height: '100%',\n    maxWidth: '90vw',\n  }\n})(SwipeableDrawer)\n\nenum Menu {\n  None,\n  Algorithm,\n  Color,\n  View,\n}\n\nclass SettingsDrawer extends React.Component<Props> {\n  state: {\n    menu: Menu,\n    popup: boolean,\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      menu: Menu.None,\n      popup: false,\n    }\n  }\n\n\n\n  openMenu = () => this.props.setModal(Modal.Menu);\n  openAlgorithm = () => this.setState({menu: Menu.Algorithm});\n  openColor = () => this.setState({menu: Menu.Color});\n  openView = () => this.setState({menu: Menu.View});\n  closeAll = () => {\n    this.setState({menu: Menu.None});\n    this.closePopup();\n    this.props.setModal(Modal.None);\n  }\n\n  openPopup = () => this.setState({popup: true})\n  closePopup = () => this.setState({popup: false})\n\n  render() {\n    const labelStyle = this.state.menu === Menu.None ? {} : {display: 'none'};\n    const listStyle = this.state.menu === Menu.None ? {} : {width: '4em'}\n    return (\n      <>\n      <StyledSwipeableDrawer\n        open={this.props.open}\n        onOpen={this.openMenu}\n        onClose={this.closeAll}\n      >\n        <List style={listStyle}>\n          <StyledMenuItem onClick={this.openAlgorithm}>\n            <ListItemIcon><Icon.Functions/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Algorithm</StyledLabel>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={this.openColor}>\n            <ListItemIcon><Icon.Palette/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Colors</StyledLabel>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={this.openView}>\n            <ListItemIcon><Icon.View/></ListItemIcon>\n            <StyledLabel style={labelStyle}>View</StyledLabel>\n          </StyledMenuItem>\n          <Divider/>\n          <StyledMenuItem onClick={this.openPopup}>\n            <ListItemIcon><Icon.FullResolution/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Render Full Resolution</StyledLabel>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={this.closeAll} style={{paddingTop: '2em', paddingBottom: '2em'}}>\n            <ListItemIcon><Icon.Back/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Close</StyledLabel>\n          </StyledMenuItem>\n        </List>\n        <Box>\n          {this.state.menu === Menu.Algorithm ? <AlgorithmSettings onClose={this.closeAll}/>\n          : this.state.menu === Menu.Color ? <ColorSettings onClose={this.closeAll}/>\n          : this.state.menu === Menu.View ? <ViewSettings onClose={this.closeAll}/>\n          : null}\n        </Box>\n        \n      </StyledSwipeableDrawer>\n      <FullResolution open={this.state.popup} onClose={this.closePopup}/>\n      </>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({\n    open: state.ui.modal === Modal.Menu,\n  }),\n  (dispatch: Dispatch) => ({\n    setModal: (modal: Modal) => dispatch(setModal(modal))\n  })\n)(SettingsDrawer)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState } from '../../store/types';\nimport * as ColorTypes from '../../store/color/types';\nimport { update as updateColor, addScheme } from '../../store/color/actions';\nimport { setCanvasAction } from '../../store/ui/actions';\nimport { CanvasAction } from '../../store/ui/types';\nimport { ColorPreview, SettingsContainer } from '../../components';\nimport CustomColor from './CustomColor';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Popover from '@material-ui/core/Popover';\nimport Slider from '@material-ui/core/Slider';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\n\n\n\ntype Props = {\n  current: ColorTypes.State,\n  updateColor: (update: Partial<ColorTypes.State>) => void\n  addScheme: (k: string, colors: string[]) => void\n  onClose?: () => void\n}\n\n\ntype Evt = any\n\nclass ColorSettings extends React.Component<Props> {\n  state: {\n    scheme: ColorTypes.SchemeName,\n    reverse: boolean,\n    skew: number,\n    adaptiveScale: boolean,\n    customPopup: boolean,\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      scheme: props.current.scheme,\n      reverse: props.current.reverse,\n      skew: props.current.skew,\n      adaptiveScale: props.current.adaptiveScale,\n      customPopup: false,\n    }\n  }\n\n  openCustomPopup = () => this.setState({customPopup: true})\n  closeCustomPopup = () => this.setState({customPopup: false})\n\n  setScheme(scheme: string) {\n    this.setState({scheme});\n  }\n\n  changeReverse = (evt: Evt) => this.setState({reverse: evt.target.checked});\n  changeSkew = (evt: Evt, skew: number | number[]) => this.setState({skew});\n\n  changeAdaptiveScale = (evt: Evt) => this.setState({adaptiveScale: evt.target.checked})\n\n  selectScheme = (evt: any) => {\n    const scheme = evt.target.value;\n    if (scheme === 'CUSTOM') {\n      this.openCustomPopup();\n    } else {\n      this.setScheme(scheme);\n    }\n  }\n\n  hasChanged = () => {\n    if (this.state.scheme !== this.props.current.scheme\n      || this.state.reverse !== this.props.current.reverse\n      || this.state.adaptiveScale !== this.props.current.adaptiveScale\n      || this.state.skew !== this.props.current.skew) {\n      return true;\n    }\n    return false;\n  }\n\n  saveScheme = (k: string, colors: string[]) => {\n    this.props.addScheme(k, colors);\n    this.setScheme(k);\n  }\n\n  apply = () => {\n    this.props.updateColor({\n      scheme: this.state.scheme,\n      reverse: this.state.reverse,\n      skew: this.state.skew,\n      adaptiveScale: this.state.adaptiveScale,\n    });\n    if (this.props.onClose) {\n      this.props.onClose()\n    }\n  }\n\n  revert = () => {\n    this.setState({\n      scheme: this.props.current.scheme,\n      reverse: this.props.current.reverse,\n      skew: this.props.current.skew,\n    })\n  }\n\n  render() {\n    return (\n      <>\n        <SettingsContainer>\n          <Box m={1}>\n            <Box m={1}>\n              <TextField select\n                size=\"small\"\n                label=\"Scheme\"\n                value={this.state.scheme}\n                onChange={this.selectScheme}\n              >\n                <MenuItem value=\"CUSTOM\">CREATE NEW SCHEME</MenuItem>\n                {this.props.current.schemeList.sort().map(k => (\n                  <MenuItem key={k} value={k}>{k}</MenuItem>\n                ))}\n                {Object.keys(this.props.current.customSchemes).sort().map(k => (\n                  <MenuItem key={k} value={k}>{k}</MenuItem>\n                ))}\n              </TextField>\n            </Box>\n            <Box m={2}>\n              <FormControlLabel\n                label=\"Reversed\"\n                control={\n                  <Switch checked={this.state.reverse}\n                    onChange={this.changeReverse}\n                    edge=\"end\"\n                  />\n                }\n              />\n            </Box>\n\n            <Box m={2}>\n              <FormControlLabel\n                label=\"Adaptive Scale\"\n                control={\n                  <Switch checked={this.state.adaptiveScale}\n                    onChange={this.changeAdaptiveScale}\n                    edge=\"end\"\n                  />\n                }\n              />\n            </Box>\n\n            <Box m={2} style={this.state.adaptiveScale ? {display: 'none'} : {}}>\n              <FormControl fullWidth>\n                <InputLabel shrink>Skew</InputLabel>\n                <Slider\n                  color=\"secondary\"\n                  value={this.state.skew}\n                  onChange={this.changeSkew}\n                  min={-5}\n                  max={5}\n                  step={0.1}\n                />\n              </FormControl>\n            </Box>\n\n            <Box m={1}>\n              <ColorPreview \n                style={{width: '100%', height: '4mm'}}\n                scheme={this.state.scheme}\n                customSchemes={this.props.current.customSchemes}\n                reverse={this.state.reverse}\n                skew={this.state.skew}\n                width={100}\n                height={10}\n              />\n            </Box>\n\n            <Box m={1}>\n              <ColorPreview \n                style={{width: '100%', height: '4mm'}}\n                scheme={this.props.current.scheme}\n                customSchemes={this.props.current.customSchemes}\n                reverse={this.props.current.reverse}\n                skew={this.props.current.skew}\n                width={100}\n                height={10}\n              />\n              <InputLabel>Current</InputLabel>\n            </Box>\n\n            \n            <ButtonGroup fullWidth color=\"primary\" orientation=\"vertical\">\n              <Button \n                onClick={this.apply}\n                disabled={!this.hasChanged()}\n              >Apply</Button>\n              <Button\n                onClick={this.revert}\n                disabled={!this.hasChanged()}\n              >Reset</Button>\n            </ButtonGroup>\n\n          </Box>\n        </SettingsContainer>\n\n        <Popover\n          open={this.state.customPopup}\n          onClose={this.closeCustomPopup}\n        >\n          <Box m={2}>\n            <CustomColor\n              onSave={this.saveScheme}\n              onClose={this.closeCustomPopup}\n              takenNames={[\n                ...this.props.current.schemeList,\n                ...Object.keys(this.props.current.customSchemes)\n              ]}\n            />\n          </Box>\n        </Popover>\n      </>\n    )\n  }\n}\n\nexport default connect(\n  (state: AppState) => ({\n    current: {...state.color},\n  }),\n  (dispatch) => ({\n    updateColor: (updates: Partial<ColorTypes.State>) => {\n      dispatch(updateColor(updates));\n      dispatch(setCanvasAction(CanvasAction.Color));\n    },\n    addScheme: (k: string, colors: string[]) => {\n      dispatch(addScheme(k, colors));\n    },\n  }),\n)(ColorSettings);","import {\n  UPDATE,\n  ADD_SCHEME,\n  State,\n  Update,\n  AddScheme,\n} from './types';\n\n\nexport const update = (color: Partial<State>): Update => ({\n  type: UPDATE,\n  payload: color,\n})\n\nexport const addScheme = (name: string, colors: string[]): AddScheme => ({\n  type: ADD_SCHEME,\n  payload: {name, colors}\n})\n","export const ADD_SCHEME = 'COLOR_ADD_SCHEME';\nexport const UPDATE = 'COLOR_UPDATE';\n\nexport type SchemeName = string\n\nexport type State = {\n  scheme: SchemeName,\n  reverse: boolean,\n  skew: number,\n  adaptiveScale: boolean,\n  schemeList: string[],\n  customSchemes: {[k: string]: string[]}\n}\n\nexport type Update = {\n  type: typeof UPDATE,\n  payload: Partial<State>,\n}\n\nexport type AddScheme = {\n  type: typeof ADD_SCHEME,\n  payload: {\n    name: string,\n    colors: string[],\n  }\n}\n\nexport type Action = Update | AddScheme","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState } from '../../store/types';\nimport { State as ViewState } from '../../store/view/types';\nimport * as ViewActions from '../../store/view/actions';\nimport { startDrawing } from '../../store/ui/actions';\nimport { NumberInput, SettingsContainer } from '../../components';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\n\ntype Props = {\n  current: ViewState\n  updateView: (update: Partial<ViewState>) => void\n  onClose?: () => void\n}\n\ntype Evt = React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n\nclass ViewSettings extends React.Component<Props> {\n  state: {\n    current: ViewState,\n  }\n  centerStep: number\n\n  constructor(props: Props) {\n    super(props);\n    this.centerStep = 10 / this.props.current.ppu;\n    this.state = {\n      current: {...props.current},\n    }\n  }\n\n  hasChanged = () => {\n    for (const k in this.props.current) {\n      if (this.props.current[k] !== this.state.current[k]) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  apply = () => {\n    let {h, ppu, ...rest} = this.state.current;\n    this.props.updateView({h, ppu, ...rest});\n    if (this.props.onClose) {\n      this.props.onClose()\n    }\n  }\n\n  revert = () => {\n    this.setState({current: {...this.props.current}});\n  }\n\n  setCurrent(x: Partial<ViewState>) {\n    this.setState({current: {...this.state.current, ...x}});\n  }\n\n  setCX = (evt: Evt) => this.setCurrent({cx: +evt.target.value});\n  setCY = (evt: Evt) => this.setCurrent({cy: +evt.target.value});\n  setW = (evt: Evt) => this.setCurrent({w: +evt.target.value});\n  setH = (evt: Evt) => this.setCurrent({h: +evt.target.value});\n  setPPU = (evt: Evt) => this.setCurrent({ppu: +evt.target.value});\n  setPreviewPixels = (evt: Evt) => this.setCurrent({previewPixels: +evt.target.value});\n\n\n  render() {\n    return (\n      <SettingsContainer\n      >\n        <Box m={1}>\n        <Box m={1}>\n          <InputLabel>Full Resolution</InputLabel>\n          <Grid container spacing={1}>\n            <Grid item xs={6}>\n              <NumberInput\n                fullWidth={false}\n                label=\"Width\"\n                value={+this.state.current.w} \n                onChange={this.setW}\n                step={1}\n                min={1}\n                inputProps={{style: {maxWidth: '5em'}}}\n              />\n            </Grid>\n            <Grid item xs={6}>\n              <NumberInput\n                fullWidth={false}\n                label=\"Height\" \n                value={+this.state.current.h} \n                onChange={this.setH} \n                step={1}\n                min={1}\n                inputProps={{style: {maxWidth: '5em'}}}\n              />\n            </Grid>\n          </Grid>\n\n          <Box>\n            <NumberInput\n              label=\"Preview pixel count\"\n              value={+this.state.current.previewPixels} \n              onChange={this.setPreviewPixels} \n              step={10000}\n              min={10000}\n            />\n          </Box>\n\n          <Box>\n            <NumberInput\n              label=\"Center x-coordinate\"\n              value={+this.state.current.cx} \n              onChange={this.setCX} \n              step={this.centerStep}\n            />\n          </Box>\n\n          <Box>\n            <NumberInput\n              label=\"Center y-coordinate\"\n              value={+this.state.current.cy} \n              onChange={this.setCY} \n              step={this.centerStep}\n            />\n          </Box>\n\n          <Box>\n            <NumberInput\n              label=\"Scale (pixels per unit)\"\n              value={+this.state.current.ppu} \n              onChange={this.setPPU} \n              step={10}\n              min={0}\n            />\n          </Box>\n\n          <ButtonGroup fullWidth color=\"primary\" orientation=\"vertical\">\n            <Button \n              onClick={this.apply}\n              disabled={!this.hasChanged()}\n            >Apply</Button>\n            <Button\n              onClick={this.revert}\n              disabled={!this.hasChanged()}\n            >Reset</Button>\n\n          </ButtonGroup>\n        </Box>\n      </Box>\n      </SettingsContainer>\n    )\n  }\n  \n}\n\nexport default connect(\n  (state: AppState) => ({\n    current: state.view,\n  }),\n  (dispatch) => ({\n    updateView: (update: Partial<ViewState>) => {\n      dispatch(ViewActions.update(update));\n      dispatch(startDrawing());\n    },\n  })\n)(ViewSettings)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { startDrawing } from '../../store/ui/actions';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\n\ntype Props = {\n  open: boolean\n  onClose: () => void\n  startDrawing: (fullRes?: boolean) => void\n}\n\nconst FullResolutionPopup = (props: Props) => {\n  const drawFull = () => {\n    props.startDrawing(true);\n    props.onClose();\n  }\n\n  return (\n    <Popover \n      open={props.open} \n      onClose={props.onClose}\n      anchorOrigin={{\n        vertical: 'center',\n        horizontal: 'center',\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'center',\n      }}\n    >\n      <Box m={2}>\n        <Box m={1}>\n          <Typography>\n            Are you sure you want to render in full resolution?\n            This may take a long time.\n          </Typography>\n        </Box>\n      <ButtonGroup\n        fullWidth\n        color=\"primary\"\n        variant=\"outlined\">\n        <Button onClick={drawFull}>\n          Yes! Render in full resolution\n        </Button>\n        <Button onClick={props.onClose} >\n          Cancel\n        </Button>\n      </ButtonGroup>\n      </Box>\n    </Popover>\n  )\n}\n\n\nexport default connect(\n  null,\n  (dispatch: any) => ({\n    startDrawing: (fullResolution: boolean=false) => dispatch(startDrawing(fullResolution))\n  })\n)(FullResolutionPopup);","import SettingsMenu from './SettingsMenu'\n\nexport default SettingsMenu","import React from 'react';\nimport { connect } from 'react-redux';\nimport { zoomIn, zoomOut } from '../../store/view/actions';\nimport { startDrawing } from '../../store/ui/actions';\nimport DownUpButtons, { DownUpButtonsProps } from '../../components/DownUpButtons';\nimport { Icon } from '../../components';\n\ninterface NewProps {\n  factor?: number\n  label?: string\n  fontSize?: 'small' | 'default' | 'large' | 'inherit'\n  zoomIn: (n: number) => void\n  zoomOut: (n: number) => void\n}\n\ninterface Props extends NewProps, Omit<DownUpButtonsProps, 'onUp' | 'onDown'> {}\n\nconst Zoom = ({factor=2, zoomIn, zoomOut, ...rest}: Props) => {\n  const zin = () => zoomIn(factor);\n  const zout = () => zoomOut(factor);\n  \n  return (\n    <DownUpButtons \n      {...rest}\n      onUp={zin} \n      onDown={zout} \n      downIcon={Icon.ZoomOut} \n      upIcon={Icon.ZoomIn}\n    />\n  )\n}\n\n\n\nexport default connect(\n  null,\n  (dispatch: any) => ({\n    zoomIn: (n: number) => {\n      dispatch(zoomIn(n));\n      dispatch(startDrawing());\n    },\n    zoomOut: (n: number) => {\n      dispatch(zoomOut(n));\n      dispatch(startDrawing());\n    }\n  })\n)(Zoom)","import { PixelCalculator } from './types'\nimport { colorScale } from './colors';\n\n\nfunction linearScale(domain: [number, number], range: [number,number]) {\n  const m = (range[1] - range[0]) / (domain[1] - domain[0])\n  const b = range[0] - m*domain[0]\n  return (n: number) => m*n + b;\n}\n\n\nclass CanvasDrawer {\n  canvas: HTMLCanvasElement\n  values: {[k: number]: [number, number][]}\n  scale: number\n  size: {w: number, h: number}\n\n  constructor(size: {\n    w: number\n    h: number\n  }) {\n    this.size = size\n    this.canvas = document.createElement('canvas');\n    this.values = {};\n    this.scale = 1;\n    this.resize();\n  }\n\n  attach(canvas: HTMLCanvasElement) {\n    this.canvas = canvas;\n    this.resize();\n    this.clear();\n  }\n\n  resize(size?: {w: number, h: number}) {\n    if (size) {\n      this.size = {...this.size, ...size}\n      this.resize()\n    } else {\n      this.canvas.width = this.size.w * this.scale;\n      this.canvas.height = this.size.h * this.scale;\n    }\n  }\n\n  clear() {\n    const ctx = this.canvas.getContext('2d');\n    if (ctx) ctx.clearRect(0, 0, this.size.w, this.size.h);\n    this.values = {};\n  }\n\n  _setValue(x: number, y: number, value: number) {\n    if (!this.values[value]) this.values[value] = [];\n    this.values[value].push([x, y]);\n  }\n\n  calculatePixels(f: PixelCalculator, x: [number,number], y: [number,number]) {\n    this.values = {};\n    const {w, h} = this.size;\n    const xscale = linearScale([0, w], x);\n    const yscale = linearScale([h, 0], y);\n    for (let r = 0; r < h; r++) {\n      const y = yscale(r);\n      for (let c = 0; c < w; c++) {\n        const x = xscale(c);\n        this._setValue(c, r, f(x, y))\n      }\n    }\n  }\n\n  changeIterations(f: PixelCalculator, x: [number,number], y: [number,number], iterations: number) {\n    const tocalc: [number,number][] = [];\n    const max = Math.max(...Object.keys(this.values).map(n => +n));\n    if (max < iterations) {\n      tocalc.push(...this.values[max])\n      this.values[max] = [];\n    } else if (max > iterations) {\n      for (const v in this.values) {\n        if (+v > iterations) {\n          this.values[iterations].push(...this.values[v]);\n          this.values[v] = [];\n        }\n      }\n    }\n    if (tocalc.length) {\n      const {w, h} = this.size;\n      const xscale = linearScale([0, w], x);\n      const yscale = linearScale([h, 0], y);\n      for (const [r, c] of tocalc) {\n        this._setValue(c, r, f(xscale(r), yscale(c)))\n      }\n    }\n  }\n\n  _applyColors(cmap: (n: number) => string) {\n    const ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n    if (this.scale !== 1) {\n      ctx.setTransform(this.scale, 0, 0, this.scale, 0, 0)\n    }\n    ctx.clearRect(0, 0, this.size.w, this.size.h)\n    for (const value in this.values) {\n      ctx.beginPath();\n      for (const pt of this.values[value]) {\n        ctx.rect(pt[0], pt[1], 1, 1);\n      }\n      ctx.fillStyle = cmap(+value);\n      ctx.fill();\n    }\n  }\n\n  \n  colorPixels(colors: Parameters<typeof colorScale>[0], domain: [number,number] | 'auto'='auto') {\n    if (domain === 'auto') {\n      const vals = Object.keys(this.values).map(n => +n);\n      domain = [Math.min(...vals), Math.max(...vals)]\n    }\n    this._applyColors(colorScale(colors).scale(domain))\n  }\n\n}\n\nexport default CanvasDrawer;","import { FractalInterface, ControlProps } from '../../types'\n\n\n// create, settings, controls, random?\n\n\nexport function controls<T>(x: ControlProps[]=[]): Pick<FractalInterface<T>,'controls'> {\n  return {controls: x as ControlProps[]};\n}\n\nexport function settings<T>(x: any[]=[]): Pick<FractalInterface<T>,'settings'> {\n  return {settings: x};\n}","import { Complex } from './math/types';\nimport { abs2 } from './math/complex';\n\n\nexport default function(bound: number, iterations: number) {\n  const b2 = bound * bound;\n  return (\n    f: (n: Complex) => Complex,\n    z0: Complex = {re: 0, im: 0}, \n  ) => {\n    let k = 0;\n    let z = z0;\n    while (k < iterations) {\n      k += 1;\n      z = f(z);\n      if (abs2(z) > b2) break;\n    }\n    return k;\n  }\n}","\ntype NumberOpts = {\n  fixed?: number\n  round?: number\n  sign?: boolean\n}\n\nexport function num(n: number, {\n  sign,\n  fixed=6\n}: NumberOpts={}): string {\n  if (sign && !(n < 0)) {\n    return '+' + num(n, {fixed})\n  }\n  if (fixed) {\n    return (+(n.toFixed(fixed))).toString()\n  }\n  return n.toString()\n}\n\n\n\nexport function rounder(p: number) {\n  const d = Math.pow(10, p);\n  return (n: number) => Math.round(n * d) / d;\n}\n\n\n\nexport function science(n: number, p: number=4) {\n  const a = n.toPrecision(4);\n  const b = a.split('e')\n  if (b.length === 1) {\n    return a;\n  } else {\n    return b[0] + '\\\\times 10^{' + b[1] + '}'\n  }\n}","import { FractalInterface, Complex, ControlProps } from '../../types'\nimport { StringOrMath } from '../../../components/TextWithMath';\nimport { complex } from '../../math/complex';\nimport escapeTime from '../../escapeTime';\nimport { num } from '../../formatting';\nimport { settings, controls } from './base';\n\n\nexport interface EscapeParams {\n  bound: number\n  iterations: number\n}\n\nconst DefaultEscapeParams: EscapeParams ={\n  bound: 10,\n  iterations: 20,\n}\n\nexport function create<T>(x: () => T): Pick<FractalInterface<T & EscapeParams>,'create'> {\n  return {create: () => ({...DefaultEscapeParams, ...x()})};\n}\n\nexport function pixel<T>(\n    f: (p: T) => (c: Complex) => (z: Complex) => Complex,\n    z0: 0 | 'c' | ((p: T) => (c: Complex) => Complex)=0,\n): Pick<FractalInterface<T & EscapeParams>,'pixel'> {\n  if (z0 === 0) {\n    return ({pixel: (p: T & EscapeParams) => {\n      const func = f(p)\n      return (x: number, y: number) => {\n        return escapeTime(p.bound, p.iterations)(func(complex(x, y)))\n      };\n    }});\n  }\n  if (z0 === 'c') {\n    return ({pixel: (p: T & EscapeParams) => {\n      const func = f(p)\n      return (x: number, y: number) => {\n        return escapeTime(p.bound, p.iterations)(func(complex(x, y)), complex(x, y))\n      };\n    }});\n  }\n  return ({pixel: (p: T & EscapeParams) => {\n    const func = f(p)\n    const zz = z0(p)\n    return (x: number, y: number) => {\n      return escapeTime(p.bound, p.iterations)(func(complex(x, y)), zz(complex(x, y)))\n    };\n  }});\n}\n\nexport function description<T>(\n    f: (p: T & EscapeParams) => string,\n    z0: 0 | 'c' | ((p: T & EscapeParams) => string)=0,\n): Pick<FractalInterface<T & EscapeParams>,'description'> {\n  return {\n    description: (p: T & EscapeParams) => describeEscapeFunction(\n      f(p),\n      z0 === 0 ? '0' : z0 === 'c' ? 'x+yi' : z0(p),\n      p.bound,\n      p.iterations,\n    ),\n  }\n}\n\nexport function formula<T>(\n  f: (p: T) => string,\n): Pick<FractalInterface<T>,'formula'> {\n  return ({formula: (p: T) => ({math: f(p)})});\n}\n\nexport function escape<T>(props: {\n  label: string,\n  f: (p: T) => (c: Complex) => (z: Complex) => Complex,\n  latexF: (p: T & EscapeParams) => string,\n  z0?: 0 | 'c' | ((p: T) => (c: Complex) => Complex),\n  latexZ0?: 0 | 'c' | ((p: T) => string),\n  create: () => T,\n  settings?: any[],\n  controls?: ControlProps[]\n}): FractalInterface<T & EscapeParams> {\n  return {\n    label: props.label,\n    ...pixel(props.f, props.z0),\n    ...description(props.latexF, props.latexZ0),\n    ...formula(props.latexF),\n    ...create(props.create),\n    ...settings(props.settings),\n    ...controls(props.controls),\n  }\n}\n\n\nexport function describeEscapeFunction(\n  f: string, \n  z0: string, \n  bound: number, \n  iterations: number,\n): StringOrMath[] {\n\n  const fmla = (\n    '\\\\begin{aligned}'\n    + 'z_0 &= ' + z0\n    + '\\\\\\\\' \n    + 'z_{n+1} &= ' + f.replace(/z/g, 'z_n')\n    + '\\\\end{aligned}'\n  );\n\n  return [\n    {math: fmla, displayMode: true},\n    \"The color of the pixel located at \", {math: \"(x, y)\"},\n    \" corresponds to \", {math: \"k\"}, \", where \", {math: \"z_k\"},\n    \" is the first term of the above sequence such that \",\n    {math: `|z_k| > ${num(bound)}`},\n    \". If this does not occur in the first \", {math: num(iterations)},\n    \" terms of the sequence, then \", {math: \"k = \" + num(iterations)}, '.',\n  ]\n}","import { FractalInterface, Complex, ControlProps } from '../../types'\nimport { complex } from '../../math/complex';\nimport escapeTime from '../../escapeTime';\nimport { settings, controls } from './base';\nimport { EscapeParams, description as _description, formula, create } from './escape';\n\n\nexport function label<T>(f: string): Pick<FractalInterface<T>,'label'> {\n  return ({label: ['Julia (', {math: f}, ')']})\n}\n\nexport function pixel<T extends EscapeParams>(\n  f: (p: T) => (z: Complex) => Complex,\n): Pick<FractalInterface<T>,'pixel'> {\n  return ({pixel: (p: T) => {\n    const func = f(p)\n    return (x: number, y: number) => {\n      return escapeTime(p.bound, p.iterations)(func, complex(x, y))\n    };\n  }});\n}\n\nexport function description<T extends EscapeParams>(\n  f: (p: T) => string\n): Pick<FractalInterface<T>,'description'> {\n  return _description<T>(f, 'c')\n}\n\nexport function julia<T>(props: {\n  f: (p: T & EscapeParams) => (z: Complex) => Complex,\n  label: string,\n  latexF: (p: T & EscapeParams) => string,\n  create: () => T,\n  settings?: any[],\n  controls?: ControlProps[],\n}): FractalInterface<T & EscapeParams> {\n  return {\n    ...label(props.label),\n    ...pixel(props.f),\n    ...description(props.latexF),\n    ...formula(props.latexF),\n    ...create(props.create),\n    ...settings(props.settings),\n    ...controls(props.controls),\n  }\n}\n\nexport function noParam(props: {\n  f: (z: Complex) => Complex,\n  latexF: string,\n  settings?: any[],\n  controls?: ControlProps[],\n}): FractalInterface<EscapeParams> {\n  return {\n    ...julia({\n        f: () => props.f,\n        label: props.latexF,\n        latexF: () => props.latexF,\n        create: () => ({}),\n        settings: props.settings,\n        controls: props.controls,\n    }),\n  }\n}","\nexport function isInt(n: number) {\n  return n % 1 === 0;\n}\n","import { Complex, ControlType, ControlProps } from '../types';\nimport * as mix from './mixers';\nimport {\n  add,\n  powInt,\n  powFloat,\n} from '../math/complex';\nimport { R as Math } from '../math';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\n\nexport interface BurningShipParams { k: number }\n\nfunction absabs(z: Complex) {\n  return {re: Math.abs(z.re), im: Math.abs(z.im)};\n}\n\nexport const BurningShip1 = mix.escape.escape<BurningShipParams>({\n  label: 'Burning Ship',\n  latexF: (p: BurningShipParams) => `\\\\left(|Re(z)|+|Im(z)|\\\\right)^{${num(p.k)}}+x-yi`,\n  f: (p: BurningShipParams) => {\n    const k = p.k;\n    if (isInt(k)) {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powInt(absabs(z), k), cc);\n      }\n    } else {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powFloat(absabs(z), k), cc);\n      }\n    }\n  },\n  create: () => ({k: 2}),\n  controls: [\n    {\n      type: ControlType.Number,\n      label: 'exponent (k)',\n      param: 'k',\n      step: 1,\n      min: 0,\n    }\n  ] as ControlProps[],\n})\n\n\n\nconst BurningShip2 = mix.escape.escape<BurningShipParams>({\n  label: 'Burning Ship II',\n  latexF: (p: BurningShipParams) => `\\\\left(|Re(z)|+|Im(z)|\\\\right)^{${num(p.k)}}+x-yi`,\n  f: (p: BurningShipParams) => {\n    const k = p.k;\n    if (isInt(k)) {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powInt(absabs(z), k), cc);\n      }\n    } else {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powFloat(absabs(z), k), cc);\n      }\n    }\n  },\n  create: () => ({k: 2}),\n  controls: [\n    {\n      type: ControlType.Number,\n      label: 'exponent (k)',\n      param: 'k',\n      step: 1,\n      min: 0,\n    }\n  ] as ControlProps[],\n})\n\n","import { Complex, ControlType } from '../types';\nimport * as mix from './mixers';\nimport {\n  complex,\n  add,\n  powInt,\n  powFloat,\n  exp,\n  sqrt,\n  sinh,\n  mult,\n} from '../math/complex';\nimport { R as Math } from '../math';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\nfunction randomC() {\n  let angle = Math.PI -2 * Math.asin(Math.pow(Math.random(), 0.9));\n  if (Math.random() < 0.5) angle = 2*Math.PI-angle;\n  const radius = 0.3 + Math.sin(angle / 2) * 0.6 * (Math.random() * 0.4 + 0.8);\n  return [\n    Math.round(radius * Math.cos(angle) * 1000) / 1000,\n    Math.round(radius * Math.sin(angle) * 1000) / 1000,\n  ] as [number, number]\n}\n\nexport interface JuliaKCParams {\n  k: number\n  c: [number, number]\n}\n\nexport const Julia1KC = {\n  ...mix.julia.julia<JuliaKCParams>({\n    label: 'z^k+c',\n\n    f: (p: JuliaKCParams) => {\n      const cc = complex(p.c[0], p.c[1])\n      const {k} = p;\n      if (isInt(p.k)) {\n        return (z: Complex) => add(powInt(z, k), cc);\n      } else {\n        return (z: Complex) => add(powFloat(z, k), cc);\n      } \n    },\n\n    latexF: (p: JuliaKCParams) => `z^{${num(p.k)}}${num(p.c[0],{sign:true})}${num(p.c[1],{sign:true})}i`,\n\n    create: () => ({k: 2, c: randomC()}),\n\n    controls: [\n      {\n        type: ControlType.Call,\n        icon: 'Random',\n        //label: 'random',\n        onCall: () => ({c: randomC()}),\n      },\n      {\n        type: ControlType.Complex,\n        label: 'seed (c)',\n        param: 'c',\n        stepRadius: 0.05,\n        stepAngle: 0.1,\n      },\n      {\n        type: ControlType.Number,\n        label: 'exponent (k)',\n        param: 'k',\n        step: 1,\n      },\n      {\n        type: ControlType.Number,\n        label: 'bound',\n        param: 'bound',\n        step: 5,\n        min: 0,\n      }\n    ],\n\n    settings: [],\n  }),\n};\n\n\nexport const Julia2 = mix.julia.noParam({\n  latexF: 'e^{z^3}-0.6',\n  f: (z: Complex) => add(exp(powInt(z, 3)), complex(-0.6, 0)),\n})\n\nexport const Julia3 = mix.julia.noParam({\n  latexF: '\\\\sqrt{\\\\sinh(z^2)}+0.06+0.12i',\n  f: (z: Complex) => add(sqrt(sinh(mult(z, z))), complex(0.06, 0.12)),\n})\n\n\n","import { Complex, ControlType } from '../types';\nimport * as mix from './mixers';\nimport {\n  add,\n  powInt,\n  powFloat,\n  multReal,\n  addReal,\n  div,\n  mult,\n} from '../math/complex';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\n\nexport interface MagnetParams {\n  k: number,\n}\n\nexport const Magnet1 = mix.escape.escape<MagnetParams>({\n  label: 'Magnet Type I',\n\n  f: ({k}: MagnetParams) => {\n    const pow = isInt(k) && k > 0 ? powInt : powFloat\n    return (c: Complex) => {\n      //const c = complex(x, y);\n      const a = addReal(c, -1);\n      const b = addReal(c, -2);\n      return (z: Complex) => pow(div(\n        add(powInt(z, 2), a),\n        add(multReal(z, 2), b)\n      ), k)\n    }\n  },\n\n  latexF: ({k}: MagnetParams) => '\\\\left(\\\\frac{z^2 + x+yi - 1}{2z + x+yi - 2}\\\\right)^{' + num(k) + '}',\n\n  create: () => ({k: 2}),\n\n  controls: [\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'exponent',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 5,\n      min: 0,\n    },\n  ],\n})\n\nexport interface Magnet2Params {k: number}\n\nexport const Magnet2 = mix.escape.escape<Magnet2Params>({\n  label: 'Magnet Type II',\n\n  create: () => ({k: 2}),\n\n  f: ({k}: Magnet2Params) => {\n    const pow = isInt(k) && k > 0 ? powInt : powFloat\n    return (c: Complex) => {\n      //const c = complex(x, y);\n      const a = addReal(c, -1);\n      const b = addReal(c, -2);\n      const a3 = multReal(a, 3);\n      const b3 = multReal(b, 3);\n      const ab = mult(a, b)\n      return (z: Complex) => pow(div(\n        add(add(powInt(z, 3), mult(a3, z)), ab),\n        add(add(multReal(powInt(z, 2), 3), mult(b3, z)), addReal(ab, 1))\n      ), k)\n    }\n  },\n\n  latexF: ({k}: Magnet2Params) => ('\\\\left(\\\\frac' \n  + '{z^3 + 3(x+yi-1)z + (x+yi-1)(x+yi-2)}' \n  + '{3z^2 + 3(x+yi-2)z + (x+yi-1)(x+yi-2) + 1}' \n  + '\\\\right)^{' + num(k) + '}'\n  ),\n\n  controls: [\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'exponent',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 5,\n      min: 0,\n    },\n  ]\n})","import { Complex, ControlType, FractalInterface } from '../types';\nimport { EscapeParams, describeEscapeFunction } from './mixers/escape';\nimport * as mix from './mixers';\nimport {\n  complex,\n  add,\n  multReal,\n  abs2,\n  powInt,\n  powFloat,\n} from '../math/complex';\nimport { R as Math } from '../math';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\nfunction randomParams() {\n  return {scale: Math.round(Math.random() * 20)/10 + 2}\n}\n\n\nfunction f1(n: number) {\n  if (n > 1) return 2 - n;\n  else if (n < -1) return -2 -n;\n  else return n;\n}\n\n\n\nconst f1latex = (\n  'f_{\\\\mathbb{R}\\\\mapsto\\\\mathbb{R}}(n)='\n  + '\\\\left\\\\{\\\\begin{aligned}'\n  + '2 - n & \\\\text{, if $n > 1$}\\\\\\\\'\n  + '-2 - n & \\\\text{, if $n < -1$}\\\\\\\\'\n  + 'n & \\\\text{, otherwise}\\\\\\\\'\n  + '\\\\end{aligned}\\\\right.'\n)\n\nconst f2latex = (\n  'g_{\\\\mathbb{C}\\\\mapsto\\\\mathbb{C}}(z)='\n  + 'f(Re(z))+f(Im(z))i'\n)\n\nconst f3latex = (\n  'h_{\\\\mathbb{C}\\\\mapsto\\\\mathbb{C}}(z)='\n  + '\\\\left\\\\{\\\\begin{aligned}'\n  + '4z & \\\\text{, if $|z|<0.5$}\\\\\\\\'\n  + 'z \\\\div |z|^2 & \\\\text{, if $0.5 \\\\leq |z| < 1$}\\\\\\\\'\n  + 'z & \\\\text{, otherwise}\\\\\\\\'\n  + '\\\\end{aligned}\\\\right.'\n)\n\n\n\n\nexport interface MandelboxParams {scale: number}\n\nexport const Mandelbox1: FractalInterface<MandelboxParams & EscapeParams> = ({\n  label: 'Mandelbox',\n\n  ...mix.escape.pixel(\n    ({scale}: MandelboxParams) => (c: Complex) => (z: Complex) => {\n      let z1 = complex(f1(z.re), f1(z.im))\n      let abs2z1 = abs2(z1)\n      if (abs2z1 < 0.25) {\n        return add(multReal(z1, 4*scale), c)\n      } else if (abs2z1 < 1) {\n        return add(multReal(z1, scale/abs2z1), c)\n      } else {\n        return add(multReal(z1, scale), c)\n      }\n    }\n  ),\n\n  ...mix.escape.create(() => ({scale: 2.2})),\n  ...mix.base.settings(),\n\n  formula: ({scale}: MandelboxParams) => ['Mandelbox (', num(scale), ')'],\n\n  description: ({scale, bound, iterations}: MandelboxParams & EscapeParams) => [\n    {math: f1latex, displayMode: true},\n    {math: f2latex, displayMode: true},\n    {math: f3latex, displayMode: true},\n    ...describeEscapeFunction(\n      num(scale) + '\\\\cdot h(g(z))+x+yi',\n      '0',\n      bound,\n      iterations,\n    )\n  ],\n\n  ...mix.base.controls([\n    {\n      type: ControlType.Call,\n      icon: 'Random',\n      onCall: () => randomParams(),\n    },\n    {\n      type: ControlType.Number,\n      param: 'scale',\n      label: 'scale',\n      step: 0.1,\n      min: 0\n    },\n  ])\n\n});\n\n\n\ninterface Mandelbox2Params {\n  k: number,\n  scale: number,\n}\n\nexport const Mandelbox2BurningShip: FractalInterface<Mandelbox2Params & EscapeParams> = ({\n  label: 'Mandelbox/Burning Ship Mashup',\n\n  ...mix.escape.pixel(\n    ({scale, k}: Mandelbox2Params) => {\n      const pow = isInt(k) && k > 0 ? powInt : powFloat\n      return (c: Complex) => (z: Complex) => {\n        let z1 = multReal(pow(complex(Math.abs(z.re), Math.abs(z.im)), k), 1/scale);\n        z1 = complex(f1(z1.re), f1(z1.im))\n        let abs2z1 = abs2(z1)\n        if (abs2z1 < 0.25) {\n          return add(multReal(z1, 4*scale), c)\n        } else if (abs2z1 < 1) {\n          return add(multReal(z1, scale/abs2z1), c)\n        } else {\n          return add(multReal(z1, scale), c)\n        }\n      }\n    }\n  ),\n\n  ...mix.escape.create(() => ({scale: 2.2, k: 2, bound: 50})),\n  ...mix.base.settings(),\n\n  formula: ({scale,k}: Mandelbox2Params) => ['MandelShipBox (', num(scale), ',', num(k), ')'],\n\n  description: ({scale, k, bound, iterations}: Mandelbox2Params & EscapeParams) => [\n    'This follows the same algorithm as the Mandelbox fractal, but first applies the function ',\n    {\n      math: `z \\\\mapsto \\\\left(|Re(z)|+|Im(z)|\\\\right)^{${num(k)}} \\\\div ${num(scale)}`,\n      displayMode: true,\n    }\n  ],\n\n  ...mix.base.controls([\n    {\n      type: ControlType.Call,\n      icon: 'Random',\n      onCall: () => ({scale: Math.round(Math.random() * 100)/100 + 0.5})\n    },\n    {\n      type: ControlType.Number,\n      param: 'scale',\n      label: 'scale',\n      step: 0.1,\n      //min: 0\n    },\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'k',\n      step: 0.1,\n      //min: 0\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 10,\n      min: 0,\n    }\n  ])\n\n});","import { Complex, ControlType } from '../types';\nimport * as mix from './mixers';\nimport {\n  add,\n  powInt,\n  powFloat,\n} from '../math/complex';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\n\nexport interface MandelbrotParams { k: number }\n\nexport const Mandelbrot = mix.escape.escape<MandelbrotParams>({\n  label: 'Mandelbrot',\n  latexF: (p: MandelbrotParams) => `z^{${num(p.k)}}+x+yi`,\n  f: (p: MandelbrotParams) => {\n    const k = p.k;\n    if (isInt(k)) {\n      return (c: Complex) => (z: Complex) => add(powInt(z, k), c);\n    } else {\n      return (c: Complex) => (z: Complex) => add(powFloat(z, k), c);\n    }\n  },\n  create: () => ({k: 2}),\n  controls: [\n    {\n      type: ControlType.Number,\n      label: 'exponent (k)',\n      param: 'k',\n      step: 1,\n      min: 0,\n    }\n  ],\n})","import { FractalInterface } from '../types';\nimport * as burningship from './burningship';\nimport * as julias from './julias';\nimport * as magnet from './magnet';\nimport * as mandelbox from './mandelbox';\nimport * as mandelbrot from './mandelbrot';\n\nconst FractalList: {[k: string]: FractalInterface<any>} = ({\n  ...burningship,\n  ...julias,\n  ...magnet,\n  ...mandelbox,\n  ...mandelbrot,\n});\n\nexport default FractalList;","import { State as AlgState } from '../store/algorithm/types';\nimport CanvasDrawer from './CanvasDrawer';\nimport FractalList from './FractalList';\n\n\n\nfunction fractal(alg: AlgState) {\n  const fr = alg.fractals[alg.current];\n  const params = alg.params;\n  return {\n    label: fr.label,\n    pixel: fr.pixel(params),\n    formula: fr.formula(params),\n    description: fr.description(params),\n    settings: fr.settings,\n    controls: fr.controls,\n  }\n}\n\n\nexport { CanvasDrawer, FractalList, fractal }\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  NumberIncrementer,\n  ComplexIncrementer,\n } from '../../components';\nimport {\n  ControlProps, ControlType, Params, \n  ControlNumber, ControlComplex, ControlCall,\n} from '../../fractals/types'\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Icon } from '../../components';\nimport { State, Dispatch } from '../../store/types';\nimport { fractal } from '../../fractals';\nimport { updateParams } from '../../store/algorithm/actions';\nimport { startDrawing } from '../../store/ui/actions';\n\n\ninterface Props {\n  controls: ControlProps[]\n  params: Params\n  onChange: (x: Params) => void\n}\n\nclass ParamControls extends React.Component<Props> {\n\n  paramUpdater = (k: string) => {\n    return (v: any) => {\n      console.log(\"setting \" + k + ' => ' + v);\n      this.props.onChange({[k]: v});\n    }\n  }\n\n  renderNumberIncrementer(x: ControlNumber) {\n    const {param} = x;\n    return (\n      <NumberIncrementer\n        controlProps={x}\n        value={this.props.params[param]}\n        onChange={this.paramUpdater(param)}\n      />\n    )\n  }\n\n  renderComplexIncrementer(x: ControlComplex) {\n    const {param} = x;\n    return (\n      <ComplexIncrementer\n        controlProps={x}\n        value={this.props.params[param]}\n        onChange={this.paramUpdater(param)}\n      />\n    )\n  }\n\n  renderCall(x: ControlCall) {\n    const {icon, label} = x;\n    if (label && icon === 'Random') {\n      return (\n        <Button\n          variant=\"outlined\"\n          color=\"inherit\"\n          size=\"small\"\n          onClick={() => this.props.onChange(x.onCall())}\n          startIcon={<Icon.Random/>}\n        >{x.label}</Button>\n      )\n    }\n    if (!label && icon === 'Random') {\n      return (\n        <IconButton onClick={() => this.props.onChange(x.onCall())}>\n          <Icon.Random/>\n        </IconButton>\n      )\n    }\n    if (label) {\n      return (\n        <Button\n          variant=\"outlined\"\n          size=\"small\"\n          onClick={() => this.props.onChange(x.onCall())}\n        >{x.label}</Button>\n      )\n    }\n  }\n\n  renderControl(x: ControlProps) {\n    if (x.type === ControlType.Number) {\n      return this.renderNumberIncrementer(x);\n    }\n    if (x.type === ControlType.Complex) {\n      return this.renderComplexIncrementer(x);\n    }\n    if (x.type === ControlType.Call) {\n      return this.renderCall(x);\n    }\n    return null;\n  }\n\n\n  render() {\n    return (\n      <>\n        {this.props.controls.map(x => this.renderControl(x))}\n      </>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({\n    controls: [...fractal(state.algorithm).controls],\n    params: {...state.algorithm.params},\n  }),\n  (dispatch: Dispatch) => ({\n    onChange: (x: Params) => {\n      dispatch(updateParams(x));\n      dispatch(startDrawing());\n    },\n  })\n)(ParamControls)","import { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types';\nimport { updateParams } from '../../store/algorithm/actions';\nimport { ControlType, ControlNumber } from '../../fractals/types';\nimport { startDrawing } from '../../store/ui/actions';\nimport { NumberIncrementer}  from '../../components';\n\nexport default connect(\n  (state: State) => ({\n    value: state.algorithm.params.iterations,\n    controlProps: {\n      type: ControlType.Number,\n      param: 'iterations',\n      label: 'iterations',\n      step: 2,\n      min: 0,\n    } as ControlNumber\n  }),\n  (dispatch: Dispatch) => ({\n    onChange: (iterations: number) => {\n      dispatch(updateParams({iterations}));\n      dispatch(startDrawing());\n    }\n  })\n)(NumberIncrementer)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from '../../store/types';\nimport { startDrawing } from '../../store/ui/actions';\nimport { recenter } from '../../store/view/actions';\nimport Button, { ButtonProps } from '@material-ui/core/Button';\nimport { Icon } from '../../components';\n\n\n\nconst RecenterButton = (props: ButtonProps) => (\n  <Button startIcon={<Icon.Recenter/>} {...props}>\n    Recenter\n  </Button>\n)\n\nexport default connect(\n  null,\n  (dispatch: Dispatch) => ({\n    onClick: () => {\n      dispatch(recenter());\n      dispatch(startDrawing());\n    }\n  }),\n)(RecenterButton)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types'; \nimport { Nav } from '../../store/ui/types';\nimport { setNav } from '../../store/ui/actions';\nimport Zoom from './Zoom';\nimport ParamControls from './ParamControls';\nimport Iterator from './Iterator';\nimport RecenterButton from './Recenter';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport { withStyles, Theme } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\ntype Props = {\n  nav: Nav,\n  setNav: (nav: Nav) => void\n}\n\nconst OuterBox = withStyles((theme: Theme) => ({\n  root: {\n    //position: 'absolute',\n    //bottom: '0',\n    width: '100%',\n    backgroundColor: theme.palette.background.default + '99',\n  }\n}))(Paper);\n\nconst CenteringBox = withStyles({\n  root: {\n    display: 'flex',\n    flexFlow: 'row wrap',\n    alignItems: 'center',\n    //height: '70px',\n    justifyContent: 'space-around',\n  }\n})(Box)\n\n\nclass Controls extends React.Component<Props> {\n\n  closeNav = () => {\n    this.props.setNav(Nav.None)\n  }\n\n  render() {\n    const parameters = this.props.nav === Nav.Params ? {} : {display: 'none'}\n    const navigation = this.props.nav === Nav.Navigate ? {} : {display: 'none'}\n    const help = this.props.nav === Nav.Help ? {padding: '1em'} : {display: 'none'}\n    return (\n      <OuterBox elevation={0}>\n        <CenteringBox style={parameters}>\n          <ParamControls/>\n        </CenteringBox>\n        <CenteringBox style={navigation}>\n          <Iterator fontSize=\"large\"/>\n          <Zoom factor={2} fontSize=\"large\" label=\"Zoom\"/>\n          <RecenterButton color=\"inherit\"/>\n        </CenteringBox>\n        <CenteringBox style={help}>\n          <Typography variant=\"caption\">\n            Double-click the fractal to re-center it.\n            Click the formula at the top of the screen for information\n            about how the current fractal was generated.\n          </Typography>\n        </CenteringBox>\n      </OuterBox>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({nav: state.ui.nav}),\n  (dispatch: Dispatch) => ({\n    setNav: (nav: Nav) => dispatch(setNav(nav)),\n  })\n)(Controls)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState, Dispatch } from '../../store/types';\nimport { State as AlgState } from '../../store/algorithm/types';\nimport { State as ColorState } from '../../store/color/types';\nimport { setCenter } from '../../store/view/actions';\nimport { setCanvasAction } from '../../store/ui/actions';\nimport { StretchMode, CanvasAction } from '../../store/ui/types';\nimport { CanvasDrawer, fractal } from '../../fractals';\nimport Box from '@material-ui/core/Box';\nimport styles from './Canvas.module.css';\n\n\ntype Props = {\n  view: {\n    w: number\n    h: number\n    ppu: number\n    cx: number\n    cy: number\n    previewPixels: number\n  }\n  color: ColorState\n  algorithm: AlgState\n  canvasAction: CanvasAction\n  stretch: StretchMode\n  setCenter: (x: number, y: number) => void\n  finishDrawing: () => void\n}\n\nclass Canvas extends React.Component<Props> {\n  drawer: CanvasDrawer\n  canvasRef: React.RefObject<HTMLCanvasElement>\n\n  isFullResolution: boolean\n\n  constructor(props: Props) {\n    super(props);\n    this.drawer = new CanvasDrawer({w: this.props.view.w, h: this.props.view.h});\n    this.canvasRef = React.createRef();\n    this.isFullResolution = false;\n  }\n\n  get canvas() {\n    return this.canvasRef.current\n  }\n\n  resize() {\n    this.drawer.resize(this.view());\n  }\n\n  view() {\n    if (this.isFullResolution) {\n      return this.props.view;\n    } else {\n      return {...this.props.view, ...scaleDown(this.props.view)}\n    }\n  }\n\n  calculateImage() {\n    const {algorithm} = this.props;\n    const view = this.view();\n    const f = fractal(algorithm).pixel;\n    const rx = view.w / view.ppu / 2;\n    const ry = view.h / view.ppu / 2;\n    this.drawer.calculatePixels(\n      f, \n      [view.cx - rx, view.cx + rx],\n      [view.cy - ry, view.cy + ry],\n    );\n  }\n\n  changeIterations() {\n    const {iterations} = this.props.algorithm.params;\n    const {algorithm} = this.props;\n    const view = this.view();\n    const f = fractal(algorithm).pixel;\n    const rx = view.w / view.ppu / 2;\n    const ry = view.h / view.ppu / 2;\n    if (iterations) {\n      this.drawer.changeIterations(\n        f, \n        [view.cx - rx, view.cx + rx],\n        [view.cy - ry, view.cy + ry],\n        iterations,\n      );\n    }\n  }\n\n  colorCanvas() {\n    if (this.props.color.adaptiveScale) {\n      this.drawer.colorPixels(this.props.color);\n    } else {\n      const {iterations} = this.props.algorithm.params;\n      this.drawer.colorPixels(this.props.color, [0, iterations]);\n    }\n  }\n\n  draw() {\n    this.resize()\n    this.calculateImage()\n    this.colorCanvas()\n    this.props.finishDrawing()\n  }\n\n  reiterate() {\n    this.changeIterations()\n    this.colorCanvas()\n    this.props.finishDrawing()\n  }\n\n  recolor() {\n    this.colorCanvas()\n    this.props.finishDrawing()\n  }\n\n  componentDidMount() {\n    if (this.canvas) {\n      this.drawer.attach(this.canvas)\n      this.isFullResolution = false;\n      this.draw()\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.canvasAction === CanvasAction.Draw) {\n      this.isFullResolution = false;\n      this.draw()\n    }\n    else if (this.props.canvasAction === CanvasAction.DrawFullResolution) {\n      this.isFullResolution = true;\n      this.draw()\n    }\n    else if (this.props.canvasAction === CanvasAction.Iterate) {\n      this.changeIterations()\n    }\n    else if (this.props.canvasAction === CanvasAction.Color) {\n      this.recolor();\n    }\n  }\n\n  centerOnClick = (evt: any) => {\n    if (this.props.setCenter) {\n      if (this.canvas) {\n        const {h, w, ppu, cx, cy} = this.props.view;\n        let {width, height} = this.canvas.getBoundingClientRect();\n        let {offsetX, offsetY} = evt.nativeEvent;\n\n        if (this.props.stretch === StretchMode.Contain) {\n          const ww = width / w;\n          const hh = height / h;\n          if (hh > ww) {\n            const imageH = h * ww;\n            offsetY -= (height - imageH) / 2\n            height = imageH\n          } else if (ww > hh) {\n            const imageW = w * hh;\n            offsetX -= (width - imageW) / 2\n            width = imageW\n          }\n        }\n\n        const pixel_x = Math.round((offsetX / width) * w);\n        const pixel_y = Math.round((offsetY / height) * h);\n        const dx = (pixel_x - (w / 2)) / ppu;\n        const dy = (pixel_y - (h / 2)) / ppu;\n        this.props.setCenter(cx + dx, cy - dy);\n      }\n    }\n  }\n\n  render() {\n    const outerClasses = [styles.Outer]\n    let objectFit: 'contain' | 'cover' | undefined\n    switch (this.props.stretch) {\n      case StretchMode.Contain:\n        objectFit = 'contain';\n        outerClasses.push(styles.Stretch);\n        break;\n      case StretchMode.Cover:\n        objectFit = 'cover';\n        outerClasses.push(styles.Stretch);\n        break;\n    }\n\n    if (this.isFullResolution) {\n      outerClasses.push(styles.FullResolution)\n    }\n    return (\n      <Box m={0} className={outerClasses.join(' ')}>\n        <div className={styles.Inner}>\n          <canvas\n            className={styles.Canvas}\n            ref={this.canvasRef}\n            onDoubleClick={this.centerOnClick}\n            style={{objectFit}}\n          />\n        </div>\n      </Box>\n    )\n  }\n}\n\n\nexport default connect(\n  (state: AppState) => ({\n    algorithm: {...state.algorithm},\n    color: state.color,\n    canvasAction: state.ui.canvasAction,\n    view: {...state.view},\n    stretch: state.ui.canvasStretch,\n  }),\n  (dispatch: Dispatch) => ({\n    setCenter: (x: number, y: number) => {\n      dispatch(setCenter(x, y));\n      dispatch(setCanvasAction(CanvasAction.Draw));\n    },\n    finishDrawing: () => dispatch(setCanvasAction(CanvasAction.None)),\n  })\n)(Canvas)\n\n\n\n\n\nfunction scaleDown({w, h, ppu, previewPixels}: {\n  w: number,\n  h: number,\n  ppu: number,\n  previewPixels: number,\n}) {\n  const pixelcount = w * h;\n  const factor = Math.min(1, Math.sqrt(previewPixels / pixelcount))\n  const result = {\n    w: Math.round(w * factor),\n    h: Math.round(h * factor),\n    ppu: Math.round(ppu * factor),\n  }\n  return result\n}","import Canvas from './Canvas';\n\n\nexport default Canvas;","import React from 'react'\nimport Canvas from './Canvas';\nimport Box from '@material-ui/core/Box';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nconst MyBox = withStyles({\n  root: {\n    position: 'relative',\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column-reverse',\n    flexGrow: 1,\n    paddingTop: '50px'\n  }\n})(Box)\n\nconst Display = () => (\n  <MyBox>\n    <Canvas/>\n  </MyBox>\n)\n\nexport default Display","import React from 'react';\nimport { connect } from 'react-redux'\nimport { State as AppState } from '../../store/types';\nimport { StretchMode } from '../../store/ui/types';\nimport { setStretch } from '../../store/ui/actions';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\ntype Props = {\n  stretch: StretchMode,\n  mode?: StretchMode,\n  setStretch: (stretch: StretchMode) => void\n}\n\nconst StretchToggle = ({stretch, setStretch, mode=StretchMode.Contain}: Props) => {\n\n  const onChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    if (evt.target.checked) setStretch(mode)\n    else setStretch(StretchMode.None)\n  }\n  return (\n    <FormControlLabel\n      label=\"Fit\"\n      labelPlacement=\"end\"\n      control={\n        <Switch\n          checked={stretch === mode}\n          onChange={onChange}\n        />\n      }\n    />\n  )\n}\n\n\nexport default connect(\n  (state: AppState) => ({stretch: state.ui.canvasStretch}),\n  (dispatch: any) => ({\n    setStretch: (mode: StretchMode) => dispatch(setStretch(mode)),\n  })\n)(StretchToggle)","import React from 'react';\nimport { connect } from 'react-redux';\nimport Katex from '../components/Katex';\nimport { State as AppState, Dispatch } from '../store/types';\nimport { setModal } from '../store/ui/actions';\nimport { Modal } from '../store/ui/types';\nimport { State as AlgState } from '../store/algorithm/types';\nimport { TextWithMath } from '../components';\nimport Box from '@material-ui/core/Box';\nimport Button, { ButtonProps } from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\nimport { fractal } from '../fractals';\n\n\nconst KatexButton = withStyles({\n  label: {textTransform: 'none'},\n})(Button)\n\nconst InfoButton_ = ({formula, ...rest}: {\n  formula: string | {math: string} | (string | {math: string})[]\n} & ButtonProps) => (\n  <KatexButton {...rest}>\n    <TextWithMath data={formula}/>\n  </KatexButton>\n)\n\nexport const InfoButton = connect(\n  (state: AppState) => {\n    const {formula} = fractal(state.algorithm);\n    return {\n      disabled: state.ui.modal === Modal.Info,\n      formula,\n    }\n  },\n  (dispatch: Dispatch) => ({\n    onClick: () => dispatch(setModal(Modal.Info))\n  })\n)(InfoButton_)\n\n\n//////////////////////////////////////////////////\n////////////////////////////////////////////////\n\n\nfunction rounder(p: number) {\n  const d = Math.pow(10, p);\n  return (n: number) => Math.round(n * d) / d;\n}\n\nfunction science(n: number, p: number=4) {\n  const a = n.toPrecision(4);\n  const b = a.split('e')\n  if (b.length === 1) {\n    return a;\n  } else {\n    return b[0] + '\\\\times 10^{' + b[1] + '}'\n  }\n}\n\ntype Props = {\n  visible: boolean,\n  anchorEl?: HTMLElement,\n  onClose: () => void,\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  algorithm: AlgState,\n}\n\n\nconst FractalInfo = (props: Props) => {\n\n  const {algorithm} = props;\n  const fractalinfo = fractal(algorithm).description;\n\n  const round = rounder(3-Math.floor(Math.log10(props.rx)))\n\n  const cx = round(props.cx)\n  const cy = round(props.cy)\n\n  const rx = science(Math.abs(props.rx))\n  const ry = science(Math.abs(props.ry))\n\n  const centerx = 'x_c = ' + cx\n  const centery = 'y_c = ' + cy\n  const domainx = '|x - x_c| \\\\leq ' + rx \n  const domainy = '|y - y_c| \\\\leq ' + ry \n\n  /*\n  const center = (\n    '\\\\begin{aligned}'\n    + centerx\n    + '\\\\\\\\' \n    + centery\n    + '\\\\end{aligned}'\n  );\n\n  const domain = (\n    //'\\\\begin{aligned}' \n    + domainx\n    //+ '\\\\\\\\' \n    + domainy\n    //+ '\\\\end{aligned}'\n  );\n  */\n\n  return (\n    <Popover\n      PaperProps={{square: true}}\n      open={props.visible}\n      onClose={props.onClose}\n      anchorEl={props.anchorEl}\n    >\n      <Box p={1.5} onClick={props.onClose}>\n        <TextWithMath data={fractalinfo}/>\n        <Typography style={{marginTop: '1em'}}>\n          The currently displayed portion of this fractal is centered\n          at <Katex math=\"(x_c, y_c)\"/>, where\n        </Typography>\n        <Katex math={centerx + '\\\\text{ and }' + centery} displayMode={true}/>\n        <Typography>\n          and plotted over <Katex math=\"(x, y)\"/> such that \n        </Typography>\n        <Katex math={domainx + '\\\\text{ and }' + domainy} displayMode={true}/>\n      </Box>\n    </Popover>\n  )\n}\n\nexport default connect(\n  (state: AppState) => {\n    const {cx, cy, ppu, w, h} = state.view;\n    const rx = w/ppu/2, ry = h/ppu/2;\n    return {\n      visible: state.ui.modal === Modal.Info,\n      cx: cx,\n      cy: cy,\n      rx: rx,\n      ry: ry,\n      algorithm: state.algorithm,\n    }\n  },\n  (dispatch: Dispatch) => ({\n    onClose: () => dispatch(setModal(Modal.None))\n  })\n)(FractalInfo)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../store/types';\nimport { setModal } from '../store/ui/actions';\nimport { Modal } from '../store/ui/types';\nimport StretchToggle from './Controls/StretchToggle';\nimport _Box from '@material-ui/core/Box';\nimport _AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Icon } from '../components'\nimport { InfoButton } from './Info';\n\n\nconst Box = withStyles({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    gap: '2em',\n    paddingLeft: '1em',\n    paddingRight: '1em',\n  }\n})(_Box)\n\nconst AppBar = withStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default + 'AA'\n  },\n}))(_AppBar)\n\nconst TopBar = (props: {\n  disableMenu: boolean,\n  openMenu: () => void,\n}) => (\n  <AppBar color=\"transparent\">\n    <Box>\n      <IconButton onClick={props.openMenu}>\n        <Icon.Menu/>\n      </IconButton>\n      <InfoButton variant=\"text\" fullWidth/>\n      <StretchToggle />\n    </Box>\n  </AppBar>\n);\n\nexport default connect(\n  (state: State) => ({\n    disableMenu: state.ui.modal === Modal.Menu,\n  }),\n  (dispatch: Dispatch) => ({\n    openMenu: () => dispatch(setModal(Modal.Menu)),\n  }),\n)(TopBar);","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State } from '../store/types';\nimport { Nav } from '../store/ui/types';\nimport BottomBar from './Bottombar';\nimport Settings from './Settings';\nimport { Controls } from './Controls';\nimport Display from './Display';\nimport TopBar from './TopBar';\nimport Info from './Info';\nimport Box from '@material-ui/core/Box';\nimport { withStyles } from '@material-ui/core/styles';\nimport styles from './App.module.css';\n\n\ntype Props = {\n  nav: Nav,\n}\n\nconst WithBottomNav = withStyles({\n  root: {\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column-reverse',\n  }\n})(Box)\n\nconst AboveBox = withStyles({\n  root: {\n    position: 'relative',\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column-reverse',\n    flexGrow: 1,\n  }\n})(Box)\n\nclass App extends React.Component<Props> {\n\n  render() {\n\n    return (\n      <div className={styles.App}>\n        <TopBar />\n        <Info />\n        <Settings />\n        <WithBottomNav>\n          <BottomBar />\n            <Controls/>\n          <AboveBox>\n            <Display/>\n          </AboveBox>\n        </WithBottomNav>\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({nav: state.ui.nav})\n)(App);","import React from 'react';\nimport { Provider } from 'react-redux';\nimport Theme from './Theme';\nimport { Store } from 'redux';\nimport App from './App';\nimport { State as AppState, Action as AppAction } from '../store/types';\n\ntype Props = {\n  store: Store<Partial<AppState>, AppAction>\n}\n\nexport default class Root extends React.Component<Props> {\n  render() {\n    const { store } = this.props;\n    return (\n      <Provider store={store}>\n        <Theme>\n          <App/>\n        </Theme>\n      </Provider>\n    )\n  }\n}\n","import {\n  interpolateInferno as Inferno,\n  interpolateMagma as Magma,\n  interpolatePlasma as Plasma,\n  interpolateViridis as Viridis,\n  interpolateCool as Cool,\n  interpolateWarm as Warm,\n  interpolateGreys as Greys,\n  interpolateRainbow as Rainbow,\n  interpolateSpectral as Spectral,\n  interpolateCubehelixDefault as Cubehelix\n} from 'd3';\nimport { ColorInterpolator } from './colorscale';\n\ntype SchemeDict = {[k: string]: ColorInterpolator}\n\nexport const D3_SCHEMES: SchemeDict = {\n  Inferno,\n  Magma,\n  Plasma,\n  Viridis,\n  Cool,\n  Warm,\n  Rainbow,\n  Spectral,\n  Cubehelix,\n  Greys,\n}\n\nexport const OTHER_SCHEMES: SchemeDict = {\n}\n\nconst ALL_SCHEMES: SchemeDict = {\n  ...D3_SCHEMES,\n  ...OTHER_SCHEMES,\n}\n\nexport default ALL_SCHEMES\n","import { COLORSCHEMES } from '../../colors';\nimport {\n  State,\n  Action,\n  UPDATE,\n  ADD_SCHEME,\n} from './types';\n\nconst initialState: State = {\n  scheme: 'Rainbow',\n  reverse: false,\n  adaptiveScale: false,\n  skew: 0,\n  schemeList: Object.keys(COLORSCHEMES).sort(),\n  customSchemes: {\n    'Nice': [\"#3db5ec\", \"#73c2b0\", \"#b9e375\", \"#f4bb44\", \"#eb591b\"],\n    'Ink': ['#000000', '#FFDD8C'],\n  },\n}\n\nexport default function(state: State=initialState, action: Action) {\n  switch(action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    case ADD_SCHEME:\n      return {\n        ...state,\n        customSchemes: {\n          ...state.customSchemes,\n          [action.payload.name]: action.payload.colors,\n        }\n      }\n    default:\n      return state;\n  }\n}","import {\n  State,\n  Action,\n  UPDATE,\n  RECENTER,\n  SET_CENTER,\n  SET_DIMS,\n  ZOOM_IN,\n  ZOOM_OUT,\n} from './types';\n\nconst initialState: State = {\n  //cx: -1.74, cy: 0.04, ppu: 17000, // burning ship\n  cx: 0, cy: 0, ppu: 512,\n  w: 2560, h: 1600,\n  previewPixels: 90000,\n}\n\nfunction recenter({w, h}: {w: number, h: number}) {\n  return {cx: 0, cy: 0, ppu: Math.round(Math.min(h,w)/3)}\n}\n\nexport default function(state: State={...initialState, ...recenter(initialState)}, action: Action) {\n  switch(action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    case RECENTER:\n      return {...state, ...recenter(state)}\n    case SET_CENTER:\n      return {...state, cx: action.payload.cx, cy: action.payload.cy}\n    case SET_DIMS:\n      return {...state, w: action.payload.w, h: action.payload.h}\n    case ZOOM_IN:\n      return {...state, ppu: state.ppu * action.payload}\n    case ZOOM_OUT:\n      return {...state, ppu: Math.round(state.ppu / action.payload)}\n    default:\n      return state;\n  }\n}","import {\n  State,\n  Action,\n  SET_FRACTAL,\n  UPDATE_PARAMS,\n} from './types';\nimport { FractalList } from '../../fractals';\n\nconst Dflt = 'Julia1KC'\n\n\nconst initialState: State = {\n  current: Dflt,\n  params: FractalList[Dflt].create(),\n  defaultParams: {bound: 10, iterations: 30},\n  fractals: FractalList,\n  paramControls: FractalList[Dflt].controls,\n}\n\n\nexport default function(state: State=initialState, action: Action) {\n  switch (action.type) {\n    case SET_FRACTAL:\n      if (action.payload.params === undefined) {\n        return {\n          ...state, \n          current: action.payload.current, \n          params: state.fractals[action.payload.current].create(),\n          paramControls: state.fractals[action.payload.current].controls,\n        }\n      } else {\n        return {\n          ...state,\n          current: action.payload.current,\n          params: action.payload.params,\n          paramControls: state.fractals[action.payload.current].controls,\n        }\n      }\n    case UPDATE_PARAMS:\n      return {...state, params: {...state.params, ...action.payload}}\n    default:\n      return state\n  }\n}","import {\n  State,\n  Action,\n  Nav,\n  Modal,\n  CanvasAction,\n  StretchMode,\n  SET_NAV,\n  SET_MODAL,\n  SET_STRETCH,\n  SET_CANVAS_ACTION,\n  UPDATE,\n} from './types';\n\n\nconst initialState = {\n  canvasStretch: StretchMode.Contain,\n  modal: Modal.None,\n  nav: Nav.Navigate,\n  canvasAction: CanvasAction.None,\n}\n\nexport default function(state: State=initialState, action: Action) {\n  switch(action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    case SET_NAV:\n      return {...state, nav: action.payload}\n    case SET_MODAL:\n      return {...state, modal: action.payload}\n    case SET_STRETCH:\n      return {...state, canvasStretch: action.payload}\n    case SET_CANVAS_ACTION:\n      return {...state, canvasAction: action.payload}\n    default:\n      return state\n  }\n}","import { combineReducers } from 'redux';\nimport color from './color/reducer';\nimport view from './view/reducer';\nimport algorithm from './algorithm/reducer';\nimport ui from './ui/reducer';\n\nexport default combineReducers({\n  algorithm,\n  color,\n  view,\n  ui,\n});","import { createStore } from 'redux';\nimport reducer from './reducer';\n\nexport default createStore(reducer);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Root from './containers/Root';\nimport store from './store';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root store={store} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.register();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Outer\":\"Canvas_Outer__3WApH\",\"Inner\":\"Canvas_Inner__3HJbl\",\"Canvas\":\"Canvas_Canvas__2ENmD\",\"Stretch\":\"Canvas_Stretch__2sMXG\",\"FullResolution\":\"Canvas_FullResolution__3ztDZ\"};"],"sourceRoot":""}