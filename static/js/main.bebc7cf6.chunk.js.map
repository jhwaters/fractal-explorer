{"version":3,"sources":["containers/App.module.css","containers/Theme.tsx","store/ui/types.ts","store/ui/actions.ts","components/Katex.tsx","components/TypographyWithMath.tsx","components/StyledSelect.tsx","components/DownUpButtons.tsx","components/NumberIncrementer.tsx","fractals/math/real.ts","fractals/math/polar.ts","fractals/math/complex.ts","components/ComplexIncrementer.tsx","components/SettingsContainer.tsx","fractals/colors/ColorScale.tsx","fractals/colors/schemes.ts","fractals/colors/index.ts","components/ColorPreview.tsx","components/ComplexNumberInput.tsx","fractals/types.ts","components/NumberInput.tsx","containers/Bottombar.tsx","store/algorithm/types.ts","store/algorithm/actions.ts","containers/Settings/AlgorithmSettings.tsx","store/view/actions.ts","store/view/types.ts","containers/Settings/CustomColor.tsx","containers/Settings/SettingsMenu.tsx","containers/Settings/ColorSettings.tsx","store/color/actions.ts","store/color/types.ts","containers/Settings/ViewSettings.tsx","containers/Settings/FullResolution.tsx","containers/Settings/index.ts","containers/Controls/Zoom.tsx","fractals/CanvasDrawer.ts","fractals/FractalList/mixers/base.ts","fractals/escapeTime.ts","fractals/formatting.ts","fractals/FractalList/mixers/escape.ts","fractals/FractalList/mixers/julia.ts","fractals/math/util.ts","fractals/math/polynomial.ts","fractals/FractalList/burningship.ts","fractals/FractalList/julias.ts","fractals/FractalList/magnet.ts","fractals/FractalList/mandelbox.ts","fractals/FractalList/mandelbrot.ts","fractals/FractalList/index.ts","fractals/index.ts","containers/Controls/ParamControls.tsx","containers/Controls/Iterator.tsx","containers/Controls/Recenter.tsx","containers/Controls/Controls.tsx","containers/Canvas/Canvas.tsx","containers/Canvas/index.ts","containers/Display.tsx","containers/Controls/StretchToggle.tsx","containers/Controls/InfoButton.tsx","containers/TopBar.tsx","containers/Info.tsx","containers/App.tsx","containers/Root.tsx","colors/schemes.ts","store/color/reducer.ts","store/view/reducer.ts","store/algorithm/reducer.ts","store/ui/reducer.ts","store/reducer.ts","store/index.ts","serviceWorker.ts","index.tsx","containers/Canvas/Canvas.module.css"],"names":["module","exports","Theme","props","state","type","dark","this","setState","setDark","window","matchMedia","matches","addListener","x","theme","palette","darkPalette","lightPalette","createMuiTheme","CssBaseline","children","React","Component","defaultProps","primary","blue","secondary","pink","lightGreen","amber","MuiAppBar","color","MuiBackdrop","invisible","MuiTextField","variant","size","fullWidth","margin","Nav","Modal","StretchMode","CanvasAction","setModal","modal","payload","setNav","nav","setCanvasAction","startDrawing","fullResolution","DrawFullResolution","Draw","styles","createStyles","root","whiteSpace","Katex","ref","createRef","current","katex","render","math","displayMode","renderMath","classes","className","createElement","PureComponent","withStyles","RenderStringOrMath","data","TextWithMath","Array","isArray","Typography","map","Select","width","TextField","Option","padding","MenuItem","OptionLabel","fontSize","TypographyWithMath","container","position","marginBottom","label","textAlign","bottom","userSelect","text","onUp","onDown","disableUp","disableDown","downIcon","Icon","upIcon","rest","Box","ButtonGroup","IconButton","onClick","disabled","NumberIncrementer","onClickDown","setValue","incrementDown","onClickUp","incrementUp","v","onChange","controlProps","min","step","value","undefined","Math","max","params","PI","TAU","abs","asin","atan2","exp","floor","pow","random","round","sin","sqrt","cos","powReal","z","k","angle","radius","complex","re","im","fromPolar","toPolar","add","a","b","addReal","addPolar","subt","mult","multReal","div","d","abs2","powFloat","P","powInt","ComplexIncrementer","onAngleDown","angleDown","onAngleUp","angleUp","onRadiusDown","radiusDown","onRadiusUp","radiusUp","stepRadius","p","stepAngle","RotateRight","RotateLeft","height","ColorScale","interpolator","skew","reverse","domain","scale","scalePow","range","exponent","createScaler","n","result","i","colors","opts","piecewise","interpolateLab","D3_SCHEMES","Cool","Cubehelix","Greys","Inferno","Magma","Plasma","Rainbow","Spectral","Viridis","Warm","ALL_SCHEMES","colorScale","scheme","customSchemes","customScale","COLORSCHEMES","builtinScale","borderRadius","boxShadow","ColorPreview","docolors","canvas","context","getContext","orientation","discreteScale","forEach","fillStyle","fillRect","style","grid","strokeLinecap","fill","major","strokeWidth","strokeOpacity","minor","marker","ComplexNumberInput","GRID","evt","getValueAtClick","onDoubleClick","r","precision","stepRect","angles","stepX","stepY","max_radius","circle","cx","cy","hline","vline","rect_minor","polar_minor","rad","RECT","MINOR","MAJOR","POLAR","makegrid","svg","rect","getBoundingClientRect","y","nativeEvent","clientX","clientY","clickX","clickY","vectorEffect","markerRadius","viewBox","join","stroke","gridColor","rectGrid","polarGrid","markerColor","ControlType","NumberInput","s","target","isEmpty","isNaN","onBlur","inputProps","emptyValue","borderTop","divider","StyledBottomNav","BottomNavigation","connect","ui","dispatch","BottomNavigationAction","Params","icon","Tune","Navigate","Help","updateParams","AlgorithmSettings","selectMethod","apply","setFractal","onClose","reset","algorithm","SettingsContainer","m","select","Object","keys","fractals","sort","key","Button","CustomColor","changeName","name","changeNum","setNum","changeColor","addColor","num","removeColor","save","onSave","validName","takenNames","toLowerCase","length","push","slice","Grid","item","xs","InputLabel","CUSTOM","renderColorInput","alignSelf","Menu","ColorSettings","openCustomPopup","customPopup","closeCustomPopup","changeReverse","checked","changeSkew","changeAdaptiveScale","adaptiveScale","selectScheme","setScheme","hasChanged","saveScheme","addScheme","updateColor","revert","schemeList","FormControlLabel","control","Switch","edge","display","FormControl","shrink","Slider","Popover","open","updates","Color","ViewSettings","centerStep","h","ppu","updateView","setCX","setCurrent","setCY","setW","w","setH","setPPU","setPreviewPixels","previewPixels","spacing","maxWidth","view","update","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","StyledLabel","ListItemText","StyledSwipeableDrawer","paper","flexDirection","SwipeableDrawer","SettingsDrawer","openMenu","openAlgorithm","menu","Algorithm","openColor","openView","View","closeAll","None","closePopup","openPopup","popup","labelStyle","listStyle","onOpen","List","ListItemIcon","Functions","Palette","Divider","FullResolution","paddingTop","paddingBottom","Back","SettingsMenu","zoomIn","zoomOut","factor","ZoomOut","ZoomIn","linearScale","CanvasDrawer","values","document","resize","clear","ctx","clearRect","f","xscale","yscale","c","_setValue","iterations","tocalc","cmap","setTransform","beginPath","pt","vals","_applyColors","controls","settings","bound","b2","z0","sign","fixed","toFixed","toString","DefaultEscapeParams","create","pixel","func","escapeTime","zz","description","describeEscapeFunction","formula","escape","latexF","latexZ0","replace","_description","julia","noParam","isInt","coeffs","allAreInts","absabs","BurningShip1","mix","cc","Number","param","randomC","Julia1KC","Call","onCall","Complex","Julia1Poly","poly","polynomial","Julia2","Julia3","divReal","sinh","Magnet1","Magnet2","a3","b3","ab","mandelboxA","mandelboxB","v2","recip","ab2","mandelboxBlatex","describeMandelbox","mandelboxClatex","Mandelbox1","A","B","BurningShip2Mandelbox","z1","Mandelbrot","FractalList","burningship","julias","magnet","mandelbox","mandelbrot","fractal","alg","fr","ParamControls","paramUpdater","console","log","startIcon","Random","renderNumberIncrementer","renderComplexIncrementer","renderCall","renderControl","Recenter","OuterBox","backgroundColor","background","default","Paper","CenteringBox","flexFlow","alignItems","justifyContent","Controls","closeNav","parameters","navigation","help","elevation","Iterator","Canvas","drawer","canvasRef","isFullResolution","centerOnClick","setCenter","offsetX","offsetY","stretch","Contain","ww","hh","imageH","imageW","dx","dy","pixelcount","scaleDown","rx","ry","calculatePixels","changeIterations","colorPixels","calculateImage","colorCanvas","finishDrawing","attach","draw","canvasAction","Iterate","recolor","objectFit","outerClasses","Outer","Stretch","Cover","Inner","canvasStretch","MyBox","overflow","flexGrow","Display","setStretch","mode","labelPlacement","KatexButton","textTransform","Info","gap","paddingLeft","paddingRight","_Box","AppBar","_AppBar","disableMenu","science","toPrecision","split","visible","fractalinfo","rounder","log10","centerx","centery","domainx","domainy","marginThreshold","marginTop","WithBottomNav","AboveBox","App","Settings","Root","store","initialState","recenter","Dflt","defaultParams","paramControls","combineReducers","action","createStore","reducer","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.bebc7cf6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1IQbR\",\"SettingsDrawer\":\"App_SettingsDrawer__20WS9\",\"SettingsMenu\":\"App_SettingsMenu__2rwrn\",\"KatexButton\":\"App_KatexButton__2A4iT\"};","import React from 'react';\nimport {\n  ThemeProvider as Provider, \n  createMuiTheme, \n} from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {amber, pink, blue, lightGreen} from '@material-ui/core/colors';\n\n\ntype Props = {\n  type: 'light' | 'dark' | 'detect'\n  lightPalette?: any\n  darkPalette?: any\n  theme: any\n}\n\nclass Theme extends React.Component<Props> {\n  state: {type: 'light' | 'dark'}\n\n  static defaultProps = {\n    type: 'detect',\n\n    lightPalette: {\n      primary: blue,\n      secondary: pink,\n    },\n\n    darkPalette: {\n      primary: lightGreen,\n      secondary: amber,\n    },\n\n    theme: {\n      props: {\n        MuiAppBar: {color: 'inherit'},\n        MuiBackdrop: {\n          invisible: true\n        },\n        MuiTextField: {\n          variant: 'outlined',\n          size: 'small',\n          fullWidth: true,\n          margin: 'normal',\n        },\n      },\n    }\n  }\n\n  constructor(props: React.PropsWithChildren<Props>) {\n    super(props);\n    this.state = {\n      type: this.props.type === 'detect' ? 'light' : this.props.type\n    }\n  }\n\n  setDark(dark: boolean) {\n    this.setState({type: dark ? 'dark' : 'light'})\n  }\n\n  componentDidMount() {\n    if (this.props.type === 'detect') {\n      this.setDark(window.matchMedia(\"(prefers-color-scheme:dark)\").matches)\n      window.matchMedia(\"(prefers-color-scheme:dark)\").addListener(x => {\n        this.setDark(x.matches)\n      })\n    }\n  }\n\n  render() {\n    const theme = {\n      ...this.props.theme,\n      palette: {\n        ...this.props.theme.palette,\n        ...this.state,\n        ...(this.state.type === 'dark' ? this.props.darkPalette : this.props.lightPalette)\n      }\n    }\n    return (\n      <Provider theme={createMuiTheme(theme)}>\n        <CssBaseline/>\n        {this.props.children}\n      </Provider>\n    )\n  }\n}\n\nexport default Theme;","export const SET_MODAL = 'UI_SET_MODAL'\nexport const SET_NAV = 'UI_SET_NAV'\nexport const SET_STRETCH = 'UI_SET_STRETCH'\nexport const SET_CANVAS_ACTION = 'UI_SET_ACTION'\nexport const UPDATE = 'UI_UPDATE'\n\n\n\nexport enum Nav {\n  None,\n  Params,\n  Navigate,\n  Help,\n}\n\nexport enum Modal {\n  None,\n  Menu,\n  Info,\n  FullResolution,\n}\n\nexport enum StretchMode {\n  None,\n  Contain,\n  Cover,\n}\n\nexport enum CanvasAction {\n  None,\n  Draw,\n  DrawFullResolution,\n  Color,\n  Iterate,\n}\n\nexport type ParamControl = {\n  label: string\n  param: string\n}\n\nexport interface State {\n  canvasStretch: StretchMode\n  nav: Nav\n  modal: Modal\n  canvasAction: CanvasAction\n}\n\nexport type Update = {\n  type: typeof UPDATE\n  payload: Partial<State>\n}\n\nexport type SetModal = {\n  type: typeof SET_MODAL\n  payload: Modal\n}\n\nexport type SetNav = {\n  type: typeof SET_NAV\n  payload: Nav\n}\n\nexport type SetStretch = {\n  type: typeof SET_STRETCH\n  payload: StretchMode\n}\n\nexport type SetCanvasAction = {\n  type: typeof SET_CANVAS_ACTION\n  payload: CanvasAction\n}\n\nexport type Action = Update | SetModal | SetNav | SetStretch | SetCanvasAction","import {\n  State,\n  SetStretch,\n  StretchMode,\n  SET_STRETCH,\n  SetModal,\n  SET_MODAL,\n  SetNav,\n  SET_NAV,\n  Modal,\n  Nav,\n  CanvasAction,\n  SetCanvasAction,\n  SET_CANVAS_ACTION,\n  Update,\n  UPDATE,\n} from './types'\n\nexport const update = (x: Partial<State>): Update => ({\n  type: UPDATE,\n  payload: x\n})\n\nexport const setStretch = (stretch: StretchMode): SetStretch => ({\n  type: SET_STRETCH,\n  payload: stretch\n})\n\nexport const setModal = (modal: Modal): SetModal => ({\n  type: SET_MODAL,\n  payload: modal\n})\n\nexport const setNav = (nav: Nav): SetNav => ({\n  type: SET_NAV,\n  payload: nav\n})\n\nexport const setCanvasAction = (x: CanvasAction): SetCanvasAction => ({\n  type: SET_CANVAS_ACTION,\n  payload: x,\n})\n\nexport const startDrawing = (fullResolution: boolean=false): SetCanvasAction => {\n  if (fullResolution) {\n    return ({\n      type: SET_CANVAS_ACTION,\n      payload: CanvasAction.DrawFullResolution\n    })\n  } else {\n    return ({\n      type: SET_CANVAS_ACTION,\n      payload: CanvasAction.Draw\n    })\n  }\n}\n\nexport const startIterating = (): SetCanvasAction => ({\n  type: SET_CANVAS_ACTION,\n  payload: CanvasAction.Iterate,\n})\n\nexport const startColoring = (): SetCanvasAction => ({\n  type: SET_CANVAS_ACTION,\n  payload: CanvasAction.Color\n})\n","import React from 'react'\nimport katex from 'katex'\nimport { withStyles, createStyles, WithStyles } from '@material-ui/core/styles';\nimport 'katex/dist/katex.css';\n\n\nconst styles = createStyles({\n  root: {\n    whiteSpace: 'nowrap',\n  }\n})\n\nexport interface KatexProps {\n  math: string\n  displayMode?: boolean\n  className?: string\n  style?: React.CSSProperties\n}\n\ninterface Props extends KatexProps, WithStyles<typeof styles> {}\n\nclass Katex extends React.PureComponent<Props> {\n  ref: React.RefObject<HTMLSpanElement>\n\n  constructor(props: Props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  renderMath() {\n    if (this.ref.current) {\n      katex.render(this.props.math, this.ref.current, {\n        displayMode: this.props.displayMode\n      })\n    }\n  }\n\n  componentDidMount() {\n    this.renderMath()\n  }\n\n  componentDidUpdate() {\n    this.renderMath()\n  }\n\n  render() {\n    const { classes, className } = this.props;\n    return React.createElement('span', {\n      ref: this.ref,\n      className: className ? classes.root + ' ' + className : classes.root,\n    })\n  }\n}\n\nexport default withStyles(styles)(Katex)","import React from 'react';\nimport Katex, { KatexProps } from './Katex';\nimport Typography, {TypographyProps} from '@material-ui/core/Typography';\n\n\nexport type StringOrMath = string | KatexProps\n\nconst RenderStringOrMath = (data: StringOrMath) => {\n  if (typeof data === 'string') {\n    return data;\n  } else {\n    return React.createElement(Katex, data);\n  }\n}\n\nexport type StringWithMath = StringOrMath | StringOrMath[]\n\nexport interface TypographyWithMathProps extends TypographyProps {\n  data: StringWithMath\n  className?: string\n}\n\nconst TextWithMath = ({data, ...props}: TypographyWithMathProps) => {\n  if (Array.isArray(data)) {\n    return React.createElement(Typography, props, ...data.map(RenderStringOrMath))\n  }\n  if (typeof data === 'string') {\n    return React.createElement(Typography, props, data);\n  }\n  return React.createElement(Typography, props, React.createElement(Katex, data));\n}\n\nexport default TextWithMath","import MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport TypographyWithMath from './TypographyWithMath';\nimport { withStyles, Theme } from '@material-ui/core/styles';\n\n\nexport const Select = withStyles((theme: Theme) => ({\n  root: {\n    width: '200px',\n  },\n}))(TextField)\n\nexport const Option = withStyles((theme: Theme) => ({\n  root: {\n    padding: '0.5em',\n  }\n}))(MenuItem)\n\n\nexport const OptionLabel = withStyles((theme: Theme) => ({\n  root: {\n    fontSize: '0.8em',\n  }\n}))(TypographyWithMath)\n","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport ButtonGroup, { ButtonGroupProps } from '@material-ui/core/ButtonGroup';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport * as Icon from './icons'\n\n\nconst styles = ({palette}: Theme) => createStyles({\n  container: {\n    position: 'relative',\n    marginBottom: '5px',\n  },\n  label: {\n    textAlign: 'center',\n    position: 'absolute',\n    bottom: '-5px',\n    width: '100%',\n    userSelect: 'none',\n    color: palette.text.secondary,\n  },\n});\n\n\nexport interface DownUpButtonsProps extends WithStyles<typeof styles>, Omit<ButtonGroupProps, 'classes'> {\n  [k: string]: any\n  onUp?: () => void\n  onDown?: () => void\n  disableUp?: boolean\n  disableDown?: boolean\n  label?: string\n  fontSize?: \"small\" | \"default\" | \"large\" | \"inherit\"\n  iconDown?: typeof SvgIcon\n  iconUp?: typeof SvgIcon\n}\n\n\nconst DownUpButtons = ({label, classes, onUp, onDown, fontSize, \n  disableUp, disableDown, downIcon=Icon.Minus, upIcon=Icon.Plus,\n  ...rest\n}: DownUpButtonsProps) => (\n\n  <Box className={classes.container}>\n      {label ? (\n        <Typography variant=\"caption\" className={classes.label}>\n          {label}\n        </Typography>\n      ) : null}\n    <ButtonGroup {...rest}>\n      <IconButton\n        onClick={onDown}\n        disabled={disableDown}\n      >{React.createElement(downIcon, {fontSize})}</IconButton> \n      <IconButton\n        onClick={onUp}\n        disabled={disableUp}\n      >{React.createElement(upIcon, {fontSize})}</IconButton>\n    </ButtonGroup>\n  </Box>\n)\n\nexport default withStyles(styles)(DownUpButtons)","import React from 'react';\nimport { ControlNumber } from '../fractals/types'\nimport DownUpButtons, { DownUpButtonsProps } from './DownUpButtons';\n\n\ninterface NewProps {\n  controlProps: ControlNumber\n  value: number\n  onChange: (x: number) => void\n}\n\ninterface Props extends NewProps, Omit<DownUpButtonsProps, 'label' | 'onDown' | 'onUp'> {}\n\nclass NumberIncrementer extends React.Component<Props> {\n\n  setValue(v: number) {\n    this.props.onChange(v)\n  }\n\n  incrementDown() {\n    const {min, step} = this.props.controlProps;\n    const v = this.props.value - step;\n    if (min !== undefined) {\n      return Math.max(min, v)\n    }\n    return v;\n  }\n\n  incrementUp() {\n    const {max, step} = this.props.controlProps;\n    const v = this.props.value + step;\n    if (max !== undefined) {\n      return Math.min(max, v)\n    }\n    return v;\n  }\n\n  onClickDown = () => {\n    this.setValue(this.incrementDown())\n  }\n\n  onClickUp = () => {\n    this.setValue(this.incrementUp())\n  }\n\n\n  render() {\n    const {controlProps, params, onChange, ...rest} = this.props;\n    return (\n      <DownUpButtons\n        {...rest}\n        label={controlProps.label}\n        onDown={this.onClickDown}\n        onUp={this.onClickUp}\n      />\n    )\n  }\n}\n\nexport default NumberIncrementer\n","// Constants\nconst PI = Math.PI\nconst TAU = 2*PI\n\n// Functions\nconst abs = Math.abs\nconst asin = Math.asin\nconst atan2 = Math.atan2\nconst exp = Math.exp\nconst floor = Math.floor\nconst pow = Math.pow\nconst random = Math.random\nconst round = Math.round\nconst sin = Math.sin\nconst sqrt = Math.sqrt\nconst cos = Math.cos\n\nexport {\n  PI,\n  TAU,\n\n  abs,\n  asin,\n  atan2,\n  cos,\n  exp,\n  floor,\n  pow,\n  random,\n  round,\n  sin,\n  sqrt,\n}\n","import { Complex, Polar } from './types';\nimport * as Math from './real';\n\n\nexport function polar(angle: number, radius: number): Polar {\n  return {angle, radius};\n}\n\nexport function fromComplex({re, im}: Complex): Polar {\n  return {\n    angle: Math.atan2(im, re),\n    radius: Math.sqrt(re*re + im*im),\n  };\n}\n\nexport function toComplex(z: Polar): Complex {\n  return {\n    re: z.radius * Math.cos(z.angle),\n    im: z.radius * Math.sin(z.angle),\n  };\n}\n\nexport function neg(z: Polar): Polar {\n  return {\n    angle: z.angle,\n    radius: -z.radius,\n  };\n}\n\nexport function mult(a: Polar, b: Polar): Polar {\n  return {\n    angle: a.angle + b.angle,\n    radius: a.radius * b.radius,\n  };\n}\n\nexport function multReal(a: Polar, b: number): Polar {\n  return {angle: a.angle, radius: b* a.radius}\n}\n\nexport function div(a: Polar, b: Polar): Polar {\n  return {\n    angle: a.angle - b.angle,\n    radius: a.radius / b.radius,\n  };\n}\n\nexport function divReal(a: Polar, b: number): Polar {\n  return {angle: a.angle, radius: a.radius / b}\n}\n\nexport function powReal(z: Polar, k: number): Polar {\n  return {angle: z.angle * k, radius: Math.pow(z.radius, k)}\n}\n","import { Complex, Polar } from './types';\nimport * as P from './polar';\nimport * as Math from './real';\n\n\nexport function complex(re: number, im: number): Complex {\n  return {re, im}\n}\n\nexport function conjugate(z: Complex) {\n  return {re: z.re, im: -z.im}\n}\n\nexport function fromPolar({angle, radius}: Polar) {\n  return {\n    re: radius * Math.cos(angle),\n    im: radius * Math.sin(angle),\n  }\n}\n\nexport function toPolar(z: Complex): Polar {\n  return {\n    angle: Math.atan2(z.im, z.re),\n    radius: Math.sqrt(z.re*z.re + z.im*z.im),\n  }\n}\n\nexport function neg(a: Complex): Complex {\n  return {re: -a.re, im: -a.im}\n}\n\n\n// Addition\n\nexport function add(a: Complex, b: Complex): Complex {\n  return {re: a.re+b.re, im: a.im+b.im}\n}\n\nexport function addReal(a: Complex, b: number): Complex {\n  return {re: a.re + b, im: a.im}\n}\n\nexport function addPolar(a: Complex, b: Polar): Complex {\n  return add(a, fromPolar(b))\n}\n\n\n// Subtraction\n\nexport function subt(a: Complex, b: Complex): Complex {\n  return {re: a.re - b.re, im: a.im - b.im}\n}\n\nexport function subtReal(a: Complex, b: number): Complex {\n  return {re: a.re - b, im: a.im}\n}\n\nexport function subtPolar(a: Complex, b: Polar): Complex {\n  return subt(a, fromPolar(b))\n}\n\n\n// Multiplication\n\nexport function mult(a: Complex, b: Complex): Complex {\n  return {\n    re: a.re*b.re - a.im*b.im,\n    im: a.re*b.im + a.im*b.re,\n  }\n}\n\nexport function multReal(a: Complex, b: number): Complex {\n  return {re: b * a.re, im: b * a.im}\n}\n\nexport function multPolar(a: Complex, b: Polar): Complex {\n  return mult(a, fromPolar(b))\n}\n\n\n// Division\n\nexport function div(a: Complex, b: Complex): Complex {\n  const d = abs2(b);\n  return {\n    re: (a.re * b.re + a.im * b.im) / d,\n    im: (a.im * b.re - a.re * b.im) / d,\n  }\n}\n\nexport function divReal(a: Complex, b: number): Complex {\n  return {re: a.re / b, im: a.im / b}\n}\n\nexport function divPolar(a: Complex, b: Polar): Complex {\n  return fromPolar(P.div(toPolar(a), b))\n}\n\n\n// Exponentiation\n\nexport function exp(z: Complex): Complex {\n  return fromPolar({radius: Math.exp(z.re), angle: z.im})\n}\n\nexport function powFloat(z: Complex, k: number): Complex {\n  return fromPolar(P.powReal(toPolar(z), k))\n}\n\nexport function powInt(z: Complex, k: number): Complex {\n  if (k < 0) return div(complex(1, 0), powInt(z, -k))\n  if (k === 0) return complex(1, 0)\n  if (k === 1) return z\n  if (k === 2) return mult(z, z)\n  if (k === 3) return mult(mult(z, z), z)\n  if (k === 4) return mult(mult(mult(z, z), z), z)\n  if (k === 5) return mult(mult(mult(mult(z, z), z), z), z)\n  if (k === 6) return mult(mult(mult(mult(mult(z, z), z), z), z), z)\n  if (k === 7) return mult(mult(mult(mult(mult(mult(z, z), z), z), z), z), z)\n  if (k === 8) return mult(mult(mult(mult(mult(mult(mult(z, z), z), z), z), z), z), z)\n  return powFloat(z, k)\n}\n\nexport function powReal(z: Complex, k: number): Complex {\n  return powInt(z, k);\n}\n\n\n// Other\n\nexport function abs2(z: Complex): number {\n  return z.re * z.re + z.im * z.im;\n}\n\nexport function abs(z: Complex): number {\n  return Math.sqrt(abs2(z));\n}\n\nexport function angle(z: Complex): number {\n  return Math.atan2(z.im, z.re);\n}\n\nexport function sqrt(z: Complex): Complex {\n  const angle = Math.atan2(z.im, z.re);\n  return fromPolar({\n    angle: angle / 2,\n    radius: Math.sqrt(abs(z))\n  })\n}\n\nexport function sinh(z: Complex): Complex {\n  return divReal(subt(exp(z), exp(neg(z))), 2)\n}\n","import React from 'react';\nimport { ControlComplex } from '../fractals/types'\nimport DownUpButtons, { DownUpButtonsProps } from './DownUpButtons';\nimport {\n  complex,\n  fromPolar,\n  toPolar,\n} from '../fractals/math/complex';\nimport { Polar } from '../fractals/math/types';\nimport { Icon } from '.';\n\n\n//const round = (n: number) => Math.round(n * 100000) / 100000\n\ntype Vec = [number, number]\n\ninterface NewProps {\n  controlProps: ControlComplex\n  value: Vec\n  onChange: (x: Vec) => void\n}\n\ninterface Props extends NewProps, Omit<DownUpButtonsProps, 'label' | 'onDown' | 'onUp'> {}\n\nclass ComplexIncrementer extends React.Component<Props> {\n\n  setValue(v: Vec) {\n    this.props.onChange(v)\n  }\n\n  toPolar() {\n    return toPolar(complex(this.props.value[0], this.props.value[1]))\n  }\n\n  fromPolar(v: Polar): Vec {\n    const a = fromPolar(v);\n    return [a.re, a.im];\n  }\n\n  radiusDown(): Vec {\n    const {stepRadius} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, radius: p.radius-stepRadius})\n  }\n\n  radiusUp(): Vec {\n    const {stepRadius} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, radius: p.radius+stepRadius})\n  }\n\n  angleDown(): Vec {\n    const {stepAngle} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, angle: p.angle-stepAngle})\n  }\n\n  angleUp(): Vec {\n    const {stepAngle} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, angle: p.angle+stepAngle})\n  }\n\n\n  onAngleDown = () => {\n    this.setValue(this.angleDown())\n  }\n\n  onAngleUp = () => {\n    this.setValue(this.angleUp())\n  }\n\n  onRadiusDown = () => {\n    this.setValue(this.radiusDown())\n  }\n\n  onRadiusUp = () => {\n    this.setValue(this.radiusUp())\n  }\n\n\n  render() {\n    const {controlProps, params, onChange, ...rest} = this.props;\n    return (\n      <>\n      <DownUpButtons\n        {...rest}\n        //label={controlProps.label + ': '}\n        label={controlProps.label + ': angle'}\n        onDown={this.onAngleDown}\n        onUp={this.onAngleUp}\n        downIcon={Icon.RotateRight}\n        upIcon={Icon.RotateLeft}\n      />\n      <DownUpButtons\n        {...rest}\n        label={controlProps.label + ': radius'}\n        onDown={this.onRadiusDown}\n        onUp={this.onRadiusUp}\n      />\n      </>\n    )\n  }\n}\n\nexport default ComplexIncrementer\n","import Box from '@material-ui/core/Box';\nimport { withStyles, Theme, createStyles } from '@material-ui/core/styles';\n\n\nconst styles = createStyles((theme: Theme) => ({\n  root: {\n    height: '100%',\n  }\n}));\n\n\nexport default withStyles(styles)(Box)","import {\n  interpolateLab,\n  piecewise,\n  scalePow,\n  ScalePower,\n} from 'd3';\n\n\nclass ColorScale {\n  interpolator: (n: number) => string\n  skew: number\n  reverse: boolean\n\n  constructor(interpolator: (n: number) => string, {skew, reverse}: {\n    reverse?: boolean,\n    skew?: number,\n  }={}) {\n    this.interpolator = interpolator;\n    this.reverse = reverse || false;\n    this.skew = skew || 0;\n  }\n\n  static piecewise(colors: string[], opts?: {skew?: number, reverse?: boolean}) {\n    return new ColorScale(piecewise(interpolateLab, colors), opts)\n  }\n\n  createScaler(domain?: [number, number]): ScalePower<number,number> {\n    const scale = scalePow()\n      .domain(domain || [0,1])\n      .range(this.reverse ? [1, 0] : [0, 1])\n    if (this.skew) {\n      scale.exponent(2**this.skew);\n    }\n    return scale;\n  }\n\n  scale(domain?: [number,number]): (n: number) => string {\n    const scale = this.createScaler(domain);\n    return (n: number) => this.interpolator(scale(n));\n  }\n\n  discreteScale(domain?: [number, number]): string[] {\n    const scale = this.createScaler(domain);\n    const result: string[] = Array(1 + Math.abs(scale.domain()[1] - scale.domain()[0]));\n    for (let i = scale.domain()[0]; i <= scale.domain()[1]; i++) {\n      result[i] = this.interpolator(scale(i));\n    }\n    return result;\n  }\n}\n\nexport default ColorScale","import {\n  interpolateInferno as Inferno,\n  interpolateMagma as Magma,\n  interpolatePlasma as Plasma,\n  interpolateViridis as Viridis,\n  interpolateCool as Cool,\n  interpolateWarm as Warm,\n  interpolateGreys as Greys,\n  interpolateRainbow as Rainbow,\n  interpolateSpectral as Spectral,\n  interpolateCubehelixDefault as Cubehelix\n} from 'd3';\n\ntype SchemeDict = {[k: string]: (n: number) => string}\n\nexport const D3_SCHEMES: SchemeDict = {\n  Cool,\n  Cubehelix,\n  Greys,\n  Inferno,\n  Magma,\n  Plasma,\n  Rainbow,\n  Spectral,\n  Viridis,\n  Warm,\n}\n\nexport const OTHER_SCHEMES: SchemeDict = {\n}\n\nconst ALL_SCHEMES: SchemeDict = {\n  ...D3_SCHEMES,\n  ...OTHER_SCHEMES,\n}\n\nexport default ALL_SCHEMES\n","import ColorScale from './ColorScale';\nimport COLORSCHEMES from './schemes';\n\n\nfunction customScale(colors: string[], opts: {\n  reverse?: boolean,\n  skew?: number,\n}={}) {\n  return ColorScale.piecewise(colors, opts);\n}\n\n\nfunction builtinScale(scheme: string, opts: {\n  reverse?: boolean,\n  skew?: number,\n}={}) {\n  return new ColorScale(COLORSCHEMES[scheme], opts);\n}\n\n\nfunction colorScale({scheme, reverse, skew, customSchemes}: {\n  scheme: string\n  reverse: boolean,\n  skew: number,\n  customSchemes: {[k: string]: string[]}\n}) {\n  if (customSchemes[scheme]) {\n    return customScale(customSchemes[scheme], {reverse, skew});\n  } else {\n    return builtinScale(scheme, {reverse, skew});\n  }\n}\n\nexport {\n  ColorScale,\n  colorScale,\n  COLORSCHEMES,\n}","import React from 'react';\nimport { SchemeName } from '../store/color/types';\nimport { colorScale } from '../fractals/colors';\nimport { withStyles, WithStyles, createStyles } from '@material-ui/core/styles';\n//import { CSSProperties } from '@material-ui/core'\n\n\nexport interface ColorPreviewProps {\n  width: number\n  height: number\n  orientation: string\n  scheme: SchemeName\n  customSchemes: {[k: string]: string[]}\n  reverse: boolean\n  skew: number\n  style?: React.CSSProperties\n}\n\nconst styles = createStyles({\n  root: {\n    borderRadius: '8px',\n    boxShadow: '2px 2px 4px rgba(0,0,0,0.5)',\n  }\n})\n\ninterface Props extends ColorPreviewProps, WithStyles<typeof styles> {}\n\nclass ColorPreview extends React.Component<Props> {\n  ref: React.RefObject<HTMLCanvasElement>\n\n  static defaultProps = {\n    width: 400,\n    height: 10,\n    orientation: 'horizontal',\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    this.docolors();\n  }\n\n  componentDidUpdate() {\n    this.docolors();\n  }\n\n  docolors() {\n    const canvas = this.ref.current;\n    if (canvas) {\n      const context = canvas.getContext('2d');\n      if (context) {\n        const { scheme, reverse, skew, customSchemes, width, height, orientation } = this.props;\n        if (orientation === 'horizontal') {\n          const cm = colorScale({scheme, reverse, skew, customSchemes}).discreteScale([0,width]);\n          cm.forEach((color, i) => {\n            context.fillStyle = color;\n            context.fillRect(i, 0, 1, height);\n          })\n        } else {\n          const cm = colorScale({scheme, reverse, skew, customSchemes}).discreteScale([height,0]);\n          cm.forEach((color, i) => {\n            context.fillStyle = color;\n            context.fillRect(0, i, width, 1);\n          })\n        }\n      }\n    }\n  }\n\n  render() {\n    return (\n      <canvas ref={this.ref} \n        width={this.props.width} \n        height={this.props.height} \n        style={this.props.style}\n        className={this.props.classes.root}\n      />\n    )\n  }\n}\n\nexport default withStyles(styles)(ColorPreview)","import React from 'react';\nimport { withStyles, createStyles, WithStyles } from '@material-ui/core/styles';\n\n\nexport interface ComplexNumberInputProps {\n  value: [number, number],\n  max: number,\n  onClick?: (v: [number, number]) => void,\n  onDoubleClick?: (v: [number, number]) => any,\n  size: number,\n  precision: number,\n  stepRect: number,\n  stepRadius: number,\n  stepAngle: number,\n  angles?: number[],\n  style?: React.CSSProperties,\n  markerColor: string,\n  gridColor?: string,\n  textColor?: string,\n}\n\n\nconst styles = createStyles({\n  root: {\n    padding: '0px',\n    userSelect: 'none',\n  },\n  \n  grid: {\n    strokeLinecap: 'square',\n    fill: 'none',\n  },\n  \n  major: {\n    strokeWidth: 0.5,\n    strokeOpacity: 1,\n  },\n  \n  minor: {\n    strokeWidth: 0.5,\n    strokeOpacity: 0.3,\n  },\n  \n  marker: {\n    strokeWidth: 0,\n  },\n});\n\n\ninterface Props extends ComplexNumberInputProps, WithStyles<typeof styles> {}\n\nclass ComplexNumberInput extends React.Component<Props> {\n  ref: React.RefObject<SVGSVGElement>\n  GRID: {\n    RECT?: {MAJOR?: string, MINOR?: string},\n    POLAR?: {MAJOR?: string, MINOR?: string},\n  }\n  round: (n: number) => number\n\n  static defaultProps = {\n    size: 100,\n    precision: 3,\n    stepAngle: 30,\n    stepRadius: 0.2,\n    stepRect: 0.2,\n\n    markerColor: 'blue',\n    //gridColor: 'black',\n  }\n\n  constructor(props: React.PropsWithChildren<Props>) {\n    super(props);\n    this.ref = React.createRef();\n    const r = Math.pow(10, props.precision);\n    this.round = (n: number) => Math.round(n*r) / r;\n    const {max, stepRadius, stepRect, stepAngle, angles} = this.props;\n    this.GRID = makegrid({max, stepRadius, stepAngle, angles, stepX: stepRect, stepY: stepRect});\n  }\n\n  getValueAtClick(evt: any): [number, number] | undefined {\n    const svg = this.ref.current;\n    if (svg) {\n      const rect = svg.getBoundingClientRect();\n      const {x, y} = rect;\n      const {clientX, clientY} = evt.nativeEvent;\n      const clickX = ((clientX - x) / this.props.size - 0.5) * 2*this.props.max;\n      const clickY = -((clientY - y) / this.props.size - 0.5) * 2*this.props.max;\n      return [this.round(clickX), this.round(clickY)];\n    }\n  }\n\n  onClick = (evt: any) => {\n    if (this.props.onClick) {\n      const p = this.getValueAtClick(evt);\n      if (p) this.props.onClick(p);\n    }\n  }\n\n  onDoubleClick = (evt: any) => {\n    if (this.props.onDoubleClick) {\n      const p = this.getValueAtClick(evt);\n      if (p) this.props.onDoubleClick(p);\n    }\n  }\n\n  polarGrid() {\n    if (this.GRID.POLAR) {\n      return (\n        <>\n        {this.GRID.POLAR.MINOR ? (\n          <path d={this.GRID.POLAR.MINOR} \n            className={this.props.classes.minor} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        {this.GRID.POLAR.MAJOR ? (\n          <path d={this.GRID.POLAR.MAJOR} \n            className={this.props.classes.major} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        </>\n      )\n    }\n    return null;\n  }\n\n  rectGrid() {\n    if (this.GRID.RECT) {\n      return (\n        <>\n        {this.GRID.RECT.MINOR ? (\n          <path d={this.GRID.RECT.MINOR} \n            className={this.props.classes.minor} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        {this.GRID.RECT.MAJOR ? (\n          <path d={this.GRID.RECT.MAJOR} \n            className={this.props.classes.major} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        </>\n      )\n    }\n    return null;\n  }\n  \n  render() {\n    const markerRadius = this.props.max / 24;\n    const viewBox = [-this.props.max, -this.props.max, 2*this.props.max, 2*this.props.max]\n    return (\n      <svg \n        ref={this.ref}\n        onClick={this.onClick}\n        onDoubleClick={this.onDoubleClick}\n        viewBox={viewBox.join(' ')}\n        className={this.props.classes.root}\n        style={{...this.props.style, width: this.props.size, height: this.props.size}}\n      >\n        <g className={this.props.classes.grid}\n          style={{stroke: this.props.gridColor}}\n        >\n          {this.rectGrid()}\n          {this.polarGrid()}\n        </g>\n        <circle \n          cx={this.props.value[0]}\n          cy={-this.props.value[1]}\n          r={markerRadius} \n          className={this.props.classes.marker}\n          style={{\n            stroke: this.props.markerColor,\n            fill: this.props.markerColor,\n          }}\n        />\n      </svg>\n    )\n  }\n}\n\n\nexport default withStyles(styles)(ComplexNumberInput)\n\n\nfunction makegrid({max, stepX, stepY, stepRadius, stepAngle, angles}: {\n  max: number,\n  stepX: number,\n  stepY: number,\n  stepAngle: number,\n  stepRadius: number,\n  angles?: number[],\n}) {\n  const max_radius = max * 1.5;\n\n  function circle(cx: number, cy: number, r: number) {\n    return (\n      'M' + cx+r + ',' + cy + \n      'A' + r + ',' + r + ',0,1,0,' + cx + ',' + cy + r +\n      'A' + r + ',' + r + ',0,0,0,' + cx + r + ',' + cy\n    )\n  }\n\n  function hline(v: number) {\n    return 'M' + (-max) + ',' + v + 'H' + max;\n  }\n\n  function vline(v: number) {\n    return 'M' + v + ',' + (-max) + 'V' + max;\n  }\n  \n  let rect_minor = ''\n  let i = 0;\n  while (i <= max) {\n    rect_minor += vline(i) + vline(-i);\n    i += stepX;\n  }\n\n  i = 0;\n  while (i <= max) {\n    rect_minor += hline(i) + hline(-i);\n    i += stepY;\n  }\n  \n  let polar_minor = '';\n  \n  if (angles) {\n    angles.forEach(a => {\n      const rad = a * Math.PI / 180;\n      polar_minor += 'M0,0L' + max_radius * Math.cos(rad) + ',' + max_radius * Math.sin(rad);\n    })\n  } else {\n    i = 0;\n    while (i < 360) {\n      const rad = i * Math.PI / 180;\n      polar_minor += 'M0,0L' + max_radius * Math.cos(rad) + ',' + max_radius * Math.sin(rad);\n      i += stepAngle;\n    }\n  }\n\n  i = stepRadius;\n  while (i <= max_radius) {\n    polar_minor += circle(0, 0, i);\n    i += stepRadius;\n  }\n\n  return {\n    RECT: {MINOR: rect_minor, MAJOR: hline(0) + vline(0)},\n    POLAR: {MINOR: polar_minor, MAJOR: circle(0, 0, 1)},\n  }\n  \n}\n","import { Complex as _Complex } from './math/types';\nimport { StringWithMath } from '../components/TypographyWithMath';\n\nexport type Complex = _Complex\n\nexport type TextWithMath = StringWithMath\n\nexport type Label = StringWithMath\n\nexport type PixelCalculator = (x: number, y: number) => number\n\nexport interface Params {[k: string]: any}\n\nexport enum ControlType {\n  Call,\n  Number,\n  Complex,\n  Boolean,\n}\n\ninterface ControlBase {\n  type: ControlType\n}\n\nexport interface ControlCall extends ControlBase {\n  type: ControlType.Call\n  label?: string\n  icon?: string\n  onCall: () => Params\n}\n\nexport interface ControlNumber extends ControlBase {\n  type: ControlType.Number\n  label: string\n  param: string\n  step: number\n  min?: number\n  max?: number\n}\n\nexport interface ControlComplex extends ControlBase {\n  type: ControlType.Complex\n  label: string\n  param: string\n  stepRadius: number\n  stepAngle: number\n}\n\nexport interface ControlBoolean extends ControlBase {\n  type: ControlType.Boolean\n  label: string\n  param: string\n}\n\nexport type ControlProps = ControlCall | ControlNumber | ControlComplex | ControlBoolean\n\nexport interface FractalInterface<T> {\n  label: StringWithMath\n  pixel(params: T): PixelCalculator\n  formula(params: T): StringWithMath\n  description(params: T): StringWithMath\n  create(): T\n  settings: any[]\n  controls: ControlProps[]\n}\n\n\nexport type Vector = [number, number]\n\n\n","import React from 'react';\nimport TextField, { \n  StandardTextFieldProps,\n  FilledTextFieldProps,\n  OutlinedTextFieldProps,\n} from '@material-ui/core/TextField';\n\n\ninterface NewProps {\n  value?: number\n  step?: number\n  min?: number\n  max?: number\n  emptyValue?: number\n}\n\ninterface StandardNumberInputProps\n  extends NewProps, Omit<StandardTextFieldProps, 'value' | 'type'> {}\n\ninterface FilledNumberInputProps\n  extends NewProps, Omit<FilledTextFieldProps, 'value' | 'type'> {}\n\ninterface OutlinedNumberInputProps\n  extends NewProps, Omit<OutlinedTextFieldProps, 'value' | 'type'> {}\n\ntype NumberInputProps = \n  StandardNumberInputProps | \n  FilledNumberInputProps | \n  OutlinedNumberInputProps;\n\n\nclass NumberInput extends React.Component<NumberInputProps> {\n  state: {isEmpty: boolean}\n\n  constructor(props: NumberInputProps) {\n    super(props);\n    this.state = {\n      isEmpty: false\n    }\n  }\n\n  onChange = (evt: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const s = evt.target.value;\n    if (s === '') {\n      this.setState({isEmpty: true})\n    } else {\n      this.setState({isEmpty: false})\n    }\n    if (this.props.onChange) {\n      if (!isNaN(+s)) {\n        this.props.onChange(evt)\n      }\n    }\n  }\n\n  onBlur = (evt: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    if (this.props.onBlur) {\n      this.props.onBlur(evt);\n    }\n    this.setState({isEmpty: false});\n  }\n\n\n  render() {\n    const {step, min, max, inputProps, onChange, onBlur, value='', emptyValue=0, ...rest} = this.props;\n    return React.createElement(TextField, {\n      type: 'number',\n      value: value ? +value : this.state.isEmpty ? '' : emptyValue,\n      inputProps: {step, min, max, ...inputProps},\n      onChange: this.onChange,\n      onBlur: this.onBlur,\n      ...rest, \n    })\n  }\n}\n\n\nexport default NumberInput","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../store/types';\nimport { Nav } from '../store/ui/types';\nimport { setNav } from '../store/ui/actions';\nimport BottomNavigation, { BottomNavigationProps } from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport { withStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { Icon } from '../components';\n\n\nconst styles = createStyles(({palette}: Theme) => ({\n  root: {\n    //position: 'absolute',\n    bottom: 0,\n    width: '100%',\n    borderTop: '1px solid ' + palette.divider,\n  },\n}))\n\nconst StyledBottomNav = withStyles(styles)(BottomNavigation)\n\nconst BottomNav = (props: BottomNavigationProps) => (\n  <StyledBottomNav {...props}>\n    \n    <BottomNavigationAction\n      value={Nav.Params}\n      label=\"Parameters\"\n      icon={<Icon.Tune/>}\n    />\n    <BottomNavigationAction\n      value={Nav.Navigate}\n      label=\"Explore\"\n      icon={<Icon.Navigate/>}\n    />\n    <BottomNavigationAction\n      value={Nav.Help}\n      label=\"Help\"\n      icon={<Icon.Help/>}\n    />\n  </StyledBottomNav>\n);\n\nexport default connect(\n  (state: State) => ({\n    value: state.ui.nav,\n  }),\n  (dispatch: Dispatch) => ({\n    onChange: (evt: any, x: Nav) => dispatch(setNav(x)),\n  })\n)(BottomNav)","import {\n  FractalInterface,\n  Params as FractalParams,\n  ControlProps,\n  ControlType\n} from '../../fractals/types';\n\nexport type Fractal = FractalInterface<FractalParams>\nexport type Params = FractalParams\n\nexport const SET_FRACTAL = 'ALGORITHM_SET_FRACTAL';\nexport const UPDATE_PARAMS = 'ALGORITHM_UPDATE_PARAMS';\n\n\nexport type FractalList = {[k: string]: Fractal}\n\nexport type FractalKey = keyof FractalList\n\nexport type ParamControl = ControlProps\n\nexport { ControlType }\n\nexport interface State{\n  current: FractalKey\n  fractals: FractalList\n  params: Params\n  defaultParams: {bound: number, iterations: number}\n  paramControls: ParamControl[]\n}\n\nexport type SetFractal = {\n  type: typeof SET_FRACTAL,\n  payload: {current: FractalKey, params?: Params},\n}\n\nexport type UpdateParams = {\n  type: typeof UPDATE_PARAMS,\n  payload: Params\n}\n\nexport type Action = SetFractal | UpdateParams","import {\n  UpdateParams,\n  UPDATE_PARAMS,\n  SetFractal,\n  SET_FRACTAL,\n  Params,\n  FractalKey,\n} from './types';\n\nexport const updateParams = (params: Params): UpdateParams => ({\n  type: UPDATE_PARAMS,\n  payload: params\n})\n\nexport const setFractal = (current: FractalKey, params?: Params): SetFractal => ({\n  type: SET_FRACTAL,\n  payload: {current, params}\n})","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState, Dispatch } from '../../store/types';\nimport { State as AlgState, FractalKey, Params } from '../../store/algorithm/types';\nimport { setFractal } from '../../store/algorithm/actions';\nimport { startDrawing } from '../../store/ui/actions'\nimport { recenter } from '../../store/view/actions';\nimport {\n  SettingsContainer, \n  Select,\n  Option,\n  OptionLabel,\n} from '../../components';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { withStyles } from '@material-ui/core/styles';\n\ntype Props = {\n  algorithm: AlgState\n  setFractal: (key: FractalKey) => void\n  onClose?: () => void\n}\n\n\n\ninterface State {\n  current: FractalKey,\n  params: Params,\n}\n\nclass AlgorithmSettings extends React.Component<Props> {\n  state: State\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      current: props.algorithm.current,\n      params: {...props.algorithm.params},\n    };\n  }\n\n  selectMethod = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({current: evt.target.value});\n  }\n\n  apply = () => {\n    this.props.setFractal(this.state.current)\n    if (this.props.onClose) {\n      this.props.onClose();\n    }\n  }\n\n  reset = () => {\n    this.setState({\n      current: this.props.algorithm.current,\n      params: {...this.props.algorithm.params},\n    })\n  }\n\n  render() {\n    return (\n      <SettingsContainer>\n        <Box m={1}>\n          <Box m={1}>\n            <Select select\n              label=\"Method\"\n              value={this.state.current}\n              onChange={this.selectMethod}\n            >\n              {Object.keys(this.props.algorithm.fractals).sort().map(k => {\n                return (\n                  <Option key={k} value={k}>\n                    <OptionLabel\n                      data={this.props.algorithm.fractals[k].label}\n                    />\n                  </Option>\n                )\n              })}\n            </Select>\n          </Box>\n          <Box m={1}>\n            <ButtonGroup fullWidth color=\"primary\" orientation=\"vertical\">\n              <Button fullWidth onClick={this.apply}>Apply</Button>\n              <Button fullWidth onClick={this.reset}>Reset</Button>\n            </ButtonGroup>\n          </Box>\n        </Box>\n      </SettingsContainer>\n    )\n  }\n}\n\nexport default connect(\n  (state: AppState) => ({\n    algorithm: state.algorithm,\n  }),\n  (dispatch: Dispatch) => ({\n    setFractal: (key: FractalKey) => {\n      dispatch(setFractal(key))\n      dispatch(recenter())\n      dispatch(startDrawing())\n    },\n  })\n)(AlgorithmSettings)","import {\n  State,\n  Update,\n  Recenter,\n  SetCenter,\n  SetDims,\n  ZoomIn,\n  ZoomOut,\n  UPDATE,\n  RECENTER,\n  SET_CENTER,\n  SET_DIMS,\n  ZOOM_IN,\n  ZOOM_OUT,\n} from './types';\n\n\nexport const update = (update: Partial<State>): Update => ({\n  type: UPDATE,\n  payload: update,\n})\n\nexport const recenter = (): Recenter => ({\n  type: RECENTER,\n})\n\nexport const setCenter = (cx: number, cy: number): SetCenter => ({\n  type: SET_CENTER,\n  payload: {cx, cy},\n})\n\nexport const setDims = (w: number, h: number): SetDims => ({\n  type: SET_DIMS,\n  payload: {w, h}\n})\n\nexport const zoomIn = (factor: number): ZoomIn => ({\n  type: ZOOM_IN,\n  payload: factor,\n})\n\nexport const zoomOut = (factor: number): ZoomOut => ({\n  type: ZOOM_OUT,\n  payload: factor,\n})","//import Big from 'big.js';\n\nexport type State = {\n  [k: string]: number | boolean\n  cx: number\n  cy: number\n  w: number\n  h: number\n  ppu: number // pixels per unit\n  previewPixels: number\n}\n\nexport const UPDATE = 'VIEW_UPDATE';\nexport const ZOOM_IN = 'VIEW_ZOOM_IN';\nexport const ZOOM_OUT = 'VIEW_ZOOM_OUT';\nexport const RECENTER = 'VIEW_RECENTER';\nexport const SET_DIMS = 'VIEW_SET_DIMS';\nexport const SET_CENTER = 'VIEW_SET_CENTER';\n\nexport type Update = {\n  type: typeof UPDATE,\n  payload: Partial<State>,\n}\n\nexport type Recenter = {\n  type: typeof RECENTER,\n}\n\nexport type SetDims = {\n  type: typeof SET_DIMS,\n  payload: {w: number, h: number},\n}\n\nexport type SetCenter = {\n  type: typeof SET_CENTER,\n  payload: {cx: number, cy: number},\n}\n\nexport type ZoomIn = {\n  type: typeof ZOOM_IN,\n  payload: number,\n}\n\nexport type ZoomOut = {\n  type: typeof ZOOM_OUT,\n  payload: number,\n}\n\nexport type Action = Update | ZoomIn | ZoomOut | Recenter | SetDims | SetCenter;","import React from 'react';\nimport { ColorPreview, DownUpButtons } from '../../components';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\n\n\ntype Props = {\n  takenNames: string[],\n  onSave: (name: string, colors: string[]) => void;\n  onClose: () => void;\n}\n\ntype State = {\n  name: string,\n  num: number,\n  colors: string[],\n}\n\nclass CustomColor extends React.Component<Props> {\n  state: State\n\n  static defaultProps = {\n    takenNames: [],\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      name: '',\n      num: 2,\n      colors: ['#FF0055', '#0055FF'],\n    }\n  }\n\n  changeName = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const name = evt.target.value;\n    this.setState({name});\n  }\n\n  setNum(n: number) {\n    const num = Math.max(2, n)\n    let colors = [...this.state.colors];\n    if (num > colors.length) {\n      const x = colors[colors.length-1];\n      while (colors.length < num) {\n        colors.push(x);\n      }\n    } else {\n      colors = colors.slice(0,num);\n    }\n    this.setState({num, colors});\n  }\n\n  changeNum = (evt: React.ChangeEvent<HTMLInputElement>) => this.setNum(+evt.target.value)\n\n  changeColor = (i: number) => {\n    return (evt: React.ChangeEvent<HTMLInputElement>) => {\n      const colors = [...this.state.colors];\n      colors[i] = evt.target.value;\n      this.setState({colors});\n    }\n  }\n\n  addColor = () => this.setNum(this.state.num + 1);\n  removeColor = () => this.setNum(this.state.num - 1);\n\n  save = () => {\n    this.props.onSave(this.state.name, this.state.colors);\n    this.props.onClose();\n  }\n\n  validName = () => {\n    if (this.state.name === '') {\n      return false;\n    }\n    this.props.takenNames.forEach(k => {\n      if (k.toLowerCase() === this.state.name.toLowerCase()) {\n        return false;\n      }\n    })\n    return true;\n  }\n\n  renderColorInput(i: number) {\n    if (i < this.state.colors.length) {\n      return (\n        <Grid item xs={1}>\n          <input type=\"color\"\n            value={this.state.colors[i]}\n            onChange={this.changeColor(i)}\n            style={{width: '40px', borderRadius: 0, padding: 0}}\n          />\n        </Grid>\n      )\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <>\n\n        <InputLabel>New Colorscheme</InputLabel>\n\n        <Box>\n        <TextField\n              label=\"Name\"\n              variant=\"filled\"\n              value={this.state.name}\n              onChange={this.changeName}\n              inputProps={{type: 'text'}}\n            />\n        </Box>\n        <Box p={1}>\n          <ColorPreview\n            style={{width: '100%', height: '4mm'}}\n            scheme=\"CUSTOM\"\n            customSchemes={{CUSTOM: this.state.colors}}\n            reverse={false}\n            skew={0}\n            width={100}\n            height={10}\n          />\n        </Box>\n        <Box>\n          <Grid container>\n            {this.state.colors.map((color: string, i: number) => (\n              <Box m={0.5}>{this.renderColorInput(i)}</Box>\n            ))}\n          </Grid>\n          <Box m={1}>\n            <DownUpButtons\n              variant=\"contained\"\n              style={{alignSelf: 'center'}}\n              onDown={this.removeColor}\n              disableDown={this.state.colors.length < 3}\n              onUp={this.addColor}\n            />\n          </Box>\n          <Box>\n          <Button \n              fullWidth color=\"primary\"\n              disabled={!this.validName()}\n              onClick={this.save}\n            >Save</Button>\n          </Box>\n        </Box>\n      </>\n    )\n  }\n}\n\nexport default CustomColor","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types';\nimport { Modal } from '../../store/ui/types';\nimport { setModal } from '../../store/ui/actions'\nimport AlgorithmSettings from './AlgorithmSettings';\nimport ColorSettings from './ColorSettings';\nimport ViewSettings from './ViewSettings';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Box from '@material-ui/core/Box';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport FullResolution from './FullResolution';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Icon } from '../../components';\n\ntype Props = {\n  open: boolean\n  setModal: (modal: Modal) => void\n}\n\nconst StyledMenuItem = withStyles({\n  root: {\n    padding: '1em',\n  }\n})(MenuItem)\n\nconst StyledLabel = withStyles({\n  root: {\n    padding: 0,\n    margin: 0,\n  }\n})(ListItemText)\n\n\nconst StyledSwipeableDrawer = withStyles({\n  paper: {\n    display: 'flex',\n    flexDirection: 'row',\n    height: '100%',\n    maxWidth: '90vw',\n  }\n})(SwipeableDrawer)\n\nenum Menu {\n  None,\n  Algorithm,\n  Color,\n  View,\n}\n\nclass SettingsDrawer extends React.Component<Props> {\n  state: {\n    menu: Menu,\n    popup: boolean,\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      menu: Menu.None,\n      popup: false,\n    }\n  }\n\n\n\n  openMenu = () => this.props.setModal(Modal.Menu);\n  openAlgorithm = () => this.setState({menu: Menu.Algorithm});\n  openColor = () => this.setState({menu: Menu.Color});\n  openView = () => this.setState({menu: Menu.View});\n  closeAll = () => {\n    this.setState({menu: Menu.None});\n    this.closePopup();\n    this.props.setModal(Modal.None);\n  }\n\n  openPopup = () => this.setState({popup: true})\n  closePopup = () => this.setState({popup: false})\n\n  render() {\n    const labelStyle = this.state.menu === Menu.None ? {} : {display: 'none'};\n    const listStyle = this.state.menu === Menu.None ? {} : {width: '4em'}\n    return (\n      <>\n      <StyledSwipeableDrawer\n        open={this.props.open}\n        onOpen={this.openMenu}\n        onClose={this.closeAll}\n      >\n        <List style={listStyle}>\n          <StyledMenuItem onClick={this.openAlgorithm}>\n            <ListItemIcon><Icon.Functions/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Algorithm</StyledLabel>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={this.openColor}>\n            <ListItemIcon><Icon.Palette/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Colors</StyledLabel>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={this.openView}>\n            <ListItemIcon><Icon.View/></ListItemIcon>\n            <StyledLabel style={labelStyle}>View</StyledLabel>\n          </StyledMenuItem>\n          <Divider/>\n          <StyledMenuItem onClick={this.openPopup}>\n            <ListItemIcon><Icon.FullResolution/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Render Full Resolution</StyledLabel>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={this.closeAll} style={{paddingTop: '2em', paddingBottom: '2em'}}>\n            <ListItemIcon><Icon.Back/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Close</StyledLabel>\n          </StyledMenuItem>\n        </List>\n        <Box>\n          {this.state.menu === Menu.Algorithm ? \n            <AlgorithmSettings \n              //onClose={this.closeAll}\n            />\n          : this.state.menu === Menu.Color ? \n            <ColorSettings \n              //onClose={this.closeAll}\n            />\n          : this.state.menu === Menu.View ? \n            <ViewSettings \n              //onClose={this.closeAll}\n            />\n          : null}\n        </Box>\n        \n      </StyledSwipeableDrawer>\n      <FullResolution open={this.state.popup} onClose={this.closePopup}/>\n      </>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({\n    open: state.ui.modal === Modal.Menu,\n  }),\n  (dispatch: Dispatch) => ({\n    setModal: (modal: Modal) => dispatch(setModal(modal))\n  })\n)(SettingsDrawer)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState } from '../../store/types';\nimport * as ColorTypes from '../../store/color/types';\nimport { update as updateColor, addScheme } from '../../store/color/actions';\nimport { setCanvasAction } from '../../store/ui/actions';\nimport { CanvasAction } from '../../store/ui/types';\nimport {\n  ColorPreview,\n  SettingsContainer,\n  Select,\n  Option,\n  OptionLabel,\n} from '../../components';\nimport CustomColor from './CustomColor';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Popover from '@material-ui/core/Popover';\nimport Slider from '@material-ui/core/Slider';\nimport Switch from '@material-ui/core/Switch';\n\n\ntype Props = {\n  current: ColorTypes.State,\n  updateColor: (update: Partial<ColorTypes.State>) => void\n  addScheme: (k: string, colors: string[]) => void\n  onClose?: () => void\n}\n\n\ntype Evt = any\n\nclass ColorSettings extends React.Component<Props> {\n  state: {\n    scheme: ColorTypes.SchemeName,\n    reverse: boolean,\n    skew: number,\n    adaptiveScale: boolean,\n    customPopup: boolean,\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      scheme: props.current.scheme,\n      reverse: props.current.reverse,\n      skew: props.current.skew,\n      adaptiveScale: props.current.adaptiveScale,\n      customPopup: false,\n    }\n  }\n\n  openCustomPopup = () => this.setState({customPopup: true})\n  closeCustomPopup = () => this.setState({customPopup: false})\n\n  setScheme(scheme: string) {\n    this.setState({scheme});\n  }\n\n  changeReverse = (evt: Evt) => this.setState({reverse: evt.target.checked});\n  changeSkew = (evt: Evt, skew: number | number[]) => this.setState({skew});\n\n  changeAdaptiveScale = (evt: Evt) => this.setState({adaptiveScale: evt.target.checked})\n\n  selectScheme = (evt: any) => {\n    const scheme = evt.target.value;\n    if (scheme === 'CUSTOM') {\n      this.openCustomPopup();\n    } else {\n      this.setScheme(scheme);\n    }\n  }\n\n  hasChanged = () => {\n    if (this.state.scheme !== this.props.current.scheme\n      || this.state.reverse !== this.props.current.reverse\n      || this.state.adaptiveScale !== this.props.current.adaptiveScale\n      || this.state.skew !== this.props.current.skew) {\n      return true;\n    }\n    return false;\n  }\n\n  saveScheme = (k: string, colors: string[]) => {\n    this.props.addScheme(k, colors);\n    this.setScheme(k);\n  }\n\n  apply = () => {\n    this.props.updateColor({\n      scheme: this.state.scheme,\n      reverse: this.state.reverse,\n      skew: this.state.skew,\n      adaptiveScale: this.state.adaptiveScale,\n    });\n    if (this.props.onClose) {\n      this.props.onClose()\n    }\n  }\n\n  revert = () => {\n    this.setState({\n      scheme: this.props.current.scheme,\n      reverse: this.props.current.reverse,\n      skew: this.props.current.skew,\n    })\n  }\n\n  render() {\n    return (\n      <>\n        <SettingsContainer>\n          <Box m={1}>\n            <Box m={1}>\n              <Select select\n                label=\"Scheme\"\n                value={this.state.scheme}\n                onChange={this.selectScheme}\n              >\n                <Option value=\"CUSTOM\">\n                  <OptionLabel data=\"CREATE NEW SCHEME\"/>\n                </Option>\n                {this.props.current.schemeList.sort().map(k => (\n                  <Option key={k} value={k}>\n                    <OptionLabel data={k}/>\n                  </Option>\n                ))}\n                {Object.keys(this.props.current.customSchemes).sort().map(k => (\n                  <Option key={k} value={k}>\n                    <OptionLabel data={k}/>\n                  </Option>\n                ))}\n              </Select>\n            </Box>\n            <Box m={2}>\n              <FormControlLabel\n                label=\"Reversed\"\n                control={\n                  <Switch checked={this.state.reverse}\n                    onChange={this.changeReverse}\n                    edge=\"end\"\n                  />\n                }\n              />\n            </Box>\n\n            <Box m={2}>\n              <FormControlLabel\n                label=\"Adaptive Scale\"\n                control={\n                  <Switch checked={this.state.adaptiveScale}\n                    onChange={this.changeAdaptiveScale}\n                    edge=\"end\"\n                  />\n                }\n              />\n            </Box>\n\n            <Box m={2} style={this.state.adaptiveScale ? {display: 'none'} : {}}>\n              <FormControl fullWidth>\n                <InputLabel shrink>Skew</InputLabel>\n                <Slider\n                  color=\"secondary\"\n                  value={this.state.skew}\n                  onChange={this.changeSkew}\n                  min={-5}\n                  max={5}\n                  step={0.1}\n                />\n              </FormControl>\n            </Box>\n\n            <Box m={1}>\n              <ColorPreview \n                style={{width: '100%', height: '4mm'}}\n                scheme={this.state.scheme}\n                customSchemes={this.props.current.customSchemes}\n                reverse={this.state.reverse}\n                skew={this.state.skew}\n                width={100}\n                height={10}\n              />\n            </Box>\n\n            <Box m={1}>\n              <ColorPreview \n                style={{width: '100%', height: '4mm'}}\n                scheme={this.props.current.scheme}\n                customSchemes={this.props.current.customSchemes}\n                reverse={this.props.current.reverse}\n                skew={this.props.current.skew}\n                width={100}\n                height={10}\n              />\n              <InputLabel>Current</InputLabel>\n            </Box>\n\n            \n            <ButtonGroup fullWidth color=\"primary\" orientation=\"vertical\">\n              <Button \n                onClick={this.apply}\n                disabled={!this.hasChanged()}\n              >Apply</Button>\n              <Button\n                onClick={this.revert}\n                disabled={!this.hasChanged()}\n              >Reset</Button>\n            </ButtonGroup>\n\n          </Box>\n        </SettingsContainer>\n\n        <Popover\n          open={this.state.customPopup}\n          onClose={this.closeCustomPopup}\n        >\n          <Box m={2}>\n            <CustomColor\n              onSave={this.saveScheme}\n              onClose={this.closeCustomPopup}\n              takenNames={[\n                ...this.props.current.schemeList,\n                ...Object.keys(this.props.current.customSchemes)\n              ]}\n            />\n          </Box>\n        </Popover>\n      </>\n    )\n  }\n}\n\nexport default connect(\n  (state: AppState) => ({\n    current: {...state.color},\n  }),\n  (dispatch) => ({\n    updateColor: (updates: Partial<ColorTypes.State>) => {\n      dispatch(updateColor(updates));\n      dispatch(setCanvasAction(CanvasAction.Color));\n    },\n    addScheme: (k: string, colors: string[]) => {\n      dispatch(addScheme(k, colors));\n    },\n  }),\n)(ColorSettings);","import {\n  UPDATE,\n  ADD_SCHEME,\n  State,\n  Update,\n  AddScheme,\n} from './types';\n\n\nexport const update = (color: Partial<State>): Update => ({\n  type: UPDATE,\n  payload: color,\n})\n\nexport const addScheme = (name: string, colors: string[]): AddScheme => ({\n  type: ADD_SCHEME,\n  payload: {name, colors}\n})\n","export const ADD_SCHEME = 'COLOR_ADD_SCHEME';\nexport const UPDATE = 'COLOR_UPDATE';\n\nexport type SchemeName = string\n\nexport type State = {\n  scheme: SchemeName,\n  reverse: boolean,\n  skew: number,\n  adaptiveScale: boolean,\n  schemeList: string[],\n  customSchemes: {[k: string]: string[]}\n}\n\nexport type Update = {\n  type: typeof UPDATE,\n  payload: Partial<State>,\n}\n\nexport type AddScheme = {\n  type: typeof ADD_SCHEME,\n  payload: {\n    name: string,\n    colors: string[],\n  }\n}\n\nexport type Action = Update | AddScheme","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState } from '../../store/types';\nimport { State as ViewState } from '../../store/view/types';\nimport * as ViewActions from '../../store/view/actions';\nimport { startDrawing } from '../../store/ui/actions';\nimport { NumberInput, SettingsContainer } from '../../components';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\n\ntype Props = {\n  current: ViewState\n  updateView: (update: Partial<ViewState>) => void\n  onClose?: () => void\n}\n\ntype Evt = React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n\nclass ViewSettings extends React.Component<Props> {\n  state: {\n    current: ViewState,\n  }\n  centerStep: number\n\n  constructor(props: Props) {\n    super(props);\n    this.centerStep = 10 / this.props.current.ppu;\n    this.state = {\n      current: {...props.current},\n    }\n  }\n\n  hasChanged = () => {\n    for (const k in this.props.current) {\n      if (this.props.current[k] !== this.state.current[k]) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  apply = () => {\n    let {h, ppu, ...rest} = this.state.current;\n    this.props.updateView({h, ppu, ...rest});\n    if (this.props.onClose) {\n      this.props.onClose()\n    }\n  }\n\n  revert = () => {\n    this.setState({current: {...this.props.current}});\n  }\n\n  setCurrent(x: Partial<ViewState>) {\n    this.setState({current: {...this.state.current, ...x}});\n  }\n\n  setCX = (evt: Evt) => this.setCurrent({cx: +evt.target.value});\n  setCY = (evt: Evt) => this.setCurrent({cy: +evt.target.value});\n  setW = (evt: Evt) => this.setCurrent({w: +evt.target.value});\n  setH = (evt: Evt) => this.setCurrent({h: +evt.target.value});\n  setPPU = (evt: Evt) => this.setCurrent({ppu: +evt.target.value});\n  setPreviewPixels = (evt: Evt) => this.setCurrent({previewPixels: +evt.target.value});\n\n\n  render() {\n    return (\n      <SettingsContainer\n      >\n        <Box m={1}>\n        <Box m={1}>\n          <InputLabel>Full Resolution</InputLabel>\n          <Grid container spacing={1}>\n            <Grid item xs={6}>\n              <NumberInput\n                fullWidth={false}\n                label=\"Width\"\n                value={+this.state.current.w} \n                onChange={this.setW}\n                step={1}\n                min={1}\n                inputProps={{style: {maxWidth: '5em'}}}\n              />\n            </Grid>\n            <Grid item xs={6}>\n              <NumberInput\n                fullWidth={false}\n                label=\"Height\" \n                value={+this.state.current.h} \n                onChange={this.setH} \n                step={1}\n                min={1}\n                inputProps={{style: {maxWidth: '5em'}}}\n              />\n            </Grid>\n          </Grid>\n\n          <Box>\n            <NumberInput\n              label=\"Preview pixel count\"\n              value={+this.state.current.previewPixels} \n              onChange={this.setPreviewPixels} \n              step={10000}\n              min={10000}\n            />\n          </Box>\n\n          <Box>\n            <NumberInput\n              label=\"Center x-coordinate\"\n              value={+this.state.current.cx} \n              onChange={this.setCX} \n              step={this.centerStep}\n            />\n          </Box>\n\n          <Box>\n            <NumberInput\n              label=\"Center y-coordinate\"\n              value={+this.state.current.cy} \n              onChange={this.setCY} \n              step={this.centerStep}\n            />\n          </Box>\n\n          <Box>\n            <NumberInput\n              label=\"Scale (pixels per unit)\"\n              value={+this.state.current.ppu} \n              onChange={this.setPPU} \n              step={10}\n              min={0}\n            />\n          </Box>\n\n          <ButtonGroup fullWidth color=\"primary\" orientation=\"vertical\">\n            <Button \n              onClick={this.apply}\n              disabled={!this.hasChanged()}\n            >Apply</Button>\n            <Button\n              onClick={this.revert}\n              disabled={!this.hasChanged()}\n            >Reset</Button>\n\n          </ButtonGroup>\n        </Box>\n      </Box>\n      </SettingsContainer>\n    )\n  }\n  \n}\n\nexport default connect(\n  (state: AppState) => ({\n    current: state.view,\n  }),\n  (dispatch) => ({\n    updateView: (update: Partial<ViewState>) => {\n      dispatch(ViewActions.update(update));\n      dispatch(startDrawing());\n    },\n  })\n)(ViewSettings)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { startDrawing } from '../../store/ui/actions';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\n\ntype Props = {\n  open: boolean\n  onClose: () => void\n  startDrawing: (fullRes?: boolean) => void\n}\n\nconst FullResolutionPopup = (props: Props) => {\n  const drawFull = () => {\n    props.startDrawing(true);\n    props.onClose();\n  }\n\n  return (\n    <Popover \n      open={props.open} \n      onClose={props.onClose}\n      anchorOrigin={{\n        vertical: 'center',\n        horizontal: 'center',\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'center',\n      }}\n    >\n      <Box m={2}>\n        <Box m={1}>\n          <Typography>\n            Are you sure you want to render in full resolution?\n            This may take a long time, especially on a mobile device.\n          </Typography>\n        </Box>\n      <ButtonGroup\n        fullWidth\n        color=\"primary\"\n        variant=\"outlined\">\n        <Button onClick={drawFull}>\n          Yes! Render in full resolution\n        </Button>\n        <Button onClick={props.onClose} >\n          Cancel\n        </Button>\n      </ButtonGroup>\n      </Box>\n    </Popover>\n  )\n}\n\n\nexport default connect(\n  null,\n  (dispatch: any) => ({\n    startDrawing: (fullResolution: boolean=false) => dispatch(startDrawing(fullResolution))\n  })\n)(FullResolutionPopup);","import SettingsMenu from './SettingsMenu'\n\nexport default SettingsMenu","import React from 'react';\nimport { connect } from 'react-redux';\nimport { zoomIn, zoomOut } from '../../store/view/actions';\nimport { startDrawing } from '../../store/ui/actions';\nimport DownUpButtons, { DownUpButtonsProps } from '../../components/DownUpButtons';\nimport { Icon } from '../../components';\n\ninterface NewProps {\n  factor?: number\n  label?: string\n  fontSize?: 'small' | 'default' | 'large' | 'inherit'\n  zoomIn: (n: number) => void\n  zoomOut: (n: number) => void\n}\n\ninterface Props extends NewProps, Omit<DownUpButtonsProps, 'onUp' | 'onDown'> {}\n\nconst Zoom = ({factor=2, zoomIn, zoomOut, ...rest}: Props) => {\n  const zin = () => zoomIn(factor);\n  const zout = () => zoomOut(factor);\n  \n  return (\n    <DownUpButtons \n      {...rest}\n      onUp={zin} \n      onDown={zout} \n      downIcon={Icon.ZoomOut} \n      upIcon={Icon.ZoomIn}\n    />\n  )\n}\n\n\n\nexport default connect(\n  null,\n  (dispatch: any) => ({\n    zoomIn: (n: number) => {\n      dispatch(zoomIn(n));\n      dispatch(startDrawing());\n    },\n    zoomOut: (n: number) => {\n      dispatch(zoomOut(n));\n      dispatch(startDrawing());\n    }\n  })\n)(Zoom)","import { PixelCalculator } from './types'\nimport { colorScale } from './colors';\n\n\nfunction linearScale(domain: [number, number], range: [number,number]) {\n  const m = (range[1] - range[0]) / (domain[1] - domain[0])\n  const b = range[0] - m*domain[0]\n  return (n: number) => m*n + b;\n}\n\n\nclass CanvasDrawer {\n  canvas: HTMLCanvasElement\n  values: {[k: number]: [number, number][]}\n  scale: number\n  size: {w: number, h: number}\n\n  constructor(size: {\n    w: number\n    h: number\n  }) {\n    this.size = size\n    this.canvas = document.createElement('canvas');\n    this.values = {};\n    this.scale = 1;\n    this.resize();\n  }\n\n  attach(canvas: HTMLCanvasElement) {\n    this.canvas = canvas;\n    this.resize();\n    this.clear();\n  }\n\n  resize(size?: {w: number, h: number}) {\n    if (size) {\n      this.size = {...this.size, ...size}\n      this.resize()\n    } else {\n      this.canvas.width = this.size.w * this.scale;\n      this.canvas.height = this.size.h * this.scale;\n    }\n  }\n\n  clear() {\n    const ctx = this.canvas.getContext('2d');\n    if (ctx) ctx.clearRect(0, 0, this.size.w, this.size.h);\n    this.values = {};\n  }\n\n  _setValue(x: number, y: number, value: number) {\n    if (!this.values[value]) this.values[value] = [];\n    this.values[value].push([x, y]);\n  }\n\n  calculatePixels(f: PixelCalculator, x: [number,number], y: [number,number]) {\n    this.values = {};\n    const {w, h} = this.size;\n    const xscale = linearScale([0, w], x);\n    const yscale = linearScale([h, 0], y);\n    for (let r = 0; r < h; r++) {\n      const y = yscale(r);\n      for (let c = 0; c < w; c++) {\n        const x = xscale(c);\n        this._setValue(c, r, f(x, y))\n      }\n    }\n  }\n\n  changeIterations(f: PixelCalculator, x: [number,number], y: [number,number], iterations: number) {\n    const tocalc: [number,number][] = [];\n    const max = Math.max(...Object.keys(this.values).map(n => +n));\n    if (max < iterations) {\n      tocalc.push(...this.values[max])\n      this.values[max] = [];\n    } else if (max > iterations) {\n      for (const v in this.values) {\n        if (+v > iterations) {\n          this.values[iterations].push(...this.values[v]);\n          this.values[v] = [];\n        }\n      }\n    }\n    if (tocalc.length) {\n      const {w, h} = this.size;\n      const xscale = linearScale([0, w], x);\n      const yscale = linearScale([h, 0], y);\n      for (const [r, c] of tocalc) {\n        this._setValue(c, r, f(xscale(r), yscale(c)))\n      }\n    }\n  }\n\n  _applyColors(cmap: (n: number) => string) {\n    const ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n    if (this.scale !== 1) {\n      ctx.setTransform(this.scale, 0, 0, this.scale, 0, 0)\n    }\n    ctx.clearRect(0, 0, this.size.w, this.size.h)\n    for (const value in this.values) {\n      ctx.beginPath();\n      for (const pt of this.values[value]) {\n        ctx.rect(pt[0], pt[1], 1, 1);\n      }\n      ctx.fillStyle = cmap(+value);\n      ctx.fill();\n    }\n  }\n\n  \n  colorPixels(colors: Parameters<typeof colorScale>[0], domain: [number,number] | 'auto'='auto') {\n    if (domain === 'auto') {\n      const vals = Object.keys(this.values).map(n => +n);\n      domain = [Math.min(...vals), Math.max(...vals)]\n    }\n    this._applyColors(colorScale(colors).scale(domain))\n  }\n\n}\n\nexport default CanvasDrawer;","import { FractalInterface, ControlProps } from '../../types'\n\n\n// create, settings, controls, random?\n\n\nexport function controls<T>(x: ControlProps[]=[]): Pick<FractalInterface<T>,'controls'> {\n  return {controls: x as ControlProps[]};\n}\n\nexport function settings<T>(x: any[]=[]): Pick<FractalInterface<T>,'settings'> {\n  return {settings: x};\n}","import { Complex } from './math/types';\nimport { abs2 } from './math/complex';\n\n\nexport default function(bound: number, iterations: number) {\n  const b2 = bound * bound;\n  return (\n    f: (n: Complex) => Complex,\n    z0: Complex = {re: 0, im: 0}, \n  ) => {\n    let k = 0;\n    let z = z0;\n    while (k < iterations) {\n      k += 1;\n      z = f(z);\n      if (abs2(z) > b2) break;\n    }\n    return k;\n  }\n}","\ntype NumberOpts = {\n  fixed?: number\n  round?: number\n  sign?: boolean\n}\n\nexport function num(n: number, {\n  sign,\n  fixed=4\n}: NumberOpts={}): string {\n  if (sign && !(n < 0)) {\n    return '+' + num(n, {fixed})\n  }\n  if (fixed) {\n    return (+(n.toFixed(fixed))).toString()\n  }\n  return n.toString()\n}\n\n\n\nexport function rounder(p: number) {\n  const d = Math.pow(10, p);\n  return (n: number) => Math.round(n * d) / d;\n}\n\n\n\nexport function science(n: number, p: number=4) {\n  const a = n.toPrecision(4);\n  const b = a.split('e')\n  if (b.length === 1) {\n    return a;\n  } else {\n    return b[0] + '\\\\times 10^{' + b[1] + '}'\n  }\n}","import { FractalInterface, Complex, ControlProps } from '../../types'\nimport { StringOrMath } from '../../../components/TypographyWithMath';\nimport { complex } from '../../math/complex';\nimport escapeTime from '../../escapeTime';\nimport { num } from '../../formatting';\nimport { settings, controls } from './base';\n\n\nexport interface EscapeParams {\n  bound: number\n  iterations: number\n}\n\nconst DefaultEscapeParams: EscapeParams ={\n  bound: 10,\n  iterations: 20,\n}\n\nexport function create<T>(x: () => T): Pick<FractalInterface<T & EscapeParams>,'create'> {\n  return {create: () => ({...DefaultEscapeParams, ...x()})};\n}\n\nexport function pixel<T>(\n    f: (p: T) => (c: Complex) => (z: Complex) => Complex,\n    z0: 0 | 'c' | ((p: T) => (c: Complex) => Complex)=0,\n): Pick<FractalInterface<T & EscapeParams>,'pixel'> {\n  if (z0 === 0) {\n    return ({pixel: (p: T & EscapeParams) => {\n      const func = f(p)\n      return (x: number, y: number) => {\n        return escapeTime(p.bound, p.iterations)(func(complex(x, y)))\n      };\n    }});\n  }\n  if (z0 === 'c') {\n    return ({pixel: (p: T & EscapeParams) => {\n      const func = f(p)\n      return (x: number, y: number) => {\n        return escapeTime(p.bound, p.iterations)(func(complex(x, y)), complex(x, y))\n      };\n    }});\n  }\n  return ({pixel: (p: T & EscapeParams) => {\n    const func = f(p)\n    const zz = z0(p)\n    return (x: number, y: number) => {\n      return escapeTime(p.bound, p.iterations)(func(complex(x, y)), zz(complex(x, y)))\n    };\n  }});\n}\n\nexport function description<T>(\n    f: (p: T & EscapeParams) => string,\n    z0: 0 | 'c' | ((p: T & EscapeParams) => string)=0,\n): Pick<FractalInterface<T & EscapeParams>,'description'> {\n  return {\n    description: (p: T & EscapeParams) => describeEscapeFunction(\n      f(p),\n      z0 === 0 ? '0' : z0 === 'c' ? 'x+yi' : z0(p),\n      p.bound,\n      p.iterations,\n    ),\n  }\n}\n\nexport function formula<T>(\n  f: (p: T) => string,\n): Pick<FractalInterface<T>,'formula'> {\n  return ({formula: (p: T) => ({math: f(p)})});\n}\n\nexport function escape<T>(props: {\n  label: string,\n  f: (p: T) => (c: Complex) => (z: Complex) => Complex,\n  latexF: (p: T & EscapeParams) => string,\n  z0?: 0 | 'c' | ((p: T) => (c: Complex) => Complex),\n  latexZ0?: 0 | 'c' | ((p: T) => string),\n  create: () => T,\n  settings?: any[],\n  controls?: ControlProps[]\n}): FractalInterface<T & EscapeParams> {\n  return {\n    label: props.label,\n    ...pixel(props.f, props.z0),\n    ...description(props.latexF, props.latexZ0),\n    ...formula(props.latexF),\n    ...create(props.create),\n    ...settings(props.settings),\n    ...controls(props.controls),\n  }\n}\n\n\nexport function describeEscapeFunction(\n  f: string, \n  z0: string, \n  bound: number, \n  iterations: number,\n): StringOrMath[] {\n\n  const fmla = (\n    '\\\\begin{aligned}'\n    + 'z_0 &= ' + z0\n    + '\\\\\\\\' \n    + 'z_{n+1} &= ' + f.replace(/z/g, 'z_n')\n    + '\\\\end{aligned}'\n  );\n\n  return [\n    {math: fmla, displayMode: true},\n    \"The color of the pixel located at \", {math: \"(x, y)\"},\n    \" corresponds to \", {math: \"k\"}, \", where \", {math: \"z_k\"},\n    \" is the first term of the above sequence such that \",\n    {math: `|z_k| > ${num(bound)}`},\n    \". If this does not occur in the first \", {math: num(iterations)},\n    \" terms of the sequence, then \", {math: \"k = \" + num(iterations)}, '.',\n  ]\n}","import { FractalInterface, Complex, ControlProps } from '../../types'\nimport { complex } from '../../math/complex';\nimport escapeTime from '../../escapeTime';\nimport { settings, controls } from './base';\nimport { EscapeParams, description as _description, formula, create } from './escape';\n\n\nexport function label<T>(f: string): Pick<FractalInterface<T>,'label'> {\n  return ({label: ['Julia: ', {math: f}]})\n}\n\nexport function pixel<T extends EscapeParams>(\n  f: (p: T) => (z: Complex) => Complex,\n): Pick<FractalInterface<T>,'pixel'> {\n  return ({pixel: (p: T) => {\n    const func = f(p)\n    return (x: number, y: number) => {\n      return escapeTime(p.bound, p.iterations)(func, complex(x, y))\n    };\n  }});\n}\n\nexport function description<T extends EscapeParams>(\n  f: (p: T) => string\n): Pick<FractalInterface<T>,'description'> {\n  return _description<T>(f, 'c')\n}\n\nexport function julia<T>(props: {\n  f: (p: T & EscapeParams) => (z: Complex) => Complex,\n  label: string,\n  latexF: (p: T & EscapeParams) => string,\n  create: () => T,\n  settings?: any[],\n  controls?: ControlProps[],\n}): FractalInterface<T & EscapeParams> {\n  return {\n    ...label(props.label),\n    ...pixel(props.f),\n    ...description(props.latexF),\n    ...formula(props.latexF),\n    ...create(props.create),\n    ...settings(props.settings),\n    ...controls(props.controls),\n  }\n}\n\nexport function noParam(props: {\n  f: (z: Complex) => Complex,\n  latexF: string,\n  settings?: any[],\n  create?: () => Partial<EscapeParams>\n  controls?: ControlProps[],\n}): FractalInterface<EscapeParams> {\n  return {\n    ...julia({\n        f: () => props.f,\n        label: props.latexF,\n        latexF: () => props.latexF,\n        create: props.create ? props.create : () => ({}),\n        settings: props.settings,\n        controls: props.controls,\n    }),\n  }\n}","\nexport function isInt(n: number) {\n  return n % 1 === 0;\n}\n","import { Complex, Polar, Coeffs } from './types';\nimport { add, powInt, multReal, toPolar, addPolar } from './complex';\nimport * as P from './polar';\nimport * as Math from './real';\nimport { isInt } from './util';\n\n\n/**\n * { exponent: coefficient }\n * can be object \n *  {2: 3, 5: 1} => 3z^2 + z^5\n * or array\n *  [1, 0, -3, 5] => z^0 - 3z^2 + 5z^3\n */\n\n\nfunction allAreInts(coeffs: Coeffs): boolean {\n  for (const k in coeffs) {\n    if (!isInt(+k) || +k < 0) return false;\n  }\n  return true;\n}\n\n\nexport default function(coeffs: Coeffs): (z: Complex) => Complex {\n  if (allAreInts(coeffs)) {\n    return (z: Complex) => {\n      let result: Complex = {re: 0, im: 0};\n      for (const k in coeffs) {\n        result = add(result, multReal(powInt(z, +k), coeffs[k]))\n      }\n      return result\n    }\n  } else {\n    return (z: Complex) => {\n      const p = toPolar(z);\n      let result: Complex = {re: 0, im: 0};\n      for (const k in coeffs) {\n        result = addPolar(result, P.multReal(P.powReal(p, +k), coeffs[k]))\n      }\n      return result\n    }\n  } \n}","import { Complex, ControlType, ControlProps } from '../types';\nimport * as mix from './mixers';\nimport {\n  add,\n  powInt,\n  powFloat,\n} from '../math/complex';\nimport { R as Math } from '../math';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\n\nexport interface BurningShipParams { k: number }\n\nfunction absabs(z: Complex) {\n  return {re: Math.abs(z.re), im: Math.abs(z.im)};\n}\n\nexport const BurningShip1 = mix.escape.escape<BurningShipParams>({\n  label: 'Burning Ship',\n  latexF: (p: BurningShipParams) => `\\\\left(|Re(z)|+|Im(z)|\\\\right)^{${num(p.k)}}+x-yi`,\n  f: (p: BurningShipParams) => {\n    const k = p.k;\n    if (isInt(k)) {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powInt(absabs(z), k), cc);\n      }\n    } else {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powFloat(absabs(z), k), cc);\n      }\n    }\n  },\n  create: () => ({k: 2}),\n  controls: [\n    {\n      type: ControlType.Number,\n      label: 'exponent (k)',\n      param: 'k',\n      step: 1,\n      min: 0,\n    }\n  ] as ControlProps[],\n})\n\n\n\nconst BurningShip2 = mix.escape.escape<BurningShipParams>({\n  label: 'Burning Ship II',\n  latexF: (p: BurningShipParams) => `\\\\left(|Re(z)|+|Im(z)|\\\\right)^{${num(p.k)}}+x-yi`,\n  f: (p: BurningShipParams) => {\n    const k = p.k;\n    if (isInt(k)) {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powInt(absabs(z), k), cc);\n      }\n    } else {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powFloat(absabs(z), k), cc);\n      }\n    }\n  },\n  create: () => ({k: 2}),\n  controls: [\n    {\n      type: ControlType.Number,\n      label: 'exponent (k)',\n      param: 'k',\n      step: 1,\n      min: 0,\n    }\n  ] as ControlProps[],\n})\n\n","import { Complex, ControlType, ControlProps } from '../types';\nimport * as mix from './mixers';\nimport {\n  complex,\n  add,\n  powInt,\n  powFloat,\n  exp,\n  sqrt,\n  sinh,\n  mult,\n  multReal,\n} from '../math/complex';\nimport polynomial from '../math/polynomial';\nimport { R as Math } from '../math';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\nfunction randomC() {\n  let angle = Math.PI -2 * Math.asin(Math.pow(Math.random(), 0.9));\n  if (Math.random() < 0.5) angle = 2*Math.PI-angle;\n  const radius = 0.3 + Math.sin(angle / 2) * 0.6 * (Math.random() * 0.4 + 0.8);\n  return [\n    Math.round(radius * Math.cos(angle) * 1000) / 1000,\n    Math.round(radius * Math.sin(angle) * 1000) / 1000,\n  ] as [number, number]\n}\n\nexport interface JuliaKCParams {\n  k: number\n  c: [number, number]\n}\n\nexport const Julia1KC = {\n  ...mix.julia.julia<JuliaKCParams>({\n    label: 'z^k+c',\n\n    f: (p: JuliaKCParams) => {\n      const cc = complex(p.c[0], p.c[1])\n      const {k} = p;\n      if (isInt(p.k)) {\n        return (z: Complex) => add(powInt(z, k), cc);\n      } else {\n        return (z: Complex) => add(powFloat(z, k), cc);\n      } \n    },\n\n    latexF: (p: JuliaKCParams) => `z^{${num(p.k)}}${num(p.c[0],{sign:true})}${num(p.c[1],{sign:true})}i`,\n\n    create: () => ({k: 2, c: randomC()}),\n\n    controls: [\n      {\n        type: ControlType.Call,\n        icon: 'Random',\n        //label: 'random',\n        onCall: () => ({c: randomC()}),\n      },\n      {\n        type: ControlType.Complex,\n        label: 'seed (c)',\n        param: 'c',\n        stepRadius: 0.05,\n        stepAngle: 0.1,\n      },\n      {\n        type: ControlType.Number,\n        label: 'exponent (k)',\n        param: 'k',\n        step: 1,\n      },\n      {\n        type: ControlType.Number,\n        label: 'bound',\n        param: 'bound',\n        step: 5,\n        min: 0,\n      }\n    ],\n\n    settings: [],\n  }),\n};\n\n\nexport interface JuliaPolyParams {\n  a: number,\n  b: number,\n  m: number,\n  n: number,\n  c: [number,number],\n}\n\n\nexport const Julia1Poly = mix.julia.julia<JuliaPolyParams>({\n  label: 'az^m+bz^n+c',\n\n  f: ({a, b, c, m, n}: JuliaPolyParams) => {\n    const poly = polynomial({[m]: a, [n]: b});\n    const cc = complex(c[0], c[1]);\n    return (z: Complex) => add(poly(z), cc);\n  },\n\n  latexF: ({a, b, c, m, n}: JuliaPolyParams) => {\n    return (\n      `${num(a)}z^{${num(m)}}`\n      + `${num(b,{sign:true})}z^{${num(n)}}`\n      + `${num(c[0],{sign:true})}${num(c[1],{sign:true})}i`\n    )\n  },\n\n  create: () => ({\n    a: -5, m: -2,\n    b: 1, n: 1,\n    c: [-0.5,0.5],\n  }),\n\n  controls: [\n    ...['a', 'm', 'b', 'n'].map(p => ({\n      type: ControlType.Number,\n      param: p,\n      label: p,\n      step: p === 'a' || p === 'b' ? 1 : 0.1,\n    }) as ControlProps),\n    {\n      type: ControlType.Complex,\n      label: 'c',\n      param: 'c',\n      stepRadius: 0.05,\n      stepAngle: 0.1,\n    },\n  ],\n})\n\n\n\nexport const Julia2 = mix.julia.noParam({\n  latexF: 'e^{z^3}-0.6',\n  f: (z: Complex) => add(exp(powInt(z, 3)), complex(-0.6, 0)),\n})\n\nexport const Julia3 = mix.julia.noParam({\n  latexF: '\\\\sqrt{\\\\sinh(z^2)}+0.06+0.12i',\n  f: (z: Complex) => add(sqrt(sinh(mult(z, z))), complex(0.06, 0.12)),\n})\n","import { Complex, ControlType } from '../types';\nimport * as mix from './mixers';\nimport {\n  add,\n  powInt,\n  powFloat,\n  multReal,\n  addReal,\n  div,\n  mult,\n} from '../math/complex';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\n\nexport interface MagnetParams {\n  k: number,\n}\n\nexport const Magnet1 = mix.escape.escape<MagnetParams>({\n  label: 'Magnet Type I',\n\n  f: ({k}: MagnetParams) => {\n    const pow = isInt(k) && k > 0 ? powInt : powFloat\n    return (c: Complex) => {\n      //const c = complex(x, y);\n      const a = addReal(c, -1);\n      const b = addReal(c, -2);\n      return (z: Complex) => pow(div(\n        add(powInt(z, 2), a),\n        add(multReal(z, 2), b)\n      ), k)\n    }\n  },\n\n  latexF: ({k}: MagnetParams) => '\\\\left(\\\\frac{z^2 + x+yi - 1}{2z + x+yi - 2}\\\\right)^{' + num(k) + '}',\n\n  create: () => ({k: 2}),\n\n  controls: [\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'exponent',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 5,\n      min: 0,\n    },\n  ],\n})\n\nexport interface Magnet2Params {k: number}\n\nexport const Magnet2 = mix.escape.escape<Magnet2Params>({\n  label: 'Magnet Type II',\n\n  create: () => ({k: 2}),\n\n  f: ({k}: Magnet2Params) => {\n    const pow = isInt(k) && k > 0 ? powInt : powFloat\n    return (c: Complex) => {\n      //const c = complex(x, y);\n      const a = addReal(c, -1);\n      const b = addReal(c, -2);\n      const a3 = multReal(a, 3);\n      const b3 = multReal(b, 3);\n      const ab = mult(a, b)\n      return (z: Complex) => pow(div(\n        add(add(powInt(z, 3), mult(a3, z)), ab),\n        add(add(multReal(powInt(z, 2), 3), mult(b3, z)), addReal(ab, 1))\n      ), k)\n    }\n  },\n\n  latexF: ({k}: Magnet2Params) => ('\\\\left(\\\\frac' \n  + '{z^3 + 3(x+yi-1)z + (x+yi-1)(x+yi-2)}' \n  + '{3z^2 + 3(x+yi-2)z + (x+yi-1)(x+yi-2) + 1}' \n  + '\\\\right)^{' + num(k) + '}'\n  ),\n\n  controls: [\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'exponent',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 5,\n      min: 0,\n    },\n  ]\n})","import { Complex, ControlType, FractalInterface } from '../types';\nimport { EscapeParams, describeEscapeFunction } from './mixers/escape';\nimport { BurningShipParams } from './burningship';\nimport * as mix from './mixers';\nimport {\n  complex,\n  add,\n  multReal,\n  abs2,\n  powInt,\n  powFloat,\n} from '../math/complex';\nimport { R as Math } from '../math';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\nfunction randomParams() {\n  return {scale: Math.round(Math.random() * 20)/10 + 2}\n}\n\n\nfunction mandelboxA(v: number=1) {\n  const w = v*2;\n  const f = (n: number) =>  {\n    if (n > v) return w - n;\n    else if (n < -v) return -w - n;\n    else return n;\n  }\n  return (z: Complex) => complex(f(z.re), f(z.im));\n}\n\nfunction mandelboxB(v: number=2) {\n  const v2 = v*v;\n  const recip = 1/v2;\n  return (z: Complex) => {\n    const ab2 = abs2(z);\n    if (ab2 < recip) {\n      return multReal(z, v2)\n    } else if (ab2 < 1) {\n      return multReal(z, 1/ab2)\n    } else {\n      return z\n    }\n  }\n}\n\n\n\nconst mandelboxFlatex = (v: number) => (\n  '\\\\left\\\\{\\\\begin{aligned}'\n  + `${num(2*v)} - n &, \\\\text{ if \\$n > ${num(v)}\\$}\\\\\\\\`\n  + `${num(-2*v)} - n &, \\\\text{ if \\$n < ${num(-v)}\\$}\\\\\\\\`\n  + 'n &, \\\\text{ otherwise}'\n  + '\\\\end{aligned}\\\\right.'\n);\n\nconst mandelboxAlatex = 'f(Re(z))+f(Im(z))i';\n\nconst mandelboxBlatex = (v: number) => (\n  '\\\\left\\\\{\\\\begin{aligned}'\n  + `${num(2*v)}z &, \\\\text{ if \\$|z|<${num(1/v)}\\$}\\\\\\\\`\n  + `z \\\\div |z|^2 &, \\\\text{ if \\$${num(1/v)} \\\\leq |z| < 1\\$}\\\\\\\\`\n  + 'z &, \\\\text{ otherwise}\\\\\\\\'\n  + '\\\\end{aligned}\\\\right.'\n)\n\nconst mandelboxClatex = (v: number) => num(v) + '\\\\cdot B(A(z)) + x + yi';\n\nfunction describeMandelbox(a: number, b: number, c: number, bound: number, iterations: number) {\n  return [\n    {\n      math: 'f_{\\\\mathbb{R}\\\\mapsto\\\\mathbb{R}}(n) =' + mandelboxFlatex(a),\n      displayMode: true,\n    },\n    {\n      math: 'A_{\\\\mathbb{C}\\\\mapsto\\\\mathbb{C}}(z) =' + mandelboxAlatex,\n      displayMode: true,\n    },\n    {\n      math: 'B_{\\\\mathbb{C}\\\\mapsto\\\\mathbb{C}}(z) =' + mandelboxBlatex(b),\n      displayMode: true,\n    },\n    ...describeEscapeFunction(\n      mandelboxClatex(c),\n      '0',\n      bound,\n      iterations,\n    )\n  ]\n} \n\n\nexport interface MandelboxParams {\n  a: number,\n  b: number,\n  c: number,\n}\n\nexport const Mandelbox1: FractalInterface<MandelboxParams & EscapeParams> = ({\n  label: 'Mandelbox',\n\n  ...mix.escape.pixel(\n    ({a, b, c}: MandelboxParams) => {\n      const A = mandelboxA(a)\n      const B = mandelboxB(b)\n      return (x: Complex) => (z: Complex) => {\n        return  add(multReal(B(A(z)), c), x)\n      }\n    }\n  ),\n\n  ...mix.escape.create(() => ({a: 1, b: 2, c: 2.2})),\n  ...mix.base.settings(),\n\n  formula: ({a, b, c}: MandelboxParams) => [\n    'Mandelbox (', \n    [a, b, c].map((v: number) => num(v)).join(', '), \n    ')',\n  ],\n\n  description: ({a, b, c, bound, iterations}: MandelboxParams & EscapeParams) => {\n    return describeMandelbox(a, b, c, bound, iterations);\n  },\n\n  ...mix.base.controls([\n    {\n      type: ControlType.Call,\n      icon: 'Random',\n      onCall: () => randomParams(),\n    },\n    {\n      type: ControlType.Number,\n      param: 'a',\n      label: 'a',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'b',\n      label: 'b',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'c',\n      label: 'c',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 10,\n      min: 0,\n    }\n  ])\n\n});\n\n\n\ninterface BurningShipBoxParams extends BurningShipParams, MandelboxParams {}\n\nexport const BurningShip2Mandelbox: FractalInterface<BurningShipBoxParams & EscapeParams> = ({\n  label: 'Burning Ship (Mandelbox Remix)',\n\n  ...mix.escape.pixel(\n    ({a, b, c, k}: BurningShipBoxParams) => {\n      const pow = isInt(k) && k > 0 ? powInt : powFloat\n      const A = mandelboxA(a)\n      const B = mandelboxB(b)\n      return (x: Complex) => (z: Complex) => {\n        let z1 = multReal(pow(complex(Math.abs(z.re), -Math.abs(z.im)), k), 1/c);\n        return add(multReal(B(A(z1)), c), x)\n      }\n    }\n  ),\n\n  ...mix.escape.create(() => ({a: 1, b: 2, c: 2.2, k: 2, bound: 50})),\n  ...mix.base.settings(),\n\n  formula: ({a, b, c, k}: BurningShipBoxParams) => [\n    'Burning Shipbox (', \n    [a, b, c, k].map((v) => num(v)).join(', '),\n    ')'],\n\n  description: ({a, b, c, k, bound, iterations}: BurningShipBoxParams & EscapeParams) => [\n    'This follows the same algorithm as the Mandelbox fractal, but first applies the function ',\n    {\n      math: `z \\\\mapsto \\\\left(|Re(z)|-|Im(z)|\\\\right)^{${num(k)}} \\\\div ${num(c)}`,\n      displayMode: true,\n    }\n  ],\n\n  ...mix.base.controls([\n    {\n      type: ControlType.Call,\n      icon: 'Random',\n      onCall: () => ({scale: Math.round(Math.random() * 100)/100 + 0.5})\n    },\n    {\n      type: ControlType.Number,\n      param: 'a',\n      label: 'a',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'b',\n      label: 'b',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'c',\n      label: 'c',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'k',\n      step: 0.1,\n      //min: 0\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 10,\n      min: 0,\n    }\n  ])\n\n});","import { Complex, ControlType } from '../types';\nimport * as mix from './mixers';\nimport {\n  add,\n  powInt,\n  powFloat,\n} from '../math/complex';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\n\nexport interface MandelbrotParams { k: number }\n\nexport const Mandelbrot = mix.escape.escape<MandelbrotParams>({\n  label: 'Mandelbrot',\n  latexF: (p: MandelbrotParams) => `z^{${num(p.k)}}+x+yi`,\n  f: (p: MandelbrotParams) => {\n    const k = p.k;\n    if (isInt(k)) {\n      return (c: Complex) => (z: Complex) => add(powInt(z, k), c);\n    } else {\n      return (c: Complex) => (z: Complex) => add(powFloat(z, k), c);\n    }\n  },\n  create: () => ({k: 2}),\n  controls: [\n    {\n      type: ControlType.Number,\n      label: 'exponent (k)',\n      param: 'k',\n      step: 1,\n      min: 0,\n    }\n  ],\n})","import { FractalInterface } from '../types';\nimport * as burningship from './burningship';\nimport * as julias from './julias';\nimport * as magnet from './magnet';\nimport * as mandelbox from './mandelbox';\nimport * as mandelbrot from './mandelbrot';\n\nconst FractalList: {[k: string]: FractalInterface<any>} = ({\n  ...burningship,\n  ...julias,\n  ...magnet,\n  ...mandelbox,\n  ...mandelbrot,\n});\n\nexport default FractalList;","import { State as AlgState } from '../store/algorithm/types';\nimport CanvasDrawer from './CanvasDrawer';\nimport FractalList from './FractalList';\n\n\n\nfunction fractal(alg: AlgState) {\n  const fr = alg.fractals[alg.current];\n  const params = alg.params;\n  return {\n    label: fr.label,\n    pixel: fr.pixel(params),\n    formula: fr.formula(params),\n    description: fr.description(params),\n    settings: fr.settings,\n    controls: fr.controls,\n  }\n}\n\n\nexport { CanvasDrawer, FractalList, fractal }\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  NumberIncrementer,\n  ComplexIncrementer,\n } from '../../components';\nimport {\n  ControlProps, ControlType, Params, \n  ControlNumber, ControlComplex, ControlCall,\n} from '../../fractals/types'\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Icon } from '../../components';\nimport { State, Dispatch } from '../../store/types';\nimport { fractal } from '../../fractals';\nimport { updateParams } from '../../store/algorithm/actions';\nimport { startDrawing } from '../../store/ui/actions';\n\n\ninterface Props {\n  controls: ControlProps[]\n  params: Params\n  onChange: (x: Params) => void\n}\n\nclass ParamControls extends React.Component<Props> {\n\n  paramUpdater = (k: string) => {\n    return (v: any) => {\n      console.log(\"setting \" + k + ' => ' + v);\n      this.props.onChange({[k]: v});\n    }\n  }\n\n  renderNumberIncrementer(x: ControlNumber) {\n    const {param} = x;\n    return (\n      <NumberIncrementer\n        key={'number-'+param}\n        controlProps={x}\n        value={this.props.params[param]}\n        onChange={this.paramUpdater(param)}\n      />\n    )\n  }\n\n  renderComplexIncrementer(x: ControlComplex) {\n    const {param} = x;\n    return (\n      <ComplexIncrementer\n        key={'complex-'+param}\n        controlProps={x}\n        value={this.props.params[param]}\n        onChange={this.paramUpdater(param)}\n      />\n    )\n  }\n\n  renderCall(x: ControlCall) {\n    const {icon, label} = x;\n    if (label && icon === 'Random') {\n      return (\n        <Button\n          key={'action-'+label}\n          variant=\"outlined\"\n          color=\"inherit\"\n          size=\"small\"\n          onClick={() => this.props.onChange(x.onCall())}\n          startIcon={<Icon.Random/>}\n        >{x.label}</Button>\n      )\n    }\n    if (!label && icon === 'Random') {\n      return (\n        <IconButton key={'action-'+icon} onClick={() => this.props.onChange(x.onCall())}>\n          <Icon.Random/>\n        </IconButton>\n      )\n    }\n    if (label) {\n      return (\n        <Button\n          key={'action-'+label}\n          variant=\"outlined\"\n          size=\"small\"\n          onClick={() => this.props.onChange(x.onCall())}\n        >{x.label}</Button>\n      )\n    }\n  }\n\n  renderControl(x: ControlProps) {\n    if (x.type === ControlType.Number) {\n      return this.renderNumberIncrementer(x);\n    }\n    if (x.type === ControlType.Complex) {\n      return this.renderComplexIncrementer(x);\n    }\n    if (x.type === ControlType.Call) {\n      return this.renderCall(x);\n    }\n    return null;\n  }\n\n\n  render() {\n    return (\n      <>\n        {this.props.controls.map(x => this.renderControl(x))}\n      </>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({\n    controls: [...fractal(state.algorithm).controls],\n    params: {...state.algorithm.params},\n  }),\n  (dispatch: Dispatch) => ({\n    onChange: (x: Params) => {\n      dispatch(updateParams(x));\n      dispatch(startDrawing());\n    },\n  })\n)(ParamControls)","import { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types';\nimport { updateParams } from '../../store/algorithm/actions';\nimport { ControlType, ControlNumber } from '../../fractals/types';\nimport { startDrawing, startIterating } from '../../store/ui/actions';\nimport { NumberIncrementer}  from '../../components';\n\nexport default connect(\n  (state: State) => ({\n    value: state.algorithm.params.iterations,\n    controlProps: {\n      type: ControlType.Number,\n      param: 'iterations',\n      label: 'iterations',\n      step: 2,\n      min: 0,\n    } as ControlNumber\n  }),\n  (dispatch: Dispatch) => ({\n    onChange: (iterations: number) => {\n      dispatch(updateParams({iterations}));\n      dispatch(startDrawing());\n    }\n  })\n)(NumberIncrementer)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from '../../store/types';\nimport { startDrawing } from '../../store/ui/actions';\nimport { recenter } from '../../store/view/actions';\nimport Button, { ButtonProps } from '@material-ui/core/Button';\nimport { Icon } from '../../components';\n\n\n\nconst RecenterButton = (props: ButtonProps) => (\n  <Button startIcon={<Icon.Recenter/>} {...props}>\n    Recenter\n  </Button>\n)\n\nexport default connect(\n  null,\n  (dispatch: Dispatch) => ({\n    onClick: () => {\n      dispatch(recenter());\n      dispatch(startDrawing());\n    }\n  }),\n)(RecenterButton)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types'; \nimport { Nav } from '../../store/ui/types';\nimport { setNav } from '../../store/ui/actions';\nimport Zoom from './Zoom';\nimport ParamControls from './ParamControls';\nimport Iterator from './Iterator';\nimport RecenterButton from './Recenter';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport { withStyles, Theme } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\ntype Props = {\n  nav: Nav,\n  setNav: (nav: Nav) => void\n}\n\nconst OuterBox = withStyles((theme: Theme) => ({\n  root: {\n    //position: 'absolute',\n    //bottom: '0',\n    width: '100%',\n    backgroundColor: theme.palette.background.default + '99',\n  }\n}))(Paper);\n\nconst CenteringBox = withStyles({\n  root: {\n    display: 'flex',\n    flexFlow: 'row wrap',\n    alignItems: 'center',\n    justifyContent: 'space-around',\n    paddingBottom: '1em',\n  }\n})(Box)\n\n\nclass Controls extends React.Component<Props> {\n\n  closeNav = () => {\n    this.props.setNav(Nav.None)\n  }\n\n  render() {\n    const parameters = this.props.nav === Nav.Params ? {} : {display: 'none'}\n    const navigation = this.props.nav === Nav.Navigate ? {} : {display: 'none'}\n    const help = this.props.nav === Nav.Help ? {padding: '1em'} : {display: 'none'}\n    return (\n      <OuterBox elevation={0}>\n        <CenteringBox style={parameters}>\n          <ParamControls/>\n        </CenteringBox>\n        <CenteringBox style={navigation}>\n          <Iterator fontSize=\"large\"/>\n          <Zoom factor={2} fontSize=\"large\" label=\"Zoom\"/>\n          <RecenterButton />\n        </CenteringBox>\n        <CenteringBox style={help}>\n          <Typography >\n            Move the center of the image by double-clicking.\n            The buttons at the bottom of the screen will adjust the parameters of the current fractal, and the formula at the top will update to reflect any changes.\n            Clicking on the formula will display more detailed information about how the fractal was generated. \n            The menu at the top left can be used to change many settings and to select different types of fractals.\n          </Typography>\n        </CenteringBox>\n      </OuterBox>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({nav: state.ui.nav}),\n  (dispatch: Dispatch) => ({\n    setNav: (nav: Nav) => dispatch(setNav(nav)),\n  })\n)(Controls)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState, Dispatch } from '../../store/types';\nimport { State as AlgState } from '../../store/algorithm/types';\nimport { State as ColorState } from '../../store/color/types';\nimport { setCenter } from '../../store/view/actions';\nimport { setCanvasAction } from '../../store/ui/actions';\nimport { StretchMode, CanvasAction } from '../../store/ui/types';\nimport { CanvasDrawer, fractal } from '../../fractals';\nimport Box from '@material-ui/core/Box';\nimport styles from './Canvas.module.css';\n\n\ntype Props = {\n  view: {\n    w: number\n    h: number\n    ppu: number\n    cx: number\n    cy: number\n    previewPixels: number\n  }\n  color: ColorState\n  algorithm: AlgState\n  canvasAction: CanvasAction\n  stretch: StretchMode\n  setCenter: (x: number, y: number) => void\n  finishDrawing: () => void\n}\n\nclass Canvas extends React.Component<Props> {\n  drawer: CanvasDrawer\n  canvasRef: React.RefObject<HTMLCanvasElement>\n\n  isFullResolution: boolean\n\n  constructor(props: Props) {\n    super(props);\n    this.drawer = new CanvasDrawer({w: this.props.view.w, h: this.props.view.h});\n    this.canvasRef = React.createRef();\n    this.isFullResolution = false;\n  }\n\n  get canvas() {\n    return this.canvasRef.current\n  }\n\n  resize() {\n    this.drawer.resize(this.view());\n  }\n\n  view() {\n    if (this.isFullResolution) {\n      return this.props.view;\n    } else {\n      return {...this.props.view, ...scaleDown(this.props.view)}\n    }\n  }\n\n  calculateImage() {\n    const {algorithm} = this.props;\n    const view = this.view();\n    const f = fractal(algorithm).pixel;\n    const rx = view.w / view.ppu / 2;\n    const ry = view.h / view.ppu / 2;\n    this.drawer.calculatePixels(\n      f, \n      [view.cx - rx, view.cx + rx],\n      [view.cy - ry, view.cy + ry],\n    );\n  }\n\n  changeIterations() {\n    const {iterations} = this.props.algorithm.params;\n    const {algorithm} = this.props;\n    const view = this.view();\n    const f = fractal(algorithm).pixel;\n    const rx = view.w / view.ppu / 2;\n    const ry = view.h / view.ppu / 2;\n    if (iterations) {\n      this.drawer.changeIterations(\n        f, \n        [view.cx - rx, view.cx + rx],\n        [view.cy - ry, view.cy + ry],\n        iterations,\n      );\n    }\n  }\n\n  colorCanvas() {\n    if (this.props.color.adaptiveScale) {\n      this.drawer.colorPixels(this.props.color);\n    } else {\n      const {iterations} = this.props.algorithm.params;\n      this.drawer.colorPixels(this.props.color, [0, iterations]);\n    }\n  }\n\n  draw() {\n    this.resize()\n    this.calculateImage()\n    this.colorCanvas()\n    this.props.finishDrawing()\n  }\n\n  reiterate() {\n    this.changeIterations()\n    this.colorCanvas()\n    this.props.finishDrawing()\n  }\n\n  recolor() {\n    this.colorCanvas()\n    this.props.finishDrawing()\n  }\n\n  componentDidMount() {\n    if (this.canvas) {\n      this.drawer.attach(this.canvas)\n      this.isFullResolution = false;\n      this.draw()\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.canvasAction === CanvasAction.Draw) {\n      this.isFullResolution = false;\n      this.draw()\n    }\n    else if (this.props.canvasAction === CanvasAction.DrawFullResolution) {\n      this.isFullResolution = true;\n      this.draw()\n    }\n    else if (this.props.canvasAction === CanvasAction.Iterate) {\n      this.changeIterations()\n    }\n    else if (this.props.canvasAction === CanvasAction.Color) {\n      this.recolor();\n    }\n  }\n\n  centerOnClick = (evt: any) => {\n    if (this.props.setCenter) {\n      if (this.canvas) {\n        const {h, w, ppu, cx, cy} = this.props.view;\n        let {width, height} = this.canvas.getBoundingClientRect();\n        let {offsetX, offsetY} = evt.nativeEvent;\n\n        if (this.props.stretch === StretchMode.Contain) {\n          const ww = width / w;\n          const hh = height / h;\n          if (hh > ww) {\n            const imageH = h * ww;\n            offsetY -= (height - imageH) / 2\n            height = imageH\n          } else if (ww > hh) {\n            const imageW = w * hh;\n            offsetX -= (width - imageW) / 2\n            width = imageW\n          }\n        }\n\n        const pixel_x = Math.round((offsetX / width) * w);\n        const pixel_y = Math.round((offsetY / height) * h);\n        const dx = (pixel_x - (w / 2)) / ppu;\n        const dy = (pixel_y - (h / 2)) / ppu;\n        this.props.setCenter(cx + dx, cy - dy);\n      }\n    }\n  }\n\n  render() {\n    const outerClasses = [styles.Outer]\n    let objectFit: 'contain' | 'cover' | undefined\n    switch (this.props.stretch) {\n      case StretchMode.Contain:\n        objectFit = 'contain';\n        outerClasses.push(styles.Stretch);\n        break;\n      case StretchMode.Cover:\n        objectFit = 'cover';\n        outerClasses.push(styles.Stretch);\n        break;\n    }\n\n    if (this.isFullResolution) {\n      outerClasses.push(styles.FullResolution)\n    }\n    return (\n      <Box m={0} className={outerClasses.join(' ')}>\n        <div className={styles.Inner}>\n          <canvas\n            className={styles.Canvas}\n            ref={this.canvasRef}\n            onDoubleClick={this.centerOnClick}\n            style={{objectFit}}\n          />\n        </div>\n      </Box>\n    )\n  }\n}\n\n\nexport default connect(\n  (state: AppState) => ({\n    algorithm: {...state.algorithm},\n    color: state.color,\n    canvasAction: state.ui.canvasAction,\n    view: {...state.view},\n    stretch: state.ui.canvasStretch,\n  }),\n  (dispatch: Dispatch) => ({\n    setCenter: (x: number, y: number) => {\n      dispatch(setCenter(x, y));\n      dispatch(setCanvasAction(CanvasAction.Draw));\n    },\n    finishDrawing: () => dispatch(setCanvasAction(CanvasAction.None)),\n  })\n)(Canvas)\n\n\n\n\n\nfunction scaleDown({w, h, ppu, previewPixels}: {\n  w: number,\n  h: number,\n  ppu: number,\n  previewPixels: number,\n}) {\n  const pixelcount = w * h;\n  const factor = Math.min(1, Math.sqrt(previewPixels / pixelcount))\n  const result = {\n    w: Math.round(w * factor),\n    h: Math.round(h * factor),\n    ppu: Math.round(ppu * factor),\n  }\n  return result\n}","import Canvas from './Canvas';\n\n\nexport default Canvas;","import React from 'react'\nimport Canvas from './Canvas';\nimport Box from '@material-ui/core/Box';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nconst MyBox = withStyles({\n  root: {\n    position: 'relative',\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column-reverse',\n    flexGrow: 1,\n    paddingTop: '50px'\n  }\n})(Box)\n\nconst Display = () => (\n  <MyBox>\n    <Canvas/>\n  </MyBox>\n)\n\nexport default Display","import React from 'react';\nimport { connect } from 'react-redux'\nimport { State as AppState } from '../../store/types';\nimport { StretchMode } from '../../store/ui/types';\nimport { setStretch } from '../../store/ui/actions';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\ntype Props = {\n  stretch: StretchMode,\n  mode?: StretchMode,\n  setStretch: (stretch: StretchMode) => void\n}\n\nconst StretchToggle = ({stretch, setStretch, mode=StretchMode.Contain}: Props) => {\n\n  const onChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    if (evt.target.checked) setStretch(mode)\n    else setStretch(StretchMode.None)\n  }\n  return (\n    <FormControlLabel\n      label=\"Fit\"\n      labelPlacement=\"end\"\n      control={\n        <Switch\n          checked={stretch === mode}\n          onChange={onChange}\n        />\n      }\n    />\n  )\n}\n\n\nexport default connect(\n  (state: AppState) => ({stretch: state.ui.canvasStretch}),\n  (dispatch: any) => ({\n    setStretch: (mode: StretchMode) => dispatch(setStretch(mode)),\n  })\n)(StretchToggle)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState, Dispatch } from '../../store/types';\nimport { setModal } from '../../store/ui/actions';\nimport { Modal } from '../../store/ui/types';\nimport { TypographyWithMath } from '../../components';\nimport Button, { ButtonProps } from '@material-ui/core/Button';\nimport { withStyles } from '@material-ui/core/styles';\nimport { fractal } from '../../fractals';\n\n\nconst KatexButton = withStyles({\n  label: {textTransform: 'none'},\n})(Button)\n\nconst InfoButton = ({formula, ...rest}: {\n  formula: string | {math: string} | (string | {math: string})[]\n} & ButtonProps) => (\n  <KatexButton {...rest}>\n    <TypographyWithMath data={formula}/>\n  </KatexButton>\n)\n\nexport default connect(\n  (state: AppState) => {\n    const {formula} = fractal(state.algorithm);\n    return {\n      disabled: state.ui.modal === Modal.Info,\n      formula,\n    }\n  },\n  (dispatch: Dispatch) => ({\n    onClick: () => dispatch(setModal(Modal.Info))\n  })\n)(InfoButton)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../store/types';\nimport { setModal } from '../store/ui/actions';\nimport { Modal } from '../store/ui/types';\nimport StretchToggle from './Controls/StretchToggle';\nimport _Box from '@material-ui/core/Box';\nimport _AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Icon } from '../components'\nimport InfoButton from './Controls/InfoButton';\n\n\nconst Box = withStyles({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    gap: '2em',\n    paddingLeft: '1em',\n    paddingRight: '1em',\n  }\n})(_Box)\n\nconst AppBar = withStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default + 'AA'\n  },\n}))(_AppBar)\n\nconst TopBar = (props: {\n  disableMenu: boolean,\n  openMenu: () => void,\n}) => (\n  <AppBar color=\"transparent\">\n    <Box>\n      <IconButton onClick={props.openMenu} color=\"inherit\">\n        <Icon.Menu/>\n      </IconButton>\n      <InfoButton variant=\"text\" fullWidth/>\n      <StretchToggle />\n    </Box>\n  </AppBar>\n);\n\nexport default connect(\n  (state: State) => ({\n    disableMenu: state.ui.modal === Modal.Menu,\n  }),\n  (dispatch: Dispatch) => ({\n    openMenu: () => dispatch(setModal(Modal.Menu)),\n  }),\n)(TopBar);","import React from 'react';\nimport { connect } from 'react-redux';\nimport Katex from '../components/Katex';\nimport { State as AppState, Dispatch } from '../store/types';\nimport { setModal } from '../store/ui/actions';\nimport { Modal } from '../store/ui/types';\nimport { State as AlgState } from '../store/algorithm/types';\nimport { TypographyWithMath } from '../components';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport { fractal } from '../fractals';\nimport { withStyles, createStyles, WithStyles, Theme } from '@material-ui/core/styles';\n\n\nconst styles = createStyles((theme: Theme) => ({\n  text: {\n    fontSize: '1em',\n  }\n}))\n\n\nfunction rounder(p: number) {\n  const d = Math.pow(10, p);\n  return (n: number) => Math.round(n * d) / d;\n}\n\nfunction science(n: number, p: number=4) {\n  const a = n.toPrecision(4);\n  const b = a.split('e')\n  if (b.length === 1) {\n    return a;\n  } else {\n    return b[0] + '\\\\times 10^{' + b[1] + '}'\n  }\n}\n\ninterface Props {\n  visible: boolean\n  anchorEl?: HTMLElement\n  onClose: () => void\n  cx: number\n  cy: number\n  rx: number\n  ry: number\n  algorithm: AlgState\n}\n\ninterface PP extends Props, WithStyles<typeof styles> {}\n\n\nconst FractalInfo = (props: PP) => {\n\n  const {algorithm} = props;\n  const fractalinfo = fractal(algorithm).description;\n\n  const round = rounder(3-Math.floor(Math.log10(props.rx)))\n\n  const cx = round(props.cx)\n  const cy = round(props.cy)\n\n  const rx = science(Math.abs(props.rx))\n  const ry = science(Math.abs(props.ry))\n\n  const centerx = 'x_c = ' + cx\n  const centery = 'y_c = ' + cy\n  const domainx = '|x - x_c| \\\\leq ' + rx \n  const domainy = '|y - y_c| \\\\leq ' + ry \n\n  const classes = props.classes as {text: string};\n\n  return (\n    <Popover\n      open={props.visible}\n      onClose={props.onClose}\n      marginThreshold={10}\n    >\n      <Paper >\n        <Box p={2} onClick={props.onClose}>\n          <TypographyWithMath data={fractalinfo} className={classes.text}/>\n          <Typography style={{marginTop: '1em'}} className={classes.text}>\n            The currently displayed portion of this fractal is centered\n            at <Katex math=\"(x_c, y_c)\"/>, where\n          </Typography>\n          <Katex math={centerx + '\\\\text{ and }' + centery} displayMode={true} className={classes.text}/>\n          <Typography className={classes.text}>\n            and plotted over <Katex math=\"(x, y)\"/> such that \n          </Typography>\n          <Katex math={domainx + '\\\\text{ and }' + domainy} displayMode={true} className={classes.text}/>\n        </Box>\n      </Paper>\n    </Popover>\n  )\n}\n\nexport default connect(\n  (state: AppState) => {\n    const {cx, cy, ppu, w, h} = state.view;\n    const rx = w/ppu/2, ry = h/ppu/2;\n    return {\n      visible: state.ui.modal === Modal.Info,\n      cx: cx,\n      cy: cy,\n      rx: rx,\n      ry: ry,\n      algorithm: state.algorithm,\n    }\n  },\n  (dispatch: Dispatch) => ({\n    onClose: () => dispatch(setModal(Modal.None))\n  })\n)(withStyles(styles)(FractalInfo))","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State } from '../store/types';\nimport { Nav } from '../store/ui/types';\nimport BottomBar from './Bottombar';\nimport Settings from './Settings';\nimport { Controls } from './Controls';\nimport Display from './Display';\nimport TopBar from './TopBar';\nimport Info from './Info';\nimport Box from '@material-ui/core/Box';\nimport { withStyles } from '@material-ui/core/styles';\nimport styles from './App.module.css';\n\n\ntype Props = {\n  nav: Nav,\n}\n\nconst WithBottomNav = withStyles({\n  root: {\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column-reverse',\n  }\n})(Box)\n\nconst AboveBox = withStyles({\n  root: {\n    position: 'relative',\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column-reverse',\n    flexGrow: 1,\n  }\n})(Box)\n\nclass App extends React.Component<Props> {\n\n  render() {\n\n    return (\n      <div className={styles.App}>\n        <TopBar />\n        <Info />\n        <Settings />\n        <WithBottomNav>\n          <BottomBar />\n            <Controls/>\n          <AboveBox>\n            <Display/>\n          </AboveBox>\n        </WithBottomNav>\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({nav: state.ui.nav})\n)(App);","import React from 'react';\nimport { Provider } from 'react-redux';\nimport Theme from './Theme';\nimport { Store } from 'redux';\nimport App from './App';\nimport { State as AppState, Action as AppAction } from '../store/types';\n\ntype Props = {\n  store: Store<Partial<AppState>, AppAction>\n}\n\nexport default class Root extends React.Component<Props> {\n  render() {\n    const { store } = this.props;\n    return (\n      <Provider store={store}>\n        <Theme>\n          <App/>\n        </Theme>\n      </Provider>\n    )\n  }\n}\n","import {\n  interpolateInferno as Inferno,\n  interpolateMagma as Magma,\n  interpolatePlasma as Plasma,\n  interpolateViridis as Viridis,\n  interpolateCool as Cool,\n  interpolateWarm as Warm,\n  interpolateGreys as Greys,\n  interpolateRainbow as Rainbow,\n  interpolateSpectral as Spectral,\n  interpolateCubehelixDefault as Cubehelix\n} from 'd3';\nimport { ColorInterpolator } from './colorscale';\n\ntype SchemeDict = {[k: string]: ColorInterpolator}\n\nexport const D3_SCHEMES: SchemeDict = {\n  Inferno,\n  Magma,\n  Plasma,\n  Viridis,\n  Cool,\n  Warm,\n  Rainbow,\n  Spectral,\n  Cubehelix,\n  Greys,\n}\n\nexport const OTHER_SCHEMES: SchemeDict = {\n}\n\nconst ALL_SCHEMES: SchemeDict = {\n  ...D3_SCHEMES,\n  ...OTHER_SCHEMES,\n}\n\nexport default ALL_SCHEMES\n","import { COLORSCHEMES } from '../../colors';\nimport {\n  State,\n  Action,\n  UPDATE,\n  ADD_SCHEME,\n} from './types';\n\nconst initialState: State = {\n  scheme: 'Rainbow',\n  reverse: false,\n  adaptiveScale: false,\n  skew: 0,\n  schemeList: Object.keys(COLORSCHEMES).sort(),\n  customSchemes: {\n    'Nice': [\"#3db5ec\", \"#73c2b0\", \"#b9e375\", \"#f4bb44\", \"#eb591b\"],\n    'Ink': ['#000000', '#FFDD8C'],\n  },\n}\n\nexport default function(state: State=initialState, action: Action) {\n  switch(action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    case ADD_SCHEME:\n      return {\n        ...state,\n        customSchemes: {\n          ...state.customSchemes,\n          [action.payload.name]: action.payload.colors,\n        }\n      }\n    default:\n      return state;\n  }\n}","import {\n  State,\n  Action,\n  UPDATE,\n  RECENTER,\n  SET_CENTER,\n  SET_DIMS,\n  ZOOM_IN,\n  ZOOM_OUT,\n} from './types';\n\nconst initialState: State = {\n  //cx: -1.74, cy: 0.04, ppu: 17000, // burning ship\n  cx: 0, cy: 0, ppu: 512,\n  w: 2560, h: 1600,\n  previewPixels: 90000,\n}\n\nfunction recenter({w, h}: {w: number, h: number}) {\n  return {cx: 0, cy: 0, ppu: Math.round(Math.min(h,w)/4)}\n}\n\nexport default function(state: State={...initialState, ...recenter(initialState)}, action: Action) {\n  switch(action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    case RECENTER:\n      return {...state, ...recenter(state)}\n    case SET_CENTER:\n      return {...state, cx: action.payload.cx, cy: action.payload.cy}\n    case SET_DIMS:\n      return {...state, w: action.payload.w, h: action.payload.h}\n    case ZOOM_IN:\n      return {...state, ppu: state.ppu * action.payload}\n    case ZOOM_OUT:\n      return {...state, ppu: Math.round(state.ppu / action.payload)}\n    default:\n      return state;\n  }\n}","import {\n  State,\n  Action,\n  SET_FRACTAL,\n  UPDATE_PARAMS,\n} from './types';\nimport { FractalList } from '../../fractals';\n\nconst Dflt = 'Julia1KC'\n\n\nconst initialState: State = {\n  current: Dflt,\n  params: FractalList[Dflt].create(),\n  defaultParams: {bound: 10, iterations: 30},\n  fractals: FractalList,\n  paramControls: FractalList[Dflt].controls,\n}\n\n\nexport default function(state: State=initialState, action: Action) {\n  switch (action.type) {\n    case SET_FRACTAL:\n      if (action.payload.params === undefined) {\n        return {\n          ...state, \n          current: action.payload.current, \n          params: state.fractals[action.payload.current].create(),\n          paramControls: state.fractals[action.payload.current].controls,\n        }\n      } else {\n        return {\n          ...state,\n          current: action.payload.current,\n          params: action.payload.params,\n          paramControls: state.fractals[action.payload.current].controls,\n        }\n      }\n    case UPDATE_PARAMS:\n      return {...state, params: {...state.params, ...action.payload}}\n    default:\n      return state\n  }\n}","import {\n  State,\n  Action,\n  Nav,\n  Modal,\n  CanvasAction,\n  StretchMode,\n  SET_NAV,\n  SET_MODAL,\n  SET_STRETCH,\n  SET_CANVAS_ACTION,\n  UPDATE,\n} from './types';\n\n\nconst initialState = {\n  canvasStretch: StretchMode.Contain,\n  modal: Modal.None,\n  nav: Nav.Navigate,\n  canvasAction: CanvasAction.None,\n}\n\nexport default function(state: State=initialState, action: Action) {\n  switch(action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    case SET_NAV:\n      return {...state, nav: action.payload}\n    case SET_MODAL:\n      return {...state, modal: action.payload}\n    case SET_STRETCH:\n      return {...state, canvasStretch: action.payload}\n    case SET_CANVAS_ACTION:\n      return {...state, canvasAction: action.payload}\n    default:\n      return state\n  }\n}","import { combineReducers } from 'redux';\nimport color from './color/reducer';\nimport view from './view/reducer';\nimport algorithm from './algorithm/reducer';\nimport ui from './ui/reducer';\n\nexport default combineReducers({\n  algorithm,\n  color,\n  view,\n  ui,\n});","import { createStore } from 'redux';\nimport reducer from './reducer';\n\nexport default createStore(reducer);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Root from './containers/Root';\nimport store from './store';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root store={store} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.register();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Outer\":\"Canvas_Outer__3WApH\",\"Inner\":\"Canvas_Inner__3HJbl\",\"Canvas\":\"Canvas_Canvas__2ENmD\",\"Stretch\":\"Canvas_Stretch__2sMXG\",\"FullResolution\":\"Canvas_FullResolution__3ztDZ\"};"],"sourceRoot":""}