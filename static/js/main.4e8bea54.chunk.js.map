{"version":3,"sources":["containers/Theme.tsx","store/ui/types.ts","store/ui/actions.ts","components/Katex.tsx","components/TypographyWithMath.tsx","components/StyledSelect.tsx","components/CustomColor.tsx","components/DownUpButtons.tsx","fractals/formatting.ts","components/NumberIncrementer.tsx","fractals/math/real.ts","fractals/math/polar.ts","fractals/math/complex.ts","components/ComplexIncrementer.tsx","components/SettingsContainer.tsx","fractals/color/colorScale.ts","fractals/color/schemes.ts","components/ColorPreview.tsx","components/ComplexNumberInput.tsx","containers/Settings/SettingsMenu.tsx","components/NumberInput.tsx","containers/Bottombar.tsx","store/fractal/algorithm/actions.ts","store/fractal/algorithm/types.ts","containers/Settings/AlgorithmSettings.tsx","store/fractal/view/actions.ts","store/fractal/view/types.ts","containers/Settings/ColorSettings.tsx","store/fractal/color/actions.ts","store/fractal/color/types.ts","containers/Settings/ViewSettings.tsx","containers/Settings/index.ts","fractals/CanvasDrawer.ts","fractals/algorithm/types.ts","fractals/algorithm/mixers/base.ts","fractals/algorithm/escapeTime.ts","fractals/algorithm/mixers/escape.ts","fractals/algorithm/mixers/julia.ts","fractals/math/util.ts","fractals/math/polynomial.ts","fractals/math/fractals.ts","fractals/algorithm/burningship.ts","fractals/algorithm/julias.ts","fractals/algorithm/magnet.ts","fractals/algorithm/mandelbox.ts","fractals/algorithm/mandelbrot.ts","fractals/algorithm/phoenix.ts","fractals/algorithm/mixers/controls.ts","fractals/algorithm/testing.ts","fractals/algorithm/index.ts","fractals/index.ts","containers/Canvas/Canvas.tsx","containers/Canvas/index.ts","containers/Controls/ControlPanel.tsx","defaults.ts","containers/Capture/Capture.tsx","containers/Capture/index.ts","store/gallery/actions.ts","store/gallery/types.ts","containers/Controls/Zoom.tsx","containers/Controls/ParamControls.tsx","containers/Controls/Iterator.tsx","containers/Controls/Controls.tsx","containers/Controls/index.ts","containers/Gallery/Gallery.tsx","containers/Gallery/index.ts","containers/Display.tsx","containers/Controls/InfoButton.tsx","containers/Controls/Recenter.tsx","containers/TopBar.tsx","containers/Info.tsx","containers/Waiting.tsx","containers/App.tsx","containers/Root.tsx","store/fractal/algorithm/reducer.ts","store/fractal/color/reducer.ts","store/fractal/view/reducer.ts","store/fractal/reducer.ts","store/ui/reducer.ts","store/gallery/reducer.ts","store/reducer.ts","store/index.ts","serviceWorker.ts","index.tsx","containers/Canvas/Canvas.module.css"],"names":["Theme","props","state","type","dark","this","setState","setDark","window","matchMedia","matches","addListener","x","theme","palette","darkPalette","lightPalette","createMuiTheme","CssBaseline","children","React","Component","defaultProps","primary","blue","secondary","pink","lightGreen","amber","MuiAppBar","color","MuiBackdrop","invisible","MuiTextField","variant","size","fullWidth","margin","Nav","Modal","StretchMode","CanvasAction","UPDATE","setModal","modal","payload","redraw","Draw","finish","canvasAction","None","waiting","styles","createStyles","root","whiteSpace","Katex","ref","createRef","current","katex","render","math","displayMode","renderMath","classes","className","createElement","PureComponent","withStyles","RenderStringOrMath","data","TextWithMath","Array","isArray","Typography","map","Select","width","TextField","Option","padding","MenuItem","OptionLabel","fontSize","TypographyWithMath","CustomColor","changeName","evt","name","target","value","changeNum","setNum","changeColor","i","colors","addColor","num","removeColor","save","onSave","onClose","validName","takenNames","forEach","k","toLowerCase","n","Math","max","length","push","slice","Grid","item","xs","onChange","style","borderRadius","InputLabel","Box","label","inputProps","p","height","scheme","reverse","skew","container","m","renderColorInput","alignSelf","onDown","disableDown","onUp","Button","disabled","onClick","position","marginTop","marginBottom","textAlign","bottom","userSelect","text","top","disableUp","downIcon","Icon","upIcon","rest","ButtonGroup","IconButton","sign","fixed","toFixed","toString","complex","a","b","opts","NumberIncrementer","onClickDown","setValue","incrementDown","onClickUp","incrementUp","v","controlProps","min","step","undefined","params","fmt","PI","TAU","abs","asin","atan2","exp","floor","pow","random","round","sin","sqrt","cos","powReal","z","angle","radius","re","im","fromPolar","toPolar","add","addReal","addPolar","subt","mult","multReal","div","d","abs2","powFloat","P","powInt","pow2","pow3","pow4","pow5","pow6","pow7","pow8","powN","ComplexIncrementer","onAngleDown","angleDown","onAngleUp","angleUp","onRadiusDown","radiusDown","onRadiusUp","radiusUp","stepRadius","stepAngle","pol","RotateRight","RotateLeft","colorScale","interpolator","piecewise","interpolateLab","range","exponent","domain","scale","scalePow","D3_SCHEMES","Cool","Cubehelix","Greys","Inferno","Magma","Plasma","Rainbow","Spectral","Viridis","Warm","ALL_SCHEMES","Paint","Ink","boxShadow","ColorPreview","docolors","canvas","context","getContext","orientation","cm","fillStyle","fillRect","grid","strokeLinecap","fill","major","strokeWidth","strokeOpacity","minor","marker","ComplexNumberInput","GRID","getValueAtClick","onDoubleClick","r","precision","stepRect","angles","stepX","stepY","max_radius","circle","cx","cy","hline","vline","rect_minor","polar_minor","rad","RECT","MINOR","MAJOR","POLAR","makegrid","svg","rect","getBoundingClientRect","y","nativeEvent","clientX","clientY","clickX","clickY","vectorEffect","markerRadius","viewBox","join","stroke","gridColor","rectGrid","polarGrid","markerColor","Menu","NumberInput","s","isEmpty","isNaN","onBlur","emptyValue","borderTop","divider","StyledBottomNav","BottomNavigation","connect","ui","nav","galleryBadge","dispatch","BottomNavigationAction","Params","icon","Tune","Explore","Capture","Gallery","Badge","badgeContent","updateParams","AlgorithmSettings","selectMethod","methodName","method","methodList","newParams","apply","setFractal","reset","SettingsContainer","select","Object","keys","sort","key","fractal","algorithm","ColorSettings","openCustomPopup","customPopup","closeCustomPopup","changeReverse","setCurrent","checked","changeSkew","console","log","selectScheme","setScheme","hasChanged","schemeName","saveScheme","addScheme","updateColor","schemeList","revert","FormControlLabel","control","Switch","edge","FormControl","shrink","Slider","Popover","open","colorSchemeList","updates","Color","ViewSettings","centerStep","updateView","setCX","setCY","setW","w","setH","h","setPPU","ppu","setPixelCount","pixelCount","spacing","maxWidth","view","update","StyledMenuItem","StyledLabel","ListItemText","StyledSwipeableDrawer","paper","display","flexDirection","SwipeableDrawer","SettingsDrawer","openMenu","openAlgorithm","menu","Algorithm","openColor","openView","View","closeAll","closePopup","openPopup","popup","labelStyle","listStyle","onOpen","List","ListItemIcon","Functions","Palette","Divider","paddingTop","paddingBottom","Back","SettingsMenu","linearScale","scaleDown","pixels","factor","isRect","ControlType","CanvasDrawer","fullResolution","ctx","cmap","image","document","ImageData","draw","t0","performance","now","makeCMap","makeImage","t1","cs","parseInt","g","xrange","yrange","getView","calc","rx","ry","xscale","yscale","hh","c","putImageData","controls","bound","iterations","b2","f","z0","DefaultEscapeParams","calculate","func","escapeTime","zz","describe","describeEscapeFunction","escape","baseFractalInterface","lz0","latexZ0","latexF","indexOf","replace","juliaLabel","juliaCalc","esc","julia","isInt","coeffs","allAreInts","result","BS","burningship","bs","cc","mandelbox","aa","f1","recip","f2","ab2","lookback","zp","z1","phoenix","po","absabs","BurningShip1","mix","Number","param","BurningShip2Mandelbox","mbox","Call","onCall","randomC","JuliaControls","Complex","Julia_","JuliaAPoly","poly","polynomial","JuliaExp","JuliaSinh","divReal","sinh","Julia1Burning","Magnet1","Magnet2","a3","b3","ab","mandelboxBlatex","describeMandelbox","mandelboxClatex","Mandelbox1","Mandelcorner","Mandelbrot","Phoenix1","_","PhoenixBurningShip","px","number","Exponential","Test1","m1","m2","m3","bx","ctrl","ALLFRACTALS","julias","magnet","mandelbrot","testing","Canvas","drawer","canvasRef","centerOnClick","setCenter","offsetX","offsetY","stretch","Contain","ww","imageH","imageW","dx","dy","putOnCanvas","finishDrawing","objectFit","outerClasses","Outer","outerstyle","visible","Stretch","Cover","id","canvasStretch","Outside","backgroundColor","background","default","Paper","Inside","flexFlow","alignItems","justifyContent","Toolbar","ControlPanel","elevation","captureSize","COLORSCHEMES","CropContainer","FractalCounter","cropPixels","aspect","swapWH","getImage","cvs","getElementById","toDataURL","onCropChange","crop","onCropComplete","area","areaPixels","onZoomChange","zoom","capture","renderImage","saveImage","finishCapture","startCapture","prevProps","capturing","setTimeout","filename","toBlob","blob","url","URL","createObjectURL","addToGallery","SwapHoriz","Fab","AddAPhoto","title","zoomIn","zoomOut","ZoomOut","ZoomIn","ParamControls","paramUpdater","startIcon","Random","renderNumberIncrementer","renderComplexIncrementer","renderCall","renderControl","Controls","Iterator","StyledGridList","GridList","StyledGridListTile","maxHeight","tile","GridListTile","StyledIconButton","ImageTile","cols","src","alt","GridListTileBar","actionIcon","onDelete","Delete","onView","ViewImage","viewURL","deleteURL","delete","deleteImage","viewer","img","deleter","cellHeight","images","index","overflow","gallery","useStyles","makeStyles","flexGrow","Display","KatexButton","textTransform","formula","Info","Recenter","disableMenu","isGallery","AppBar","science","toPrecision","split","fractalinfo","rounder","log10","centerx","centery","domainx","domainy","marginThreshold","typography","progress","outline","CircularProgress","left","right","App","Settings","Root","store","initialState","recenter","combineReducers","action","revokeObjectURL","filter","createStore","reducer","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker","module","exports"],"mappings":"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","file":"static/js/main.4e8bea54.chunk.js","sourcesContent":["import React from 'react';\nimport {\n  ThemeProvider as Provider, \n  createMuiTheme, \n} from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {amber, pink, blue, lightGreen} from '@material-ui/core/colors';\n\n\ntype Props = {\n  type: 'light' | 'dark' | 'detect'\n  lightPalette?: any\n  darkPalette?: any\n  theme: any\n}\n\nclass Theme extends React.Component<Props> {\n  state: {type: 'light' | 'dark'}\n\n  static defaultProps = {\n    type: 'detect',\n\n    lightPalette: {\n      primary: blue,\n      secondary: pink,\n    },\n\n    darkPalette: {\n      primary: lightGreen,\n      secondary: amber,\n    },\n\n    theme: {\n      props: {\n        MuiAppBar: {color: 'inherit'},\n        MuiBackdrop: {\n          invisible: true\n        },\n        MuiTextField: {\n          variant: 'outlined',\n          size: 'small',\n          fullWidth: true,\n          margin: 'normal',\n        },\n      },\n    }\n  }\n\n  constructor(props: React.PropsWithChildren<Props>) {\n    super(props);\n    this.state = {\n      type: this.props.type === 'detect' ? 'light' : this.props.type\n    }\n  }\n\n  setDark(dark: boolean) {\n    this.setState({type: dark ? 'dark' : 'light'})\n  }\n\n  componentDidMount() {\n    if (this.props.type === 'detect') {\n      this.setDark(window.matchMedia(\"(prefers-color-scheme:dark)\").matches)\n      window.matchMedia(\"(prefers-color-scheme:dark)\").addListener(x => {\n        this.setDark(x.matches)\n      })\n    }\n  }\n\n  render() {\n    const theme = {\n      ...this.props.theme,\n      palette: {\n        ...this.props.theme.palette,\n        ...this.state,\n        ...(this.state.type === 'dark' ? this.props.darkPalette : this.props.lightPalette)\n      }\n    }\n    return (\n      <Provider theme={createMuiTheme(theme)}>\n        <CssBaseline/>\n        {this.props.children}\n      </Provider>\n    )\n  }\n}\n\nexport default Theme;","import { ALLFRACTALS, COLORSCHEMES } from '../../fractals';\nimport { ColorScheme as CS } from '../../fractals/color/types';\n\nexport type ColorScheme = CS\n\nexport const SET_MODAL = 'UI_SET_MODAL'\nexport const SET_NAV = 'UI_SET_NAV'\nexport const SET_STRETCH = 'UI_SET_STRETCH'\nexport const SET_CANVAS_ACTION = 'UI_SET_CANVAS_ACTION'\nexport const UPDATE = 'UI_UPDATE'\nexport const ADD_COLOR_SCHEME = 'UI_ADD_COLOR_SCHEME'\n\nexport enum Nav {\n  None,\n  Params,\n  Explore,\n  Capture,\n  Gallery,\n}\n\nexport enum Modal {\n  None,\n  Menu,\n  Info,\n  FullResolution,\n}\n\nexport enum StretchMode {\n  None,\n  Contain,\n  Cover,\n}\n\nexport enum CanvasAction {\n  None,\n  Draw,\n  Color,\n  Capture,\n}\n\nexport interface State {\n  nav: Nav\n  modal: Modal\n  canvasStretch: StretchMode\n  canvasAction: CanvasAction\n  galleryBadge: number\n  methodList: typeof ALLFRACTALS\n  colorSchemeList: typeof COLORSCHEMES\n  waiting: boolean\n}\n\nexport type Update = {\n  type: typeof UPDATE\n  payload: Partial<State>\n}\n\nexport type SetModal = {\n  type: typeof SET_MODAL\n  payload: Modal\n}\n\nexport type SetNav = {\n  type: typeof SET_NAV\n  payload: Nav\n}\n\nexport type SetCanvasAction ={\n  type: typeof SET_CANVAS_ACTION\n  payload: CanvasAction\n}\n\nexport type SetStretch = {\n  type: typeof SET_STRETCH\n  payload: StretchMode\n}\n\nexport type AddColorScheme = {\n  type: typeof ADD_COLOR_SCHEME\n  payload: {\n    name: string\n    scheme: ColorScheme\n  }\n}\n\nexport type Action = Update | SetModal | SetNav | SetStretch | SetCanvasAction | AddColorScheme","import {\n  State,\n  SetStretch,\n  StretchMode,\n  SET_STRETCH,\n  SetModal,\n  SET_MODAL,\n  SetNav,\n  SET_NAV,\n  Modal,\n  Nav,\n  CanvasAction,\n  SetCanvasAction,\n  SET_CANVAS_ACTION,\n  AddColorScheme,\n  ADD_COLOR_SCHEME,\n  ColorScheme,\n  Update,\n  UPDATE,\n} from './types'\n\nexport const update = (x: Partial<State>): Update => ({\n  type: UPDATE,\n  payload: x\n})\n\nexport const setStretch = (stretch: StretchMode): SetStretch => ({\n  type: SET_STRETCH,\n  payload: stretch\n})\n\nexport const setModal = (modal: Modal): SetModal => ({\n  type: SET_MODAL,\n  payload: modal\n})\n\nexport const setNav = (nav: Nav): SetNav => ({\n  type: SET_NAV,\n  payload: nav\n})\n\nexport const redraw = (): SetCanvasAction => ({\n  type: SET_CANVAS_ACTION,\n  payload: CanvasAction.Draw\n})\n\nexport const recolor = (): SetCanvasAction => ({\n  type: SET_CANVAS_ACTION,\n  payload: CanvasAction.Color\n})\n\nexport const capture = (): SetCanvasAction => ({\n  type: SET_CANVAS_ACTION,\n  payload: CanvasAction.Capture\n})\n\nexport const wait = (): Update => ({\n  type: UPDATE,\n  payload: ({waiting: true}),\n})\n\nexport const finish = (): Update => ({\n  type: UPDATE,\n  payload: {\n    canvasAction: CanvasAction.None,\n    waiting: false,\n  }\n})\n\nexport const addColorScheme = (name: string, scheme: ColorScheme): AddColorScheme => ({\n  type: ADD_COLOR_SCHEME,\n  payload: {name, scheme}\n})\n\n\n\n\n","import React from 'react'\nimport katex from 'katex'\nimport { withStyles, createStyles, WithStyles } from '@material-ui/core/styles';\nimport 'katex/dist/katex.css';\n\n\nconst styles = createStyles({\n  root: {\n    whiteSpace: 'nowrap',\n  }\n})\n\nexport interface KatexProps {\n  math: string\n  displayMode?: boolean\n  className?: string\n  style?: React.CSSProperties\n}\n\ninterface Props extends KatexProps, WithStyles<typeof styles> {}\n\nclass Katex extends React.PureComponent<Props> {\n  ref: React.RefObject<HTMLSpanElement>\n\n  constructor(props: Props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  renderMath() {\n    if (this.ref.current) {\n      katex.render(this.props.math, this.ref.current, {\n        displayMode: this.props.displayMode\n      })\n    }\n  }\n\n  componentDidMount() {\n    this.renderMath()\n  }\n\n  componentDidUpdate() {\n    this.renderMath()\n  }\n\n  render() {\n    const { classes, className } = this.props;\n    return React.createElement('span', {\n      ref: this.ref,\n      className: className ? classes.root + ' ' + className : classes.root,\n    })\n  }\n}\n\nexport default withStyles(styles)(Katex)","import React from 'react';\nimport Katex, { KatexProps } from './Katex';\nimport Typography, {TypographyProps} from '@material-ui/core/Typography';\n\n\nexport type StringOrMath = string | KatexProps\n\nconst RenderStringOrMath = (data: StringOrMath) => {\n  if (typeof data === 'string') {\n    return data;\n  } else {\n    return React.createElement(Katex, data);\n  }\n}\n\nexport type StringWithMath = StringOrMath | StringOrMath[]\n\nexport interface TypographyWithMathProps extends TypographyProps {\n  data: StringWithMath\n  className?: string\n}\n\nconst TextWithMath = ({data, ...props}: TypographyWithMathProps) => {\n  if (Array.isArray(data)) {\n    return React.createElement(Typography, props, ...data.map(RenderStringOrMath))\n  }\n  if (typeof data === 'string') {\n    return React.createElement(Typography, props, data);\n  }\n  return React.createElement(Typography, props, React.createElement(Katex, data));\n}\n\nexport default TextWithMath","import MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport TypographyWithMath from './TypographyWithMath';\nimport { withStyles, Theme } from '@material-ui/core/styles';\n\n\nexport const Select = withStyles((theme: Theme) => ({\n  root: {\n    width: '200px',\n  },\n}))(TextField)\n\nexport const Option = withStyles((theme: Theme) => ({\n  root: {\n    padding: '0.5em',\n  }\n}))(MenuItem)\n\n\nexport const OptionLabel = withStyles((theme: Theme) => ({\n  root: {\n    fontSize: '0.8em',\n  }\n}))(TypographyWithMath)\n","import React from 'react';\nimport { ColorPreview, DownUpButtons } from '.';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\n\n\ntype Props = {\n  takenNames: string[],\n  onSave: (name: string, colors: string[]) => void;\n  onClose: () => void;\n}\n\ntype State = {\n  name: string,\n  num: number,\n  colors: string[],\n}\n\nclass CustomColor extends React.Component<Props> {\n  state: State\n\n  static defaultProps = {\n    takenNames: [],\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      name: '',\n      num: 2,\n      colors: ['#FF0055', '#0055FF'],\n    }\n  }\n\n  changeName = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const name = evt.target.value;\n    this.setState({name});\n  }\n\n  setNum(n: number) {\n    const num = Math.max(2, n)\n    let colors = [...this.state.colors];\n    if (num > colors.length) {\n      const x = colors[colors.length-1];\n      while (colors.length < num) {\n        colors.push(x);\n      }\n    } else {\n      colors = colors.slice(0,num);\n    }\n    this.setState({num, colors});\n  }\n\n  changeNum = (evt: React.ChangeEvent<HTMLInputElement>) => this.setNum(+evt.target.value)\n\n  changeColor = (i: number) => {\n    return (evt: React.ChangeEvent<HTMLInputElement>) => {\n      const colors = [...this.state.colors];\n      colors[i] = evt.target.value;\n      this.setState({colors});\n    }\n  }\n\n  addColor = () => this.setNum(this.state.num + 1);\n  removeColor = () => this.setNum(this.state.num - 1);\n\n  save = () => {\n    this.props.onSave(this.state.name, this.state.colors);\n    this.props.onClose();\n  }\n\n  validName = () => {\n    if (this.state.name === '') {\n      return false;\n    }\n    this.props.takenNames.forEach(k => {\n      if (k.toLowerCase() === this.state.name.toLowerCase()) {\n        return false;\n      }\n    })\n    return true;\n  }\n\n  renderColorInput(i: number) {\n    if (i < this.state.colors.length) {\n      return (\n        <Grid item xs={1}>\n          <input type=\"color\"\n            value={this.state.colors[i]}\n            onChange={this.changeColor(i)}\n            style={{width: '40px', borderRadius: 0, padding: 0}}\n          />\n        </Grid>\n      )\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <>\n\n        <InputLabel>New Colorscheme</InputLabel>\n\n        <Box>\n        <TextField\n              label=\"Name\"\n              variant=\"filled\"\n              value={this.state.name}\n              onChange={this.changeName}\n              inputProps={{type: 'text'}}\n            />\n        </Box>\n        <Box p={1}>\n          <ColorPreview\n            style={{width: '100%', height: '4mm'}}\n            scheme={this.state.colors}\n            reverse={false}\n            skew={0}\n            width={100}\n            height={10}\n          />\n        </Box>\n        <Box>\n          <Grid container>\n            {this.state.colors.map((color: string, i: number) => (\n              <Box m={0.5}>{this.renderColorInput(i)}</Box>\n            ))}\n          </Grid>\n          <Box m={1}>\n            <DownUpButtons\n              variant=\"contained\"\n              style={{alignSelf: 'center'}}\n              onDown={this.removeColor}\n              disableDown={this.state.colors.length < 3}\n              onUp={this.addColor}\n            />\n          </Box>\n          <Box>\n          <Button \n              fullWidth color=\"primary\"\n              disabled={!this.validName()}\n              onClick={this.save}\n            >Save</Button>\n          </Box>\n        </Box>\n      </>\n    )\n  }\n}\n\nexport default CustomColor","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport ButtonGroup, { ButtonGroupProps } from '@material-ui/core/ButtonGroup';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport * as Icon from './icons'\n\n\nconst styles = ({palette}: Theme) => createStyles({\n  container: {\n    position: 'relative',\n    marginTop: '5px',\n    marginBottom: '5px',\n  },\n  label: {\n    textAlign: 'center',\n    position: 'absolute',\n    bottom: '-5px',\n    width: '100%',\n    userSelect: 'none',\n    color: palette.text.secondary,\n  },\n  value: {\n    textAlign: 'center',\n    position: 'absolute',\n    top: '-5px',\n    width: '100%',\n    userSelect: 'none',\n    color: palette.text.secondary,\n  }\n});\n\n\nexport interface DownUpButtonsProps extends WithStyles<typeof styles>, Omit<ButtonGroupProps, 'classes'> {\n  [k: string]: any\n  onUp?: () => void\n  onDown?: () => void\n  disableUp?: boolean\n  disableDown?: boolean\n  value?: string\n  label?: string\n  fontSize?: \"small\" | \"default\" | \"large\" | \"inherit\"\n  iconDown?: typeof SvgIcon\n  iconUp?: typeof SvgIcon\n}\n\n\nconst DownUpButtons = ({label, value, classes, onUp, onDown, fontSize, \n  disableUp, disableDown, downIcon=Icon.Minus, upIcon=Icon.Plus,\n  ...rest\n}: DownUpButtonsProps) => (\n\n  <Box className={classes.container}>\n      {label ? (\n        <Typography variant=\"caption\" className={classes.label}>\n          {label}\n        </Typography>\n      ) : null}\n      {value ? (\n        <Typography variant=\"caption\" className={classes.value}>\n          {value}\n        </Typography>\n      ) : null}\n    <ButtonGroup {...rest}>\n      <IconButton\n        onClick={onDown}\n        disabled={disableDown}\n      >{React.createElement(downIcon, {fontSize})}</IconButton> \n      <IconButton\n        onClick={onUp}\n        disabled={disableUp}\n      >{React.createElement(upIcon, {fontSize})}</IconButton>\n    </ButtonGroup>\n  </Box>\n)\n\nexport default withStyles(styles)(DownUpButtons)","\ntype NumberOpts = {\n  fixed?: number\n  round?: number\n  sign?: boolean\n}\n\nexport function num(n: number, {\n  sign,\n  fixed=4\n}: NumberOpts={}): string {\n  if (sign && !(n < 0)) {\n    return '+' + num(n, {fixed})\n  }\n  if (fixed) {\n    return (+(n.toFixed(fixed))).toString()\n  }\n  return n.toString()\n}\n\nexport function complex([a, b]: [number,number], opts: NumberOpts={}) {\n  return num(a,opts) + num(b,{...opts,sign:true}) + 'i'\n}\n\n\n\nexport function rounder(p: number) {\n  const d = Math.pow(10, p);\n  return (n: number) => Math.round(n * d) / d;\n}\n\n\n\nexport function science(n: number, p: number=4) {\n  const a = n.toPrecision(4);\n  const b = a.split('e')\n  if (b.length === 1) {\n    return a;\n  } else {\n    return b[0] + '\\\\times 10^{' + b[1] + '}'\n  }\n}","import React from 'react';\nimport { ControlNumber } from '../fractals/algorithm/types'\nimport DownUpButtons, { DownUpButtonsProps } from './DownUpButtons';\nimport * as fmt from '../fractals/formatting';\n\ninterface NewProps {\n  controlProps: ControlNumber\n  value: number\n  onChange: (x: number) => void\n}\n\ninterface Props extends NewProps, Omit<DownUpButtonsProps, 'label' | 'onDown' | 'onUp'> {}\n\nclass NumberIncrementer extends React.Component<Props> {\n\n  setValue(v: number) {\n    this.props.onChange(v)\n  }\n\n  incrementDown() {\n    const {min, step} = this.props.controlProps;\n    const v = this.props.value - step;\n    if (min !== undefined) {\n      return Math.max(min, v)\n    }\n    return v;\n  }\n\n  incrementUp() {\n    const {max, step} = this.props.controlProps;\n    const v = this.props.value + step;\n    if (max !== undefined) {\n      return Math.min(max, v)\n    }\n    return v;\n  }\n\n  onClickDown = () => {\n    this.setValue(this.incrementDown())\n  }\n\n  onClickUp = () => {\n    this.setValue(this.incrementUp())\n  }\n\n\n  render() {\n    const {controlProps, params, onChange, ...rest} = this.props;\n    return (\n      <DownUpButtons\n        {...rest}\n        value={fmt.num(this.props.value)}\n        label={controlProps.label}\n        onDown={this.onClickDown}\n        onUp={this.onClickUp}\n      />\n    )\n  }\n}\n\nexport default NumberIncrementer\n","// Constants\nconst PI = Math.PI\nconst TAU = 2*PI\n\n// Functions\nconst abs = Math.abs\nconst asin = Math.asin\nconst atan2 = Math.atan2\nconst exp = Math.exp\nconst floor = Math.floor\nconst pow = Math.pow\nconst random = Math.random\nconst round = Math.round\nconst sin = Math.sin\nconst sqrt = Math.sqrt\nconst cos = Math.cos\n\nexport {\n  PI,\n  TAU,\n\n  abs,\n  asin,\n  atan2,\n  cos,\n  exp,\n  floor,\n  pow,\n  random,\n  round,\n  sin,\n  sqrt,\n}\n","import { Complex, Polar } from './types';\nimport * as Math from './real';\n\n\nexport function polar(angle: number, radius: number): Polar {\n  return {angle, radius};\n}\n\nexport function fromComplex({re, im}: Complex): Polar {\n  return {\n    angle: Math.atan2(im, re),\n    radius: Math.sqrt(re*re + im*im),\n  };\n}\n\nexport function toComplex(z: Polar): Complex {\n  return {\n    re: z.radius * Math.cos(z.angle),\n    im: z.radius * Math.sin(z.angle),\n  };\n}\n\nexport function neg(z: Polar): Polar {\n  return {\n    angle: z.angle,\n    radius: -z.radius,\n  };\n}\n\nexport function mult(a: Polar, b: Polar): Polar {\n  return {\n    angle: a.angle + b.angle,\n    radius: a.radius * b.radius,\n  };\n}\n\nexport function multReal(a: Polar, b: number): Polar {\n  return {angle: a.angle, radius: b* a.radius}\n}\n\nexport function div(a: Polar, b: Polar): Polar {\n  return {\n    angle: a.angle - b.angle,\n    radius: a.radius / b.radius,\n  };\n}\n\nexport function divReal(a: Polar, b: number): Polar {\n  return {angle: a.angle, radius: a.radius / b}\n}\n\nexport function powReal(z: Polar, k: number): Polar {\n  return {angle: z.angle * k, radius: Math.pow(z.radius, k)}\n}\n","import { Complex, Polar } from './types';\nimport * as P from './polar';\nimport * as Math from './real';\n\n\nexport function complex(re: number, im: number): Complex {\n  return {re, im}\n}\n\nexport function conjugate(z: Complex) {\n  return {re: z.re, im: -z.im}\n}\n\nexport function fromPolar({angle, radius}: Polar) {\n  return {\n    re: radius * Math.cos(angle),\n    im: radius * Math.sin(angle),\n  }\n}\n\nexport function toPolar(z: Complex): Polar {\n  return {\n    angle: Math.atan2(z.im, z.re),\n    radius: Math.sqrt(z.re*z.re + z.im*z.im),\n  }\n}\n\nexport function neg(a: Complex): Complex {\n  return {re: -a.re, im: -a.im}\n}\n\n\n// Addition\n\nexport function add(a: Complex, b: Complex): Complex {\n  return {re: a.re+b.re, im: a.im+b.im}\n}\n\nexport function addReal(a: Complex, b: number): Complex {\n  return {re: a.re + b, im: a.im}\n}\n\nexport function addPolar(a: Complex, b: Polar): Complex {\n  return add(a, fromPolar(b))\n}\n\n\n// Subtraction\n\nexport function subt(a: Complex, b: Complex): Complex {\n  return {re: a.re - b.re, im: a.im - b.im}\n}\n\nexport function subtReal(a: Complex, b: number): Complex {\n  return {re: a.re - b, im: a.im}\n}\n\nexport function subtPolar(a: Complex, b: Polar): Complex {\n  return subt(a, fromPolar(b))\n}\n\n\n// Multiplication\n\nexport function mult(a: Complex, b: Complex): Complex {\n  return {\n    re: a.re*b.re - a.im*b.im,\n    im: a.re*b.im + a.im*b.re,\n  }\n}\n\nexport function multReal(a: Complex, b: number): Complex {\n  return {re: b * a.re, im: b * a.im}\n}\n\nexport function multPolar(a: Complex, b: Polar): Complex {\n  return mult(a, fromPolar(b))\n}\n\n\n// Division\n\nexport function div(a: Complex, b: Complex): Complex {\n  const d = abs2(b);\n  return {\n    re: (a.re * b.re + a.im * b.im) / d,\n    im: (a.im * b.re - a.re * b.im) / d,\n  }\n}\n\nexport function divReal(a: Complex, b: number): Complex {\n  return {re: a.re / b, im: a.im / b}\n}\n\nexport function divPolar(a: Complex, b: Polar): Complex {\n  return fromPolar(P.div(toPolar(a), b))\n}\n\n\n// Exponentiation\n\nexport function exp(z: Complex): Complex {\n  return fromPolar({radius: Math.exp(z.re), angle: z.im})\n}\n\nexport function powFloat(z: Complex, k: number): Complex {\n  return fromPolar(P.powReal(toPolar(z), k))\n}\n\nexport function powInt(z: Complex, k: number): Complex {\n  if (k < 0) return div(complex(1, 0), powInt(z, -k))\n  if (k === 0) return complex(1, 0)\n  if (k === 1) return z\n  if (k === 2) return mult(z, z)\n  if (k === 3) return mult(mult(z, z), z)\n  if (k === 4) return mult(mult(mult(z, z), z), z)\n  if (k === 5) return mult(mult(mult(mult(z, z), z), z), z)\n  if (k === 6) return mult(mult(mult(mult(mult(z, z), z), z), z), z)\n  if (k === 7) return mult(mult(mult(mult(mult(mult(z, z), z), z), z), z), z)\n  if (k === 8) return mult(mult(mult(mult(mult(mult(mult(z, z), z), z), z), z), z), z)\n  return powFloat(z, k)\n}\n\nexport function powReal(z: Complex, k: number): Complex {\n  return powInt(z, k);\n}\n\nconst pow2 = (z: Complex) => mult(z, z);\nconst pow3 = (z: Complex) => mult(mult(z, z), z);\nconst pow4 = (z: Complex) => mult(mult(mult(z, z), z), z);\nconst pow5 = (z: Complex) => mult(mult(mult(mult(z, z), z), z), z);\nconst pow6 = (z: Complex) => mult(mult(mult(mult(mult(z, z), z), z), z), z);\nconst pow7 = (z: Complex) => mult(mult(mult(mult(mult(mult(z, z), z), z), z), z), z);\n//const pow8 = (z: Complex) => mult(mult(mult(mult(mult(mult(mult(z, z), z), z), z), z), z), z);\nconst pow8 = (z: Complex) => pow2(pow2(pow2(z)))\n\nexport function powN(k: number): (z: Complex) => Complex {\n  if (k < 0) {\n    const p = powN(-k);\n    return (z: Complex) => div(complex(1, 0), p(z))\n  }\n  if (k === 0) return z => complex(1, 0);\n  if (k === 1) return z => z;\n  if (k === 2) return pow2\n  if (k === 3) return pow3\n  if (k === 4) return pow4\n  if (k === 5) return pow5\n  if (k === 6) return pow6\n  if (k === 7) return pow7\n  if (k === 8) return pow8\n  if (k % 1 === 0) {\n    if (k % 2 === 0) {\n      const p = powN(k / 2)\n      return (z: Complex) => pow2(p(z))\n    } else {\n      const p = powN((k-1) / 2)\n      return (z: Complex) => mult(z, pow2(p(z)))\n    }\n  }\n  return z => powFloat(z, k);\n}\n\n\n// Other\n\nexport function abs2(z: Complex): number {\n  return z.re * z.re + z.im * z.im;\n}\n\nexport function abs(z: Complex): number {\n  return Math.sqrt(abs2(z));\n}\n\nexport function angle(z: Complex): number {\n  return Math.atan2(z.im, z.re);\n}\n\nexport function sqrt(z: Complex): Complex {\n  const angle = Math.atan2(z.im, z.re);\n  return fromPolar({\n    angle: angle / 2,\n    radius: Math.sqrt(abs(z))\n  })\n}\n\nexport function sinh(z: Complex): Complex {\n  return divReal(subt(exp(z), exp(neg(z))), 2)\n}\n","import React from 'react';\nimport { ControlComplex } from '../fractals/algorithm/types'\nimport DownUpButtons, { DownUpButtonsProps } from './DownUpButtons';\nimport {\n  complex,\n  fromPolar,\n  toPolar,\n} from '../fractals/math/complex';\nimport { Polar } from '../fractals/math/types';\nimport { Icon } from '.';\nimport * as fmt from '../fractals/formatting';\n\n//const round = (n: number) => Math.round(n * 100000) / 100000\n\ntype Vec = [number, number]\n\ninterface NewProps {\n  controlProps: ControlComplex\n  value: Vec\n  onChange: (x: Vec) => void\n}\n\ninterface Props extends NewProps, Omit<DownUpButtonsProps,'onChange'> {}\n\nclass ComplexIncrementer extends React.Component<Props> {\n\n  setValue(v: Vec) {\n    this.props.onChange(v)\n  }\n\n  toPolar() {\n    return toPolar(complex(this.props.value[0], this.props.value[1]))\n  }\n\n  fromPolar(v: Polar): Vec {\n    const a = fromPolar(v);\n    return [a.re, a.im];\n  }\n\n  radiusDown(): Vec {\n    const {stepRadius} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, radius: p.radius-stepRadius})\n  }\n\n  radiusUp(): Vec {\n    const {stepRadius} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, radius: p.radius+stepRadius})\n  }\n\n  angleDown(): Vec {\n    const {stepAngle} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, angle: p.angle-stepAngle})\n  }\n\n  angleUp(): Vec {\n    const {stepAngle} = this.props.controlProps;\n    const p = this.toPolar();\n    return this.fromPolar({...p, angle: p.angle+stepAngle})\n  }\n\n\n  onAngleDown = () => {\n    this.setValue(this.angleDown())\n  }\n\n  onAngleUp = () => {\n    this.setValue(this.angleUp())\n  }\n\n  onRadiusDown = () => {\n    this.setValue(this.radiusDown())\n  }\n\n  onRadiusUp = () => {\n    this.setValue(this.radiusUp())\n  }\n\n\n  render() {\n    const {controlProps, onChange, ...rest} = this.props;\n    const pol = this.toPolar();\n    return (\n      <>\n      <DownUpButtons\n        {...rest}\n        //label={controlProps.label + ': θ'}\n        value={fmt.num(pol.angle)}\n        label={controlProps.label + ': angle'}\n        onDown={this.onAngleDown}\n        onUp={this.onAngleUp}\n        downIcon={Icon.RotateRight}\n        upIcon={Icon.RotateLeft}\n      />\n      <DownUpButtons\n        {...rest}\n        value={fmt.num(pol.radius)}\n        label={controlProps.label + ': radius'}\n        onDown={this.onRadiusDown}\n        onUp={this.onRadiusUp}\n      />\n      </>\n    )\n  }\n}\n\nexport default ComplexIncrementer\n","import Box from '@material-ui/core/Box';\nimport { withStyles, Theme, createStyles } from '@material-ui/core/styles';\n\n\nconst styles = createStyles((theme: Theme) => ({\n  root: {\n    height: '100%',\n  }\n}));\n\n\nexport default withStyles(styles)(Box)","import {\n  interpolateLab,\n  piecewise,\n  scalePow,\n} from 'd3';\nimport { Color } from './types';\n\n\nfunction colorScale(color: Color): (domain: [number,number]) => (n: number) => string {\n  const interpolator = Array.isArray(color.scheme)\n    ? piecewise(interpolateLab, color.scheme)\n    : color.scheme;\n  const range = color.reverse ? [1, 0] : [0, 1];\n  const exponent = 2**color.skew;\n  return (domain: [number,number]) => {\n    const scale = scalePow().domain(domain).range(range).exponent(exponent);\n    return (n: number) => interpolator(scale(n));  \n  }\n}\n\nfunction colorMap(color: Color): (domain: [number,number]) => {[k: number]: string} {\n  // discrete version\n  const cs = colorScale(color);\n  return (domain: [number, number]) => {\n    const scale = cs(domain);\n    if (domain[0] === 0) {\n      const result: string[] = [];\n      for (let i = domain[0]; i <= domain[1]; i++) {\n        result.push(scale(i))\n      }\n      return result;\n    } else {\n      const result: {[k: number]: string} = {};\n      for (let i = domain[0]; i <= domain[1]; i++) {\n        result[i] = scale(i);\n      }\n      return result;\n    }\n  }\n}\n\n\nexport { colorScale, colorMap }","import {\n  interpolateInferno as Inferno,\n  interpolateMagma as Magma,\n  interpolatePlasma as Plasma,\n  interpolateViridis as Viridis,\n  interpolateCool as Cool,\n  interpolateWarm as Warm,\n  interpolateGreys as Greys,\n  interpolateRainbow as Rainbow,\n  interpolateSpectral as Spectral,\n  interpolateCubehelixDefault as Cubehelix\n} from 'd3';\nimport { ColorScheme } from './types';\n\ntype SchemeDict = {[k: string]: ColorScheme}\n\nexport const D3_SCHEMES: SchemeDict = {\n  Cool,\n  Cubehelix,\n  Greys,\n  Inferno,\n  Magma,\n  Plasma,\n  Rainbow,\n  Spectral,\n  Viridis,\n  Warm,\n}\n\nexport const OTHER_SCHEMES: SchemeDict = {\n  Paint: [\"#3db5ec\", \"#73c2b0\", \"#b9e375\", \"#f4bb44\", \"#eb591b\"],\n  Ink: ['#000000', '#FFDD8C'],\n}\n\nconst ALL_SCHEMES: SchemeDict = {\n  ...D3_SCHEMES,\n  ...OTHER_SCHEMES,\n}\n\nexport default ALL_SCHEMES\n","import React from 'react';\nimport { ColorScheme } from '../fractals/color/types';\nimport { colorScale } from '../fractals/color';\nimport { withStyles, WithStyles, createStyles } from '@material-ui/core/styles';\n//import { CSSProperties } from '@material-ui/core'\n\n\nexport interface ColorPreviewProps {\n  width: number\n  height: number\n  orientation: string\n  scheme: ColorScheme\n  reverse: boolean\n  skew: number\n  style?: React.CSSProperties\n}\n\nconst styles = createStyles({\n  root: {\n    borderRadius: '8px',\n    boxShadow: '2px 2px 4px rgba(0,0,0,0.5)',\n  }\n})\n\ninterface Props extends ColorPreviewProps, WithStyles<typeof styles> {}\n\nclass ColorPreview extends React.Component<Props> {\n  ref: React.RefObject<HTMLCanvasElement>\n\n  static defaultProps = {\n    width: 400,\n    height: 10,\n    orientation: 'horizontal',\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    this.docolors();\n  }\n\n  componentDidUpdate() {\n    this.docolors();\n  }\n\n  docolors() {\n    const canvas = this.ref.current;\n    if (canvas) {\n      const context = canvas.getContext('2d');\n      if (context) {\n        const { scheme, reverse, skew, width, height, orientation } = this.props;\n        if (orientation === 'horizontal') {\n          const cm = colorScale({scheme, reverse, skew})([0,width]);\n          let i = width + 1;\n          while (i--) {\n            context.fillStyle = cm(i);\n            context.fillRect(i, 0, 1, height);\n          }\n        } else {\n          const cm = colorScale({scheme, reverse, skew})([height,0]);\n          let i = height + 1;\n          while (i--) {\n            context.fillStyle = cm(i);\n            context.fillRect(0, i, width, 1);\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    return (\n      <canvas ref={this.ref} \n        width={this.props.width} \n        height={this.props.height} \n        style={this.props.style}\n        className={this.props.classes.root}\n      />\n    )\n  }\n}\n\nexport default withStyles(styles)(ColorPreview)","import React from 'react';\nimport { withStyles, createStyles, WithStyles } from '@material-ui/core/styles';\n\n\nexport interface ComplexNumberInputProps {\n  value: [number, number],\n  max: number,\n  onClick?: (v: [number, number]) => void,\n  onDoubleClick?: (v: [number, number]) => any,\n  size: number,\n  precision: number,\n  stepRect: number,\n  stepRadius: number,\n  stepAngle: number,\n  angles?: number[],\n  style?: React.CSSProperties,\n  markerColor: string,\n  gridColor?: string,\n  textColor?: string,\n}\n\n\nconst styles = createStyles({\n  root: {\n    padding: '0px',\n    userSelect: 'none',\n  },\n  \n  grid: {\n    strokeLinecap: 'square',\n    fill: 'none',\n  },\n  \n  major: {\n    strokeWidth: 0.5,\n    strokeOpacity: 1,\n  },\n  \n  minor: {\n    strokeWidth: 0.5,\n    strokeOpacity: 0.3,\n  },\n  \n  marker: {\n    strokeWidth: 0,\n  },\n});\n\n\ninterface Props extends ComplexNumberInputProps, WithStyles<typeof styles> {}\n\nclass ComplexNumberInput extends React.Component<Props> {\n  ref: React.RefObject<SVGSVGElement>\n  GRID: {\n    RECT?: {MAJOR?: string, MINOR?: string},\n    POLAR?: {MAJOR?: string, MINOR?: string},\n  }\n  round: (n: number) => number\n\n  static defaultProps = {\n    size: 100,\n    precision: 3,\n    stepAngle: 30,\n    stepRadius: 0.2,\n    stepRect: 0.2,\n\n    markerColor: 'blue',\n    //gridColor: 'black',\n  }\n\n  constructor(props: React.PropsWithChildren<Props>) {\n    super(props);\n    this.ref = React.createRef();\n    const r = Math.pow(10, props.precision);\n    this.round = (n: number) => Math.round(n*r) / r;\n    const {max, stepRadius, stepRect, stepAngle, angles} = this.props;\n    this.GRID = makegrid({max, stepRadius, stepAngle, angles, stepX: stepRect, stepY: stepRect});\n  }\n\n  getValueAtClick(evt: any): [number, number] | undefined {\n    const svg = this.ref.current;\n    if (svg) {\n      const rect = svg.getBoundingClientRect();\n      const {x, y} = rect;\n      const {clientX, clientY} = evt.nativeEvent;\n      const clickX = ((clientX - x) / this.props.size - 0.5) * 2*this.props.max;\n      const clickY = -((clientY - y) / this.props.size - 0.5) * 2*this.props.max;\n      return [this.round(clickX), this.round(clickY)];\n    }\n  }\n\n  onClick = (evt: any) => {\n    if (this.props.onClick) {\n      const p = this.getValueAtClick(evt);\n      if (p) this.props.onClick(p);\n    }\n  }\n\n  onDoubleClick = (evt: any) => {\n    if (this.props.onDoubleClick) {\n      const p = this.getValueAtClick(evt);\n      if (p) this.props.onDoubleClick(p);\n    }\n  }\n\n  polarGrid() {\n    if (this.GRID.POLAR) {\n      return (\n        <>\n        {this.GRID.POLAR.MINOR ? (\n          <path d={this.GRID.POLAR.MINOR} \n            className={this.props.classes.minor} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        {this.GRID.POLAR.MAJOR ? (\n          <path d={this.GRID.POLAR.MAJOR} \n            className={this.props.classes.major} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        </>\n      )\n    }\n    return null;\n  }\n\n  rectGrid() {\n    if (this.GRID.RECT) {\n      return (\n        <>\n        {this.GRID.RECT.MINOR ? (\n          <path d={this.GRID.RECT.MINOR} \n            className={this.props.classes.minor} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        {this.GRID.RECT.MAJOR ? (\n          <path d={this.GRID.RECT.MAJOR} \n            className={this.props.classes.major} \n            vectorEffect=\"non-scaling-stroke\"/>\n        ) : null}\n        </>\n      )\n    }\n    return null;\n  }\n  \n  render() {\n    const markerRadius = this.props.max / 24;\n    const viewBox = [-this.props.max, -this.props.max, 2*this.props.max, 2*this.props.max]\n    return (\n      <svg \n        ref={this.ref}\n        onClick={this.onClick}\n        onDoubleClick={this.onDoubleClick}\n        viewBox={viewBox.join(' ')}\n        className={this.props.classes.root}\n        style={{...this.props.style, width: this.props.size, height: this.props.size}}\n      >\n        <g className={this.props.classes.grid}\n          style={{stroke: this.props.gridColor}}\n        >\n          {this.rectGrid()}\n          {this.polarGrid()}\n        </g>\n        <circle \n          cx={this.props.value[0]}\n          cy={-this.props.value[1]}\n          r={markerRadius} \n          className={this.props.classes.marker}\n          style={{\n            stroke: this.props.markerColor,\n            fill: this.props.markerColor,\n          }}\n        />\n      </svg>\n    )\n  }\n}\n\n\nexport default withStyles(styles)(ComplexNumberInput)\n\n\nfunction makegrid({max, stepX, stepY, stepRadius, stepAngle, angles}: {\n  max: number,\n  stepX: number,\n  stepY: number,\n  stepAngle: number,\n  stepRadius: number,\n  angles?: number[],\n}) {\n  const max_radius = max * 1.5;\n\n  function circle(cx: number, cy: number, r: number) {\n    return (\n      'M' + cx+r + ',' + cy + \n      'A' + r + ',' + r + ',0,1,0,' + cx + ',' + cy + r +\n      'A' + r + ',' + r + ',0,0,0,' + cx + r + ',' + cy\n    )\n  }\n\n  function hline(v: number) {\n    return 'M' + (-max) + ',' + v + 'H' + max;\n  }\n\n  function vline(v: number) {\n    return 'M' + v + ',' + (-max) + 'V' + max;\n  }\n  \n  let rect_minor = ''\n  let i = 0;\n  while (i <= max) {\n    rect_minor += vline(i) + vline(-i);\n    i += stepX;\n  }\n\n  i = 0;\n  while (i <= max) {\n    rect_minor += hline(i) + hline(-i);\n    i += stepY;\n  }\n  \n  let polar_minor = '';\n  \n  if (angles) {\n    angles.forEach(a => {\n      const rad = a * Math.PI / 180;\n      polar_minor += 'M0,0L' + max_radius * Math.cos(rad) + ',' + max_radius * Math.sin(rad);\n    })\n  } else {\n    i = 0;\n    while (i < 360) {\n      const rad = i * Math.PI / 180;\n      polar_minor += 'M0,0L' + max_radius * Math.cos(rad) + ',' + max_radius * Math.sin(rad);\n      i += stepAngle;\n    }\n  }\n\n  i = stepRadius;\n  while (i <= max_radius) {\n    polar_minor += circle(0, 0, i);\n    i += stepRadius;\n  }\n\n  return {\n    RECT: {MINOR: rect_minor, MAJOR: hline(0) + vline(0)},\n    POLAR: {MINOR: polar_minor, MAJOR: circle(0, 0, 1)},\n  }\n  \n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types';\nimport { Modal } from '../../store/ui/types';\nimport { setModal } from '../../store/ui/actions'\nimport AlgorithmSettings from './AlgorithmSettings';\nimport ColorSettings from './ColorSettings';\nimport ViewSettings from './ViewSettings';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Box from '@material-ui/core/Box';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Icon } from '../../components';\n\ntype Props = {\n  open: boolean\n  setModal: (modal: Modal) => void\n}\n\nconst StyledMenuItem = withStyles({\n  root: {\n    padding: '1em',\n  }\n})(MenuItem)\n\nconst StyledLabel = withStyles({\n  root: {\n    padding: 0,\n    margin: 0,\n  }\n})(ListItemText)\n\n\nconst StyledSwipeableDrawer = withStyles({\n  paper: {\n    display: 'flex',\n    flexDirection: 'row',\n    height: '100%',\n    maxWidth: '90vw',\n  }\n})(SwipeableDrawer)\n\nenum Menu {\n  None,\n  Algorithm,\n  Color,\n  View,\n}\n\nclass SettingsDrawer extends React.Component<Props> {\n  state: {\n    menu: Menu,\n    popup: boolean,\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      menu: Menu.None,\n      popup: false,\n    }\n  }\n\n\n\n  openMenu = () => this.props.setModal(Modal.Menu);\n  openAlgorithm = () => this.setState({menu: Menu.Algorithm});\n  openColor = () => this.setState({menu: Menu.Color});\n  openView = () => this.setState({menu: Menu.View});\n  closeAll = () => {\n    this.setState({menu: Menu.None});\n    this.closePopup();\n    this.props.setModal(Modal.None);\n  }\n\n  openPopup = () => this.setState({popup: true})\n  closePopup = () => this.setState({popup: false})\n\n  render() {\n    const labelStyle = this.state.menu === Menu.None ? {} : {display: 'none'};\n    const listStyle = this.state.menu === Menu.None ? {} : {width: '4em'}\n    return (\n      <StyledSwipeableDrawer\n        open={this.props.open}\n        onOpen={this.openMenu}\n        onClose={this.closeAll}\n      >\n        <List style={listStyle}>\n          <StyledMenuItem onClick={this.openAlgorithm}>\n            <ListItemIcon><Icon.Functions/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Algorithm</StyledLabel>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={this.openColor}>\n            <ListItemIcon><Icon.Palette/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Colors</StyledLabel>\n          </StyledMenuItem>\n          <StyledMenuItem onClick={this.openView}>\n            <ListItemIcon><Icon.View/></ListItemIcon>\n            <StyledLabel style={labelStyle}>View</StyledLabel>\n          </StyledMenuItem>\n          <Divider/>\n          <StyledMenuItem onClick={this.closeAll} style={{paddingTop: '2em', paddingBottom: '2em'}}>\n            <ListItemIcon><Icon.Back/></ListItemIcon>\n            <StyledLabel style={labelStyle}>Close</StyledLabel>\n          </StyledMenuItem>\n        </List>\n        <Box>\n          {this.state.menu === Menu.Algorithm ? (\n            <AlgorithmSettings \n              //onClose={this.closeAll}\n            />\n          ) : this.state.menu === Menu.Color ? (\n            <ColorSettings\n              //onClose={this.closeAll}\n            />\n          ) : this.state.menu === Menu.View ? (\n            <ViewSettings\n              //onClose={this.closeAll}\n            />\n          ) : null}\n        </Box>\n        \n      </StyledSwipeableDrawer>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({\n    open: state.ui.modal === Modal.Menu,\n  }),\n  (dispatch: Dispatch) => ({\n    setModal: (modal: Modal) => dispatch(setModal(modal))\n  })\n)(SettingsDrawer)","import React from 'react';\nimport TextField, { \n  StandardTextFieldProps,\n  FilledTextFieldProps,\n  OutlinedTextFieldProps,\n} from '@material-ui/core/TextField';\n\n\ninterface NewProps {\n  value?: number\n  step?: number\n  min?: number\n  max?: number\n  emptyValue?: number\n}\n\ninterface StandardNumberInputProps\n  extends NewProps, Omit<StandardTextFieldProps, 'value' | 'type'> {}\n\ninterface FilledNumberInputProps\n  extends NewProps, Omit<FilledTextFieldProps, 'value' | 'type'> {}\n\ninterface OutlinedNumberInputProps\n  extends NewProps, Omit<OutlinedTextFieldProps, 'value' | 'type'> {}\n\ntype NumberInputProps = \n  StandardNumberInputProps | \n  FilledNumberInputProps | \n  OutlinedNumberInputProps;\n\n\nclass NumberInput extends React.Component<NumberInputProps> {\n  state: {isEmpty: boolean}\n\n  constructor(props: NumberInputProps) {\n    super(props);\n    this.state = {\n      isEmpty: false\n    }\n  }\n\n  onChange = (evt: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const s = evt.target.value;\n    if (s === '') {\n      this.setState({isEmpty: true})\n    } else {\n      this.setState({isEmpty: false})\n    }\n    if (this.props.onChange) {\n      if (!isNaN(+s)) {\n        this.props.onChange(evt)\n      }\n    }\n  }\n\n  onBlur = (evt: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    if (this.props.onBlur) {\n      this.props.onBlur(evt);\n    }\n    this.setState({isEmpty: false});\n  }\n\n\n  render() {\n    const {step, min, max, inputProps, onChange, onBlur, value='', emptyValue=0, ...rest} = this.props;\n    return React.createElement(TextField, {\n      type: 'number',\n      value: value ? +value : this.state.isEmpty ? '' : emptyValue,\n      inputProps: {step, min, max, ...inputProps},\n      onChange: this.onChange,\n      onBlur: this.onBlur,\n      ...rest, \n    })\n  }\n}\n\n\nexport default NumberInput","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../store/types';\nimport { Nav } from '../store/ui/types';\nimport { setNav } from '../store/ui/actions';\nimport BottomNavigation, { BottomNavigationProps } from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport Badge from '@material-ui/core/Badge';\nimport { withStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport { Icon } from '../components';\n\n\nconst styles = createStyles(({palette}: Theme) => ({\n  root: {\n    position: 'absolute',\n    //top: 'auto',\n    bottom: 0,\n    width: '100%',\n    borderTop: '1px solid ' + palette.divider,\n  },\n}))\n\nconst StyledBottomNav = withStyles(styles)(BottomNavigation)\n\nconst BottomNav = (p: BottomNavigationProps & {galleryBadge: number}) => {\n  const {galleryBadge, ...props} = p;\n  return (\n    <StyledBottomNav {...props}>\n      \n      <BottomNavigationAction\n        value={Nav.Params}\n        label=\"Parameters\"\n        icon={<Icon.Tune/>}\n      />\n      <BottomNavigationAction\n        value={Nav.Explore}\n        label=\"Explore\"\n        icon={<Icon.Explore/>}\n      />\n      <BottomNavigationAction\n        value={Nav.Capture}\n        label=\"Capture\"\n        icon={<Icon.Capture/>}\n      />\n      <BottomNavigationAction\n        value={Nav.Gallery}\n        label=\"Saved\"\n        icon={\n          <Badge badgeContent={galleryBadge} color=\"primary\">\n            <Icon.Gallery/>\n          </Badge>\n        }\n      />\n    </StyledBottomNav>\n  )\n};\n\nexport default connect(\n  (state: State) => ({\n    value: state.ui.nav,\n    galleryBadge: state.ui.galleryBadge,\n  }),\n  (dispatch: Dispatch) => ({\n    onChange: (evt: any, x: Nav) => dispatch(setNav(x)),\n  })\n)(BottomNav)","import {\n  Update,\n  UPDATE,\n  State,\n  UpdateParams,\n  UPDATE_PARAMS,\n  SetFractal,\n  SET_FRACTAL,\n  Method,\n} from './types';\n\nexport const update = <T>(f: Partial<State<T>>): Update<T> => ({\n  type: UPDATE,\n  payload: f\n})\n\nexport const updateParams = <T>(params: T): UpdateParams<T> => ({\n  type: UPDATE_PARAMS,\n  payload: params\n})\n\nexport const setFractal = <T>(methodName: string, method: Method<T>, params?: T): SetFractal<T> => ({\n  type: SET_FRACTAL,\n  payload: {\n    methodName,\n    method,\n    params\n  }\n})","import {\n  FractalInterface,\n} from '../../../fractals/algorithm/types';\n\nexport const UPDATE = 'ALGORITHM_UPDATE';\nexport const SET_FRACTAL = 'ALGORITHM_SET_FRACTAL';\nexport const UPDATE_PARAMS = 'ALGORITHM_UPDATE_PARAMS';\n\nexport type Method<T> = FractalInterface<T>\n\nexport interface State<T> {\n  methodName: string\n  method: Method<T>\n  params: T\n}\n\nexport type Update<T> = {\n  type: typeof UPDATE\n  payload: Partial<State<T>>\n}\n\nexport type SetFractal<T> = {\n  type: typeof SET_FRACTAL,\n  payload: {\n    methodName: string\n    method: Method<T>\n    params?: T\n  }\n}\n\nexport type UpdateParams<T> = {\n  type: typeof UPDATE_PARAMS,\n  payload: T\n}\n\nexport type Action<T> = Update<T> | SetFractal<T> | UpdateParams<T>","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState, Dispatch } from '../../store/types';\nimport { Method } from '../../store/fractal/algorithm/types';\nimport { setFractal, recenter } from '../../store/fractal/actions';\nimport { redraw } from '../../store/ui/actions'\nimport {\n  SettingsContainer, \n  Select,\n  Option,\n  OptionLabel,\n} from '../../components';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\n\n\ntype Props = {\n  methodName: string\n  params: object\n  methodList: {[k: string]: Method<any>}\n  setFractal: <T extends object>(methodName: string, method: Method<T>, params?: T) => void\n  onClose?: () => void\n}\n\n\ninterface State {\n  methodName: string,\n  method: Method<any>\n  params: object,\n}\n\nclass AlgorithmSettings extends React.Component<Props> {\n  state: State\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      methodName: props.methodName,\n      method: props.methodList[props.methodName],\n      params: {...props.params},\n    };\n  }\n\n  selectMethod = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const methodName = evt.target.value;\n    const method = this.props.methodList[methodName]\n    this.setState({methodName, method, params: method.newParams()});\n  }\n\n  apply = () => {\n    const {methodName, method, params} = this.state;\n    this.props.setFractal(methodName, method, params)\n    if (this.props.onClose) {\n      this.props.onClose();\n    }\n  }\n\n  reset = () => {\n    const {methodName, params} = this.props;\n    this.setState({\n      methodName,\n      method: this.props.methodList[methodName],\n      params: {...params},\n    });\n  }\n\n  render() {\n    return (\n      <SettingsContainer>\n        <Box m={1}>\n          <Box m={1}>\n            <Select select\n              label=\"Method\"\n              value={this.state.methodName}\n              onChange={this.selectMethod}\n            >\n              {Object.keys(this.props.methodList).sort().map(k => {\n                return (\n                  <Option key={k} value={k}>\n                    <OptionLabel\n                      data={this.props.methodList[k].label}\n                    />\n                  </Option>\n                )\n              })}\n            </Select>\n          </Box>\n          <Box m={1}>\n            <ButtonGroup fullWidth color=\"primary\" orientation=\"vertical\">\n              <Button fullWidth onClick={this.apply}>Apply</Button>\n              <Button fullWidth onClick={this.reset}>Reset</Button>\n            </ButtonGroup>\n          </Box>\n        </Box>\n      </SettingsContainer>\n    )\n  }\n}\n\nexport default connect(\n  (state: AppState) => ({\n    methodName: state.fractal.algorithm.methodName,\n    methodList: state.ui.methodList,\n    params: state.fractal.algorithm.params,\n  }),\n  (dispatch: Dispatch) => ({\n    setFractal: function<T>(methodName: string, method: Method<T>, params?: T) {\n      dispatch(setFractal(methodName, method, params))\n      dispatch(recenter())\n      dispatch(redraw())\n    },\n  })\n)(AlgorithmSettings)","import {\n  State,\n  Update,\n  Recenter,\n  ZoomIn,\n  ZoomOut,\n  UPDATE,\n  RECENTER,\n  ZOOM_IN,\n  ZOOM_OUT,\n} from './types';\n\n\nexport const update = (update: Partial<State>): Update => ({\n  type: UPDATE,\n  payload: update,\n})\n\nexport const recenter = (): Recenter => ({\n  type: RECENTER,\n})\n\nexport const setCenter = (cx: number, cy: number): Update => ({\n  type: UPDATE,\n  payload: {cx, cy},\n})\n\nexport const zoomIn = (factor: number): ZoomIn => ({\n  type: ZOOM_IN,\n  payload: factor,\n})\n\nexport const zoomOut = (factor: number): ZoomOut => ({\n  type: ZOOM_OUT,\n  payload: factor,\n})","//import Big from 'big.js';\n\nexport type State = {\n  [k: string]: number | boolean\n  cx: number\n  cy: number\n  w: number\n  h: number\n  ppu: number // units per pixel\n  pixelCount: number\n}\n\nexport const UPDATE = 'VIEW_UPDATE';\nexport const ZOOM_IN = 'VIEW_ZOOM_IN';\nexport const ZOOM_OUT = 'VIEW_ZOOM_OUT';\nexport const RECENTER = 'VIEW_RECENTER';\n\nexport type Update = {\n  type: typeof UPDATE,\n  payload: Partial<State>,\n}\n\nexport type Recenter = {\n  type: typeof RECENTER,\n}\n\nexport type ZoomIn = {\n  type: typeof ZOOM_IN,\n  payload: number,\n}\n\nexport type ZoomOut = {\n  type: typeof ZOOM_OUT,\n  payload: number,\n}\n\nexport type Action = Update | ZoomIn | ZoomOut | Recenter;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState } from '../../store/types';\nimport { State as ColorState, ColorScheme } from '../../store/fractal/color/types';\nimport { updateColor } from '../../store/fractal/actions';\nimport { recolor, addColorScheme } from '../../store/ui/actions';\nimport {\n  ColorPreview,\n  SettingsContainer,\n  Select,\n  Option,\n  OptionLabel,\n  CustomColor,\n} from '../../components';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Popover from '@material-ui/core/Popover';\nimport Slider from '@material-ui/core/Slider';\nimport Switch from '@material-ui/core/Switch';\n\n\ninterface Colors {\n  schemeName: string\n  reverse: boolean\n  skew: number\n}\n\n\ntype Props = {\n  current: Colors\n  updateColor: (update: Partial<ColorState>) => void\n  addScheme: (name: string, scheme: string[]) => void\n  onClose?: () => void\n  schemeList: {[k: string]: ColorScheme}\n}\n\n\ntype Evt = React.ChangeEvent<HTMLInputElement>\n\nclass ColorSettings extends React.Component<Props> {\n  state: {\n    current: Colors\n    customPopup: boolean\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      current: {\n        schemeName: props.current.schemeName,\n        reverse: props.current.reverse,\n        skew: props.current.skew,\n      },\n      customPopup: false,\n    }\n  }\n\n  openCustomPopup = () => this.setState({customPopup: true})\n  closeCustomPopup = () => this.setState({customPopup: false})\n\n  setCurrent(x: Partial<Colors>) {\n    this.setState({...this.state, current: {...this.state.current, ...x}});\n  }\n\n  setScheme(schemeName: string) {\n    this.setCurrent({schemeName});\n  }\n\n  changeReverse = (evt: Evt) => this.setCurrent({reverse: evt.target.checked});\n  changeSkew = (evt: any, skew: number | number[]) => {\n    if (typeof skew === 'number') this.setCurrent({skew});\n    else console.log(skew);\n  }\n\n  selectScheme = (evt: any) => {\n    const scheme = evt.target.value;\n    if (scheme === 'CUSTOM') {\n      this.openCustomPopup();\n    } else {\n      this.setScheme(scheme);\n    }\n  }\n\n  hasChanged = () => {\n    if (this.state.current.schemeName !== this.props.current.schemeName\n      || this.state.current.reverse !== this.props.current.reverse\n      || this.state.current.skew !== this.props.current.skew) {\n      return true;\n    }\n    return false;\n  }\n\n  saveScheme = (k: string, colors: string[]) => {\n    this.props.addScheme(k, colors);\n    this.setScheme(k);\n  }\n\n  apply = () => {\n    this.props.updateColor({\n      schemeName: this.state.current.schemeName,\n      scheme: this.props.schemeList[this.state.current.schemeName],\n      reverse: this.state.current.reverse,\n      skew: this.state.current.skew,\n    });\n    if (this.props.onClose) {\n      this.props.onClose()\n    }\n  }\n\n  revert = () => {\n    this.setState({\n      schemeName: this.props.current.schemeName,\n      reverse: this.props.current.reverse,\n      skew: this.props.current.skew,\n    })\n  }\n\n  render() {\n    return (\n      <>\n        <SettingsContainer>\n          <Box m={1}>\n            <Box m={1}>\n              <Select select\n                label=\"Scheme\"\n                value={this.state.current.schemeName}\n                onChange={this.selectScheme}\n              >\n                <Option value=\"CUSTOM\">\n                  <OptionLabel data=\"CREATE NEW SCHEME\"/>\n                </Option>\n                {Object.keys(this.props.schemeList).sort().map(k => (\n                  <Option key={k} value={k}>\n                    <OptionLabel data={k}/>\n                  </Option>\n                ))}\n              </Select>\n            </Box>\n            <Box m={2}>\n              <FormControlLabel\n                label=\"Reversed\"\n                control={\n                  <Switch checked={this.state.current.reverse}\n                    onChange={this.changeReverse}\n                    edge=\"end\"\n                  />\n                }\n              />\n            </Box>\n\n            <Box m={2}>\n              <FormControl fullWidth>\n                <InputLabel shrink>Skew</InputLabel>\n                <Slider\n                  color=\"secondary\"\n                  value={this.state.current.skew}\n                  onChange={this.changeSkew}\n                  min={-5}\n                  max={5}\n                  step={0.1}\n                />\n              </FormControl>\n            </Box>\n\n            <Box m={1}>\n              <ColorPreview \n                style={{width: '100%', height: '4mm'}}\n                scheme={this.props.schemeList[this.state.current.schemeName]}\n                reverse={this.state.current.reverse}\n                skew={this.state.current.skew}\n                width={100}\n                height={10}\n              />\n            </Box>\n\n            <Box m={1}>\n              <ColorPreview \n                style={{width: '100%', height: '4mm'}}\n                scheme={this.props.schemeList[this.state.current.schemeName]}\n                reverse={this.props.current.reverse}\n                skew={this.props.current.skew}\n                width={100}\n                height={10}\n              />\n              <InputLabel>Current</InputLabel>\n            </Box>\n\n            \n            <ButtonGroup fullWidth color=\"primary\" orientation=\"vertical\">\n              <Button \n                onClick={this.apply}\n                disabled={!this.hasChanged()}\n              >Apply</Button>\n              <Button\n                onClick={this.revert}\n                disabled={!this.hasChanged()}\n              >Reset</Button>\n            </ButtonGroup>\n\n          </Box>\n        </SettingsContainer>\n\n        <Popover\n          open={this.state.customPopup}\n          onClose={this.closeCustomPopup}\n        >\n          <Box m={2}>\n            <CustomColor\n              onSave={this.saveScheme}\n              onClose={this.closeCustomPopup}\n              takenNames={Object.keys(this.props.schemeList)}\n            />\n          </Box>\n        </Popover>\n      </>\n    )\n  }\n}\n\nexport default connect(\n  (state: AppState) => ({\n    current: {...state.fractal.color},\n    schemeList: state.ui.colorSchemeList,\n  }),\n  (dispatch) => ({\n    updateColor: (updates: Partial<ColorState>) => {\n      dispatch(updateColor(updates));\n      dispatch(recolor());\n    },\n    addScheme: (k: string, colors: string[]) => {\n      dispatch(addColorScheme(k, colors));\n    },\n  }),\n)(ColorSettings);","import {\n  UPDATE,\n  State,\n  Update,\n} from './types';\n\n\nexport const update = (color: Partial<State>): Update => ({\n  type: UPDATE,\n  payload: color,\n})\n\n","import { ColorScheme as CS } from '../../../fractals/color/types';\n\nexport const UPDATE = 'COLOR_UPDATE';\n\nexport type ColorScheme = CS\n\nexport type State = {\n  schemeName: string\n  scheme: ColorScheme\n  reverse: boolean\n  skew: number\n}\n\nexport type Update = {\n  type: typeof UPDATE,\n  payload: Partial<State>,\n}\n\nexport type Action = Update","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState } from '../../store/types';\nimport { State as ViewState } from '../../store/fractal/view/types';\nimport { updateView } from '../../store/fractal/actions';\nimport { redraw } from '../../store/ui/actions';\nimport { NumberInput, SettingsContainer } from '../../components';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport Grid from '@material-ui/core/Grid';\nimport InputLabel from '@material-ui/core/InputLabel';\n\ntype Props = {\n  current: ViewState\n  updateView: (update: Partial<ViewState>) => void\n  onClose?: () => void\n}\n\ntype Evt = React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n\nclass ViewSettings extends React.Component<Props> {\n  state: {\n    current: ViewState,\n  }\n  centerStep: number\n\n  constructor(props: Props) {\n    super(props);\n    this.centerStep = 10 / this.props.current.ppu;\n    this.state = {\n      current: {...props.current},\n    }\n  }\n\n  hasChanged = () => {\n    for (const k in this.props.current) {\n      if (this.props.current[k] !== this.state.current[k]) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  apply = () => {\n    this.props.updateView(this.state.current);\n    if (this.props.onClose) {\n      this.props.onClose()\n    }\n  }\n\n  revert = () => {\n    this.setState({current: {...this.props.current}});\n  }\n\n  setCurrent(x: Partial<ViewState>) {\n    this.setState({current: {...this.state.current, ...x}});\n  }\n\n  setCX = (evt: Evt) => this.setCurrent({cx: +evt.target.value});\n  setCY = (evt: Evt) => this.setCurrent({cy: +evt.target.value});\n  setW = (evt: Evt) => this.setCurrent({w: +evt.target.value});\n  setH = (evt: Evt) => this.setCurrent({h: +evt.target.value});\n  setPPU = (evt: Evt) => this.setCurrent({ppu: +evt.target.value});\n  setPixelCount = (evt: Evt) => this.setCurrent({pixelCount: +evt.target.value});\n\n\n  render() {\n    return (\n      <SettingsContainer\n      >\n        <Box m={1}>\n        <Box m={1}>\n          <InputLabel>Relative Dimensions</InputLabel>\n          <Grid container spacing={1}>\n            <Grid item xs={6}>\n              <NumberInput\n                fullWidth={false}\n                label=\"Width\"\n                value={+this.state.current.w} \n                onChange={this.setW}\n                step={1}\n                min={1}\n                inputProps={{style: {maxWidth: '5em'}}}\n              />\n            </Grid>\n            <Grid item xs={6}>\n              <NumberInput\n                fullWidth={false}\n                label=\"Height\" \n                value={+this.state.current.h} \n                onChange={this.setH} \n                step={1}\n                min={1}\n                inputProps={{style: {maxWidth: '5em'}}}\n              />\n            </Grid>\n          </Grid>\n\n          <Box>\n            <NumberInput\n              label=\"Pixel count\"\n              value={+this.state.current.pixelCount} \n              onChange={this.setPixelCount} \n              step={10000}\n              min={10000}\n            />\n          </Box>\n\n          <Box>\n            <NumberInput\n              label=\"Center x-coordinate\"\n              value={+this.state.current.cx} \n              onChange={this.setCX} \n              step={this.centerStep}\n            />\n          </Box>\n\n          <Box>\n            <NumberInput\n              label=\"Center y-coordinate\"\n              value={+this.state.current.cy} \n              onChange={this.setCY} \n              step={this.centerStep}\n            />\n          </Box>\n\n          <Box>\n            <NumberInput\n              label=\"Scale (pixels per unit)\"\n              value={+this.state.current.ppu} \n              onChange={this.setPPU} \n              step={10}\n              min={0}\n            />\n          </Box>\n\n          <ButtonGroup fullWidth color=\"primary\" orientation=\"vertical\">\n            <Button \n              onClick={this.apply}\n              disabled={!this.hasChanged()}\n            >Apply</Button>\n            <Button\n              onClick={this.revert}\n              disabled={!this.hasChanged()}\n            >Reset</Button>\n\n          </ButtonGroup>\n        </Box>\n      </Box>\n      </SettingsContainer>\n    )\n  }\n  \n}\n\nexport default connect(\n  (state: AppState) => ({\n    current: state.fractal.view,\n  }),\n  (dispatch) => ({\n    updateView: (update: Partial<ViewState>) => {\n      dispatch(updateView(update));\n      dispatch(redraw());\n    },\n  })\n)(ViewSettings)","import SettingsMenu from './SettingsMenu'\n\nexport default SettingsMenu","import { State as FractalState } from '../store/fractal/types';\nimport { State as ViewState } from '../store/fractal/view/types';\nimport { colorScale } from './color';\nimport { fractal } from './index';\n\n\nexport function linearScale(domain: [number, number], range: [number,number]) {\n  const m = (range[1] - range[0]) / (domain[1] - domain[0])\n  const b = range[0] - m*domain[0]\n  return (n: number) => m*n + b;\n}\n\n\nexport function scaleDown({w, h, ppu, pixelCount}: {\n  w: number,\n  h: number,\n  ppu: number,\n  pixelCount: number,\n}) {\n  const pixels = w * h;\n  const factor = Math.sqrt(pixelCount / pixels)\n  const result = {\n    w: Math.round(w * factor),\n    h: Math.round(h * factor),\n    ppu: Math.round(ppu * factor),\n  }\n  return result\n}\n\nexport function rgb(color: string) {\n  return [color.slice(1,3), color.slice(3,5), color.slice(5,7)].map(s => parseInt(s, 16));\n}\n\n\ninterface Rect {\n  x: [number, number]\n  y: [number, number]\n  w: number\n  h: number\n}\n\ninterface Props extends Pick<FractalState,'algorithm'|'color'> {\n  view: ViewState | Rect\n}\n\nfunction isRect(view: ViewState | Rect): view is Rect {\n  return 'x' in view;\n}\n\nclass CanvasDrawer {\n  ctx: CanvasRenderingContext2D\n  fullResolution: boolean\n  cmap: [number,number,number][]\n  image: ImageData\n\n  constructor(fullResolution: boolean=false) {\n    this.ctx = document.createElement('canvas').getContext('2d') as CanvasRenderingContext2D;\n    this.fullResolution = fullResolution;\n    this.cmap = [];\n    this.image = new ImageData(1,1);\n  }\n\n  getView(view: ViewState | Rect) {\n    if (isRect(view)) {\n      return view;\n    } else {\n      return {...view, ...scaleDown(view)}\n    }\n  }\n\n  recolor(state: Props) {\n    this.draw(state)\n  }\n\n  draw(state: Props) {\n    const t0 = performance.now();\n    this.makeCMap(state);\n    this.makeImage(state);\n    const t1 = performance.now();\n    console.log('draw time:', t1 - t0, 'ms')\n  }\n\n  makeCMap({color, algorithm}: Props) {\n    const range = fractal(algorithm).range;\n    const cs = colorScale(color)(range);\n    const cmap: [number,number,number][] = [];\n    for (let i = 0; i <= range[1]; i++) {\n      this.ctx.fillStyle = cs(i);\n      const [r, g, b] = [\n        this.ctx.fillStyle.slice(1,3), \n        this.ctx.fillStyle.slice(3,5),\n        this.ctx.fillStyle.slice(5,7),\n      ].map(n => parseInt(n, 16))\n      cmap.push([r, g, b]);\n    }\n    this.cmap = cmap;\n  }\n\n  makeImage(state: Props) {\n    const {algorithm} = state;\n    const cmap = this.cmap;\n    const view = this.getView(state.view);\n    const {w, h} = view;\n    const calc = fractal(algorithm).calc;\n    const image = new ImageData(w, h);\n    let xrange: [number,number]\n    let yrange: [number,number]\n    if (isRect(view)) {\n      xrange = view.x;\n      yrange = view.y\n    } else {\n      const {cx, cy, w, h, ppu} = view;\n      const rx = w / ppu / 2;\n      const ry = h / ppu / 2;\n      xrange = [cx - rx, cx + rx];\n      yrange = [cy + ry, cy - ry];\n    }\n    const xscale = linearScale([-0.5, w-0.5], xrange);\n    const yscale = linearScale([-0.5, h-0.5], yrange);\n    for (let r = 0; r < h; r++) {\n      const y = yscale(r);\n      const hh = w * r;\n      for (let c = 0; c < w; c++) {\n        const x = xscale(c);\n        const i = 4*(c + hh);\n        const color = cmap[calc(x, y)]\n        image.data[i] = color[0];\n        image.data[i+1] = color[1];\n        image.data[i+2] = color[2];\n        image.data[i+3] = 255;\n      }\n    }\n    this.image = image;\n  }\n\n  putOnCanvas(canvas: HTMLCanvasElement) {\n    canvas.width = this.image.width;\n    canvas.height = this.image.height;\n    canvas.getContext('2d')?.putImageData(this.image, 0, 0);\n  }\n\n}\n\nexport default CanvasDrawer;","import { Complex as _Complex } from '../math/types';\nimport { StringWithMath as SWM } from '../../components/TypographyWithMath';\n\nexport type Complex = _Complex\n\nexport type StringWithMath = SWM\n\nexport type PixelCalculator = (x: number, y: number) => number\n\nexport type Params = {[k: string]: any}\n\nexport enum ControlType {\n  Call,\n  Number,\n  Complex,\n  Boolean,\n}\n\nexport interface ControlCall {\n  type: ControlType.Call\n  label?: string\n  icon?: string\n  onCall: () => Params\n}\n\nexport interface ControlNumber {\n  type: ControlType.Number\n  label: string\n  param: string\n  step: number\n  min?: number\n  max?: number\n}\n\nexport interface ControlComplex {\n  type: ControlType.Complex\n  label: string\n  param: string\n  stepRadius: number\n  stepAngle: number\n}\n\nexport interface ControlBoolean {\n  type: ControlType.Boolean\n  label: string\n  param: string\n}\n\nexport type ControlProps = ControlCall | ControlNumber | ControlComplex | ControlBoolean\n\n\nexport interface FractalInterface<T> {\n  label: StringWithMath\n  calc: (params: T) => (x: number, y: number) => number\n  range: (params: T) => [number, number]\n  describe: (params: T) => StringWithMath\n  newParams: () => T\n  controls: ControlProps[]\n}\n\nexport type Vector = [number, number]\n\n","import {\n  FractalInterface,\n  ControlProps,\n  StringWithMath,\n} from '../types'\n\n\n// create, settings, controls, random?\n\n\nexport default function<T>({\n  controls=[],\n  ...rest\n}: {\n  calc: (params: T) => (x: number, y: number) => number\n  newParams: () => T\n  label: StringWithMath\n  describe: (params: T) => StringWithMath\n  range: (params: T) => [number,number]\n  controls?: ControlProps[]\n}): FractalInterface<T> {\n  return {...rest, controls};\n}","import { Complex } from '../math/types';\nimport { abs2 } from '../math/complex';\n\n\nexport default function(bound: number, iterations: number) {\n  const b2 = bound * bound;\n  return (\n    f: (n: Complex) => Complex,\n    z0: Complex = {re: 0, im: 0}, \n  ) => {\n    let k = 0;\n    let z = z0;\n    while (k < iterations && abs2(z) < b2) {\n      k += 1;\n      z = f(z);\n    }\n    return k;\n  }\n}","import {\n  FractalInterface,\n  Complex,\n  ControlProps,\n  StringWithMath,\n  Params,\n} from '../types'\nimport { StringOrMath } from '../../../components/TypographyWithMath';\nimport { complex } from '../../math/complex';\nimport escapeTime from '../escapeTime';\nimport { num } from '../../formatting';\nimport baseFractalInterface from './base';\n\n\nexport interface EscapeParams extends Params {\n  bound: number\n  iterations: number\n}\n\nconst DefaultEscapeParams: EscapeParams ={\n  bound: 10,\n  iterations: 20,\n}\n\nexport function newParams<T>(x: () => T): () => (T & EscapeParams) {\n  return () => ({...DefaultEscapeParams, ...x()});\n}\n\nfunction calculate<T>(\n    f: (p: T) => (c: Complex) => (z: Complex) => Complex,\n    z0: 0 | 'c' | ((p: T) => (c: Complex) => Complex)=0,\n): (params: T & EscapeParams) => (x: number, y: number) => number {\n  if (z0 === 0) {\n    return (p: T & EscapeParams) => {\n      const func = f(p)\n      return (x: number, y: number) => {\n        return escapeTime(p.bound, p.iterations)(func(complex(x, y)))\n      };\n    };\n  }\n  if (z0 === 'c') {\n    return (p: T & EscapeParams) => {\n      const func = f(p)\n      return (x: number, y: number) => {\n        return escapeTime(p.bound, p.iterations)(func(complex(x, y)), complex(x, y))\n      };\n    };\n  }\n  return (p: T & EscapeParams) => {\n    const func = f(p)\n    const zz = z0(p)\n    return (x: number, y: number) => {\n      return escapeTime(p.bound, p.iterations)(func(complex(x, y)), zz(complex(x, y)))\n    };\n  };\n}\n\nfunction describe<T>(\n    f: (p: T & EscapeParams) => string,\n    z0: 0 | 'c' | ((p: T & EscapeParams) => string)=0,\n): (params: T & EscapeParams) => StringWithMath {\n  return (p: T & EscapeParams) => describeEscapeFunction(\n    f(p),\n    z0 === 0 ? '0' : z0 === 'c' ? 'x+yi' : z0(p),\n    p.bound,\n    p.iterations,\n  );\n}\n\ninterface CommonEscapeProps<T> {\n  label: StringWithMath\n  f: (p: T) => (c: Complex) => (z: Complex) => Complex\n  z0?: 0 | 'c' | ((p: T) => (c: Complex) => Complex)\n  newParams: () => T\n  controls?: ControlProps[]\n}\n\ninterface EscapePropsA<T> extends CommonEscapeProps<T> {\n  latexF: (p: T & EscapeParams) => string\n  latexZ0?: 0 | 'c' | ((p: T) => string)\n}\n\ninterface EscapePropsB<T> extends CommonEscapeProps<T> {\n  describe: (p: T & EscapeParams) => StringWithMath\n}\n\ntype EscapeProps<T> = EscapePropsA<T> | EscapePropsB<T>\n\nfunction isTypeA<T>(p: EscapeProps<T>): p is EscapePropsA<T> {\n  return !('describe' in p);\n}\n\nexport default function escape<T>(props: EscapeProps<T>): FractalInterface<T & EscapeParams> {\n  if (isTypeA(props)) {\n    const lz0 =\n      props.latexZ0 === undefined && (props.z0 === 0 || props.z0 === 'c')\n      ? props.z0 : props.latexZ0;\n    return baseFractalInterface<T & EscapeParams>({\n      label: props.label,\n      calc: calculate(props.f, props.z0),\n      range: (params: EscapeParams) => [0, params.iterations],\n      describe: describe(props.latexF, lz0),\n      newParams: newParams(props.newParams),\n      controls: props.controls,\n    })\n  } else {\n    return baseFractalInterface<T & EscapeParams>({\n      label: props.label,\n      calc: calculate(props.f, props.z0),\n      range: (params: T & EscapeParams) => [0, params.iterations],\n      describe: props.describe,\n      newParams: newParams(props.newParams),\n      controls: props.controls,\n    })\n  }\n}\n\n\nexport function describeEscapeFunction(\n  f: string, \n  z0: string, \n  bound: number, \n  iterations: number,\n): StringOrMath[] {\n\n  const fmla = (\n    '\\\\begin{aligned}'\n    + 'z_0 &= ' + z0\n    + '\\\\\\\\' \n    + 'z_{n+1} &= ' + (f.indexOf('z_') === -1 ? f.replace(/z/g, 'z_n') : f)\n    + '\\\\end{aligned}'\n  );\n\n  return [\n    {math: fmla, displayMode: true},\n    \"The color of the pixel located at \", {math: \"(x, y)\"},\n    \" corresponds to \", {math: \"k\"}, \", where \", {math: \"z_k\"},\n    \" is the first term of the above sequence such that \",\n    {math: `|z_k| > ${num(bound)}`},\n    \". If this does not occur in the first \", {math: num(iterations)},\n    \" terms of the sequence, then \", {math: \"k = \" + num(iterations)}, '.',\n  ]\n}","import {\n  FractalInterface,\n  Complex,\n  ControlProps,\n  StringWithMath,\n} from '../types'\nimport baseFractalInterface from './base';\nimport escapeTime from '../escapeTime';\nimport { EscapeParams, describeEscapeFunction, newParams } from './escape';\nimport { complex } from '../../math/complex';\n\n\nfunction juliaLabel(f: StringWithMath): StringWithMath {\n  if (Array.isArray(f)) {\n    return ['Julia: ', ...f]\n  } else {\n    return ['Julia: ', f]\n  }\n}\n\nfunction juliaCalc<T>(\n  f: (p: T) => (z: Complex) => Complex,\n) {\n  return (p: T & EscapeParams) => {\n    const func = f(p)\n    const esc = escapeTime(p.bound, p.iterations)\n    return (x: number, y: number) => {\n      return esc(func, complex(x, y))\n    };\n  };\n}\n\nexport default function julia<T>({f, label, latexF, ...props}: {\n  f: (p: T) => (z: Complex) => Complex,\n  label: StringWithMath,\n  latexF: (p: T & EscapeParams) => string,\n  newParams: () => T,\n  controls?: ControlProps[],\n}): FractalInterface<T & EscapeParams> {\n\n  return baseFractalInterface<T & EscapeParams>({\n    label: juliaLabel(label),\n    calc: juliaCalc(f),\n    range: (params: EscapeParams) => [0, params.iterations],\n    describe: (params: T & EscapeParams) => describeEscapeFunction(\n      latexF(params),\n      'x+yi',\n      params.bound,\n      params.iterations,\n    ),\n    newParams: newParams(props.newParams),\n    controls: props.controls,\n  })\n}\n\nexport function noParam(props: {\n  f: (z: Complex) => Complex,\n  latexF: string,\n  newParams?: () => Partial<EscapeParams>\n}): FractalInterface<EscapeParams> {\n  return julia({\n    f: () => props.f,\n    label: props.latexF,\n    latexF: () => props.latexF,\n    newParams: props.newParams ? props.newParams : () => ({}),\n  });\n}","\nexport function isInt(n: number) {\n  return n % 1 === 0;\n}\n","import { Complex, Coeffs } from './types';\nimport { add, powInt, multReal, toPolar, addPolar } from './complex';\nimport * as P from './polar';\nimport { isInt } from './util';\n\n\n/**\n * { exponent: coefficient }\n * can be object \n *  {2: 3, 5: 1} => 3z^2 + z^5\n * or array\n *  [1, 0, -3, 5] => z^0 - 3z^2 + 5z^3\n */\n\n\nfunction allAreInts(coeffs: Coeffs): boolean {\n  for (const k in coeffs) {\n    if (!isInt(+k) || +k < 0) return false;\n  }\n  return true;\n}\n\n\nexport default function(coeffs: Coeffs): (z: Complex) => Complex {\n  if (allAreInts(coeffs)) {\n    return (z: Complex) => {\n      let result: Complex = {re: 0, im: 0};\n      for (const k in coeffs) {\n        result = add(result, multReal(powInt(z, +k), coeffs[k]))\n      }\n      return result\n    }\n  } else {\n    return (z: Complex) => {\n      const p = toPolar(z);\n      let result: Complex = {re: 0, im: 0};\n      for (const k in coeffs) {\n        result = addPolar(result, P.multReal(P.powReal(p, +k), coeffs[k]))\n      }\n      return result\n    }\n  } \n}","// Fractal-specific functions\nimport { Complex } from './types';\nimport {\n  complex,\n  abs2,\n  add,\n  multReal,\n  powN,\n} from './complex';\nimport * as Math from './real';\n\n\n\n// Burning Ship\n\nconst BS = (z: Complex) => complex(Math.abs(z.re), Math.abs(z.im))\n\nexport function burningship(k: number=1, c?: [number,number]): (z: Complex) => Complex {\n  if (c) {\n    const bs = burningship(k);\n    const cc = complex(c[0], c[1])\n    return (z: Complex) => add(bs(z), cc)\n  }\n  if (k === 1) return BS\n  else {\n    const p = powN(k)\n    return (z: Complex) => p(complex(Math.abs(z.re), Math.abs(z.im)))\n  }\n}\n\n\n// Mandelbox\n\nexport function mandelboxA(v: number=1) {\n  const w = v*2;\n  const f = (n: number) =>  {\n    if (n > v) return w - n;\n    else if (n < -v) return -w - n;\n    else return n;\n  }\n  return (z: Complex) => complex(f(z.re), f(z.im));\n}\n\nexport function mandelboxB(v: number=2) {\n  const v2 = v*v;\n  const recip = 1/v2;\n  return (z: Complex) => {\n    const ab2 = abs2(z);\n    if (ab2 < recip) {\n      return multReal(z, v2)\n    } else if (ab2 < 1) {\n      return multReal(z, 1/ab2)\n    } else {\n      return z\n    }\n  }\n}\n\nexport function mandelbox(a: number=1, b: number=2, c: number=2) {\n  const aa = a*2;\n  const f1 = (n: number) =>  {\n    if (n > a) return aa - n;\n    else if (n < -a) return -aa - n;\n    else return n;\n  }\n  const b2 = b*b;\n  const recip = 1/b2;\n  const f2 = (z: Complex) => {\n    const ab2 = abs2(z);\n    if (ab2 < recip) {\n      return multReal(z, c*b2)\n    } else if (ab2 < 1) {\n      return multReal(z, c/ab2)\n    } else {\n      return multReal(z, c)\n    }\n  }\n  return (z: Complex) => f2(complex(f1(z.re), f1(z.im)));\n}\n\n\n// Phoenix\n\n\nexport function lookback(f: (z: Complex, zprev: Complex) => Complex, z0: Complex=complex(0,0)) {\n  let zp = z0;\n  return (z: Complex) => {\n    const z1 = f(z, zp)\n    zp = z;\n    return z1;\n  }\n}\n\n\nexport function phoenix(p=-0.5, k: number=2, c?: [number,number]) {\n  const po = powN(k)\n  if (c) {\n    const cc = complex(c[0], c[1])\n    return (z: Complex, zp: Complex) => add(add(po(z), cc), multReal(zp, p));\n  } else {\n    return (z: Complex, zp: Complex) => add(po(z), multReal(zp, p));\n  }\n  /*\n  let zp = complex(0,0)\n  const po = powN(k)\n  if (c) {\n    const cc = complex(c[0], c[1])\n    return (z: Complex, zprev=zp) => {\n      const z1 = add(add(po(z), cc), multReal(zprev, p))\n      zp = z;\n      return z1;\n    }\n  } else {\n    return (z: Complex, zprev=zp) => {\n      const z1 = add(po(z), multReal(zprev, p))\n      zp = z;\n      return z1;\n    }\n  }\n  */\n}","import { Complex, ControlType, ControlProps } from './types';\nimport * as mix from './mixers';\nimport {\n  complex,\n  add,\n  multReal,\n  powInt,\n  powFloat,\n} from '../math/complex';\nimport { R as Math } from '../math';\nimport { mandelbox } from '../math/fractals';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\nimport { MandelboxParams } from './mandelbox';\n\n\nexport interface BurningShipParams { k: number }\n\nfunction absabs(z: Complex) {\n  return {re: Math.abs(z.re), im: Math.abs(z.im)};\n}\n\nexport const BurningShip1 = mix.escape({\n  label: 'Burning Ship',\n  latexF: (p: BurningShipParams) => `\\\\left(|Re(z)|+|Im(z)|\\\\right)^{${num(p.k)}}+x-yi`,\n  f: (p: BurningShipParams) => {\n    const k = p.k;\n    if (isInt(k)) {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powInt(absabs(z), k), cc);\n      }\n    } else {\n      return (c: Complex) => {\n        const cc = {re: c.re, im: -c.im}\n        return (z: Complex) => add(powFloat(absabs(z), k), cc);\n      }\n    }\n  },\n  newParams: () => ({k: 2}),\n  controls: [\n    {\n      type: ControlType.Number,\n      label: 'exponent (k)',\n      param: 'k',\n      step: 1,\n      min: 0,\n    }\n  ] as ControlProps[],\n})\n\n\n\n\ninterface BurningShipBoxParams extends BurningShipParams, MandelboxParams {}\n\nexport const BurningShip2Mandelbox = mix.escape<BurningShipBoxParams>({\n  label: 'Burning Ship (Mandelbox Remix)',\n  \n  f: ({a, b, c, k}) => {\n    const pow = isInt(k) && k > 0 ? powInt : powFloat\n    const mbox = mandelbox(a, b, c);\n    return (x: Complex) => (z: Complex) => {\n      let z1 = multReal(pow(complex(Math.abs(z.re), -Math.abs(z.im)), k), 1/c);\n      return add(mbox(z1), x);\n    }\n  },\n\n  z0: 0,\n\n  describe: ({a, b, c, k, bound, iterations}) => [\n    'This follows the same algorithm as the Mandelbox fractal, but first applies the function ',\n    {\n      math: `z \\\\mapsto \\\\left(|Re(z)|-|Im(z)|\\\\right)^{${num(k)}} \\\\div ${num(c)}`,\n      displayMode: true,\n    }\n  ],\n\n  newParams: () => ({a: 1, b: 2, c: 2.2, k: 2, bound: 50}),\n\n  controls: [\n    {\n      type: ControlType.Call,\n      icon: 'Random',\n      onCall: () => ({scale: Math.round(Math.random() * 100)/100 + 0.5})\n    },\n    {\n      type: ControlType.Number,\n      param: 'a',\n      label: 'a',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'b',\n      label: 'b',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'c',\n      label: 'c',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'k',\n      step: 0.1,\n      //min: 0\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 10,\n      min: 0,\n    }\n  ],\n});\n\n","import { Complex, ControlType, ControlProps } from './types';\nimport julia from './mixers/julia';\nimport {\n  complex,\n  add,\n  powReal,\n  exp,\n  sqrt,\n  sinh,\n  powN,\n} from '../math/complex';\nimport { burningship } from '../math/fractals';\nimport polynomial from '../math/polynomial';\nimport { R as Math } from '../math';\nimport * as fmt from '../formatting'\n\n\nfunction randomC() {\n  let angle = Math.PI -2 * Math.asin(Math.pow(Math.random(), 0.9));\n  if (Math.random() < 0.5) angle = 2*Math.PI-angle;\n  const radius = 0.3 + Math.sin(angle / 2) * 0.6 * (Math.random() * 0.4 + 0.8);\n  return [\n    Math.round(radius * Math.cos(angle) * 1000) / 1000,\n    Math.round(radius * Math.sin(angle) * 1000) / 1000,\n  ] as [number, number]\n}\n\n\ninterface JuliaParams {\n  k: number\n  c: [number, number]\n}\n\n\nconst JuliaControls: {[k: string]: ControlProps} = ({\n  k: {\n    type: ControlType.Number,\n    label: 'exponent (k)',\n    param: 'k',\n    step: 0.5,\n  },\n  c: {\n    type: ControlType.Complex,\n    label: 'c',\n    param: 'c',\n    stepRadius: 0.02,\n    stepAngle: 0.05,\n  },\n  randomC: {\n    type: ControlType.Call,\n    icon: 'Random',\n    //label: 'random',\n    onCall: () => ({c: randomC()}),\n  },\n})\n\ninterface JQuad extends JuliaParams {}\n\nexport const Julia_ = julia({\n  label: {math: 'z^k+c'},\n\n  f: ({k,c}: JQuad) => {\n    const cc = complex(c[0], c[1])\n    const p = powN(k)\n    return (z: Complex) => add(p(z), cc);    \n  },\n\n  latexF: ({k,c}: JQuad) => `z^{${fmt.num(k)}}${fmt.complex(c,{sign:true})}`,\n\n  newParams: () => ({k: 2, c: randomC()}),\n\n  controls: [\n    JuliaControls.randomC,\n    JuliaControls.c,\n    JuliaControls.k,\n    {\n      type: ControlType.Number,\n      label: 'bound',\n      param: 'bound',\n      step: 5,\n      min: 0,\n    }\n  ],\n\n});\n\n\nexport type JPoly = {\n  a: number,\n  b: number,\n  m: number,\n  n: number,\n  c: [number,number],\n}\n\nexport const JuliaAPoly = julia({\n  label: {math: 'az^m+bz^n+c'},\n\n  f: ({a, b, c, m, n}: JPoly) => {\n    const poly = polynomial({[m]: a, [n]: b});\n    const cc = complex(c[0], c[1]);\n    return (z: Complex) => add(poly(z), cc);\n  },\n\n  latexF: ({a, b, c, m, n}: JPoly) => {\n    return (\n      `${fmt.num(a)}z^{${fmt.num(m)}}`\n      + `${fmt.num(b,{sign:true})}z^{${fmt.num(n)}}`\n      + `${fmt.complex(c,{sign:true})}`\n    )\n  },\n\n  newParams: () => ({\n    a: -5, m: -2,\n    b: 1, n: 1,\n    c: [-0.5,0.5] as [number,number],\n  }),\n\n  controls: [\n    ...['a', 'm', 'b', 'n'].map(p => ({\n      type: ControlType.Number,\n      param: p,\n      label: p,\n      step: p === 'a' || p === 'b' ? 1 : 0.1,\n    }) as ControlProps),\n    JuliaControls.c,\n  ],\n})\n\n\n\nexport const JuliaExp = julia<JuliaParams>({\n  label: {math: 'e^{z^k}+c'},\n\n  newParams: () => ({k: 3, c: [-0.6,0]}),\n\n  latexF: ({k,c}: JuliaParams) => `e^{z^{${fmt.num(k)}}}${fmt.complex(c,{sign:true})}`,\n\n  f: ({k,c}: JuliaParams) => {\n    const cc = complex(c[0], c[1]);\n    return (z: Complex) => add(exp(powReal(z, k)), cc);\n  },\n\n  controls: [\n    JuliaControls.randomC,\n    JuliaControls.c,\n    JuliaControls.k,\n    {\n      type: ControlType.Number,\n      label: 'bound',\n      param: 'bound',\n      min: 0,\n      step: 1,\n    },\n  ]\n})\n\n\n\nexport const JuliaSinh = julia<JuliaParams>({\n  label: {math: '\\\\sqrt{\\\\sinh(z^{k})}+c'},\n\n  newParams: () => ({k: 2, c: [0.06, 0.12]}),\n\n  latexF: ({k,c}: JuliaParams) => `\\\\sqrt{\\\\sinh(z^{${fmt.num(k)}})}${fmt.complex(c,{sign:true})}`,\n\n  f: ({k,c}: JuliaParams) => {\n    const cc = complex(c[0], c[1]);\n    return (z: Complex) => add(sqrt(sinh(powReal(z, k))), cc);\n  },\n\n  controls: [\n    JuliaControls.randomC,\n    JuliaControls.c,\n    JuliaControls.k,\n    {\n      type: ControlType.Number,\n      label: 'bound',\n      param: 'bound',\n      min: 0,\n      step: 1,\n    },\n  ]\n})\n\n\nexport const Julia1Burning = julia<JuliaParams>({\n  label: 'Burning Ship',\n\n  newParams: () => ({k: 2, c: randomC()}),\n\n  f: ({k, c}: JuliaParams) => {\n    const cc = complex(c[0], c[1])\n    const bs = burningship(k);\n    return (z: Complex) => add(bs(z), cc)\n  },\n\n  latexF: ({k,c}: JuliaParams) => `(|Re(z)|+|Im(z)|)^{${fmt.num(k)}}${fmt.complex(c,{sign:true})}`,\n\n  controls: [\n    JuliaControls.randomC,\n    JuliaControls.c,\n    JuliaControls.k,\n  ]\n\n});\n","import { Complex, ControlType } from './types';\nimport * as mix from './mixers';\nimport {\n  add,\n  powInt,\n  powFloat,\n  multReal,\n  addReal,\n  div,\n  mult,\n} from '../math/complex';\nimport { isInt } from '../math/util';\nimport * as fmt from '../formatting'\n\n\n\nexport interface MagnetParams {\n  k: number,\n}\n\nexport const Magnet1 = mix.escape({\n  label: 'Magnet Type I',\n\n  f: ({k}: MagnetParams) => {\n    const pow = isInt(k) && k > 0 ? powInt : powFloat\n    return (c: Complex) => {\n      //const c = complex(x, y);\n      const a = addReal(c, -1);\n      const b = addReal(c, -2);\n      return (z: Complex) => pow(div(\n        add(powInt(z, 2), a),\n        add(multReal(z, 2), b)\n      ), k)\n    }\n  },\n\n  latexF: ({k}: MagnetParams) => '\\\\left(\\\\frac{z^2 + x+yi - 1}{2z + x+yi - 2}\\\\right)^{' + fmt.num(k) + '}',\n\n  newParams: () => ({k: 2}),\n\n  controls: [\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'exponent',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 5,\n      min: 0,\n    },\n  ],\n})\n\nexport interface Magnet2Params {k: number}\n\nexport const Magnet2 = mix.escape({\n  label: 'Magnet Type II',\n\n  newParams: () => ({k: 2}),\n\n  f: ({k}: Magnet2Params) => {\n    const pow = isInt(k) && k > 0 ? powInt : powFloat\n    return (c: Complex) => {\n      //const c = complex(x, y);\n      const a = addReal(c, -1);\n      const b = addReal(c, -2);\n      const a3 = multReal(a, 3);\n      const b3 = multReal(b, 3);\n      const ab = mult(a, b)\n      return (z: Complex) => pow(div(\n        add(add(powInt(z, 3), mult(a3, z)), ab),\n        add(add(multReal(powInt(z, 2), 3), mult(b3, z)), addReal(ab, 1))\n      ), k)\n    }\n  },\n\n  latexF: ({k}: Magnet2Params) => ('\\\\left(\\\\frac' \n  + '{z^3 + 3(x+yi-1)z + (x+yi-1)(x+yi-2)}' \n  + '{3z^2 + 3(x+yi-2)z + (x+yi-1)(x+yi-2) + 1}' \n  + '\\\\right)^{' + fmt.num(k) + '}'\n  ),\n\n  controls: [\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'exponent',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 5,\n      min: 0,\n    },\n  ]\n})","import { Complex, ControlType } from './types';\nimport { EscapeParams, describeEscapeFunction } from './mixers/escape';\nimport * as mix from './mixers';\nimport { add, complex } from '../math/complex';\nimport { R as Math } from '../math';\nimport { mandelbox, burningship } from '../math/fractals';\nimport * as fmt from '../formatting'\n\n\nfunction randomParams() {\n  return {scale: Math.round(Math.random() * 20)/10 + 2}\n}\n\n\nconst mandelboxFlatex = (v: number) => (\n  '\\\\left\\\\{\\\\begin{aligned}'\n  + `${fmt.num(2*v)} - n &, \\\\text{ if \\$n > ${fmt.num(v)}\\$}\\\\\\\\`\n  + `${fmt.num(-2*v)} - n &, \\\\text{ if \\$n < ${fmt.num(-v)}\\$}\\\\\\\\`\n  + 'n &, \\\\text{ otherwise}'\n  + '\\\\end{aligned}\\\\right.'\n);\n\nconst mandelboxAlatex = 'f(Re(z))+f(Im(z))i';\n\nconst mandelboxBlatex = (v: number) => (\n  '\\\\left\\\\{\\\\begin{aligned}'\n  + `${fmt.num(2*v)}z &, \\\\text{ if \\$|z|<${fmt.num(1/v)}\\$}\\\\\\\\`\n  + `z \\\\div |z|^2 &, \\\\text{ if \\$${fmt.num(1/v)} \\\\leq |z| < 1\\$}\\\\\\\\`\n  + 'z &, \\\\text{ otherwise}\\\\\\\\'\n  + '\\\\end{aligned}\\\\right.'\n)\n\nconst mandelboxClatex = (v: number) => fmt.num(v) + '\\\\cdot B(A(z)) + x + yi';\n\nfunction describeMandelbox(a: number, b: number, c: number, bound: number, iterations: number) {\n  return [\n    {\n      math: 'f_{\\\\mathbb{R}\\\\mapsto\\\\mathbb{R}}(n) =' + mandelboxFlatex(a),\n      displayMode: true,\n    },\n    {\n      math: 'A_{\\\\mathbb{C}\\\\mapsto\\\\mathbb{C}}(z) =' + mandelboxAlatex,\n      displayMode: true,\n    },\n    {\n      math: 'B_{\\\\mathbb{C}\\\\mapsto\\\\mathbb{C}}(z) =' + mandelboxBlatex(b),\n      displayMode: true,\n    },\n    ...describeEscapeFunction(\n      mandelboxClatex(c),\n      '0',\n      bound,\n      iterations,\n    )\n  ]\n} \n\n\nexport interface MandelboxParams {\n  a: number,\n  b: number,\n  c: number,\n}\n\nexport const Mandelbox1 = mix.escape({\n  label: 'Mandelbox',\n\n  f: ({a, b, c}: MandelboxParams) => {\n    const mbox = mandelbox(a, b, c);\n    return (x: Complex) => (z: Complex) => {\n      return  add(mbox(z), x);\n    }\n  },\n\n  newParams: () => ({a: 1, b: 2, c: 2.2}),\n\n  describe: ({a, b, c, bound, iterations}: MandelboxParams & EscapeParams) => {\n    return describeMandelbox(a, b, c, bound, iterations);\n  },\n\n  controls: [\n    {\n      type: ControlType.Call,\n      icon: 'Random',\n      onCall: () => randomParams(),\n    },\n    {\n      type: ControlType.Number,\n      param: 'a',\n      label: 'a',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'b',\n      label: 'b',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'c',\n      label: 'c',\n      step: 0.1,\n      min: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 10,\n      min: 0,\n    }\n  ],\n\n});\n\n\n\nexport const Mandelcorner = mix.escape<MandelboxParams>({\n  label: 'Mandelcorner',\n  f: ({a, b, c}) => (z0: Complex) => {\n    const cc = complex(z0.re, -z0.im);\n    const f1 = mandelbox(a, b, c)\n    const bs = burningship()\n    return (zz: Complex) => {\n      let z = complex(zz.re, zz.im);\n      z = f1(z)\n      return add(bs(z), cc);\n    }\n  },\n\n  newParams: () => ({a: 1, b: 2, c: 3}),\n\n  describe: ({a,b,c}) => ['Mandelbox(' + [a, b, c].map(v => fmt.num(v)).join(',') + ') -> Burning Ship'],\n\n  controls: [\n    {\n      type: ControlType.Number,\n      param: 'a',\n      label: 'a',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      param: 'b',\n      label: 'b',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      param: 'c',\n      label: 'c',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      param: 'bound',\n      label: 'bound',\n      step: 1,\n    }\n  ]\n})","import { Complex, ControlType } from './types';\nimport * as mix from './mixers';\nimport {\n  add,\n  powInt,\n  powFloat,\n} from '../math/complex';\nimport { isInt } from '../math/util';\nimport { num } from '../formatting'\n\n\n\nexport interface MandelbrotParams { k: number }\n\nexport const Mandelbrot = mix.escape({\n  label: 'Mandelbrot',\n  latexF: (p: MandelbrotParams) => `z^{${num(p.k)}}+x+yi`,\n  f: (p: MandelbrotParams) => {\n    const k = p.k;\n    if (isInt(k)) {\n      return (c: Complex) => (z: Complex) => add(powInt(z, k), c);\n    } else {\n      return (c: Complex) => (z: Complex) => add(powFloat(z, k), c);\n    }\n  },\n  newParams: () => ({k: 2}),\n  controls: [\n    {\n      type: ControlType.Number,\n      label: 'exponent (k)',\n      param: 'k',\n      step: 1,\n      min: 0,\n    }\n  ],\n})","import { Complex, ControlType } from './types';\nimport * as mix from './mixers';\nimport {\n  complex,\n} from '../math/complex';\nimport * as fmt from '../formatting'\nimport { burningship, phoenix, lookback } from '../math/fractals';\n\n\n\ninterface PhoenixParams {\n  p: number\n  k: number\n  c: [number,number]\n}\n\nexport const Phoenix1 = mix.escape<PhoenixParams>({\n  label: \"Phoenix\",\n\n  newParams: () => ({p: -0.5, k: 2, c: [0.5667,0]}),\n\n  f: ({p, k, c}: PhoenixParams) => {\n    return (_:Complex) => lookback(phoenix(p, k, c));\n  },\n\n  z0: () => (c: Complex) => complex(c.im, c.re),\n\n  latexZ0: () => 'y+xi',\n\n  latexF: ({p, k, c}: PhoenixParams) => {\n    return `z_{n}^{${fmt.num(k)}}${fmt.complex(c,{sign:true})}${fmt.num(p,{sign:true})}z_{n-1}`\n  },\n\n  controls: [\n    {\n      type: ControlType.Complex,\n      param: 'c',\n      label: 'c',\n      stepRadius: 0.02,\n      stepAngle: 0.05,\n    },\n    {\n      type: ControlType.Number,\n      param: 'p',\n      label: 'p',\n      step: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'k',\n      step: 0.5,\n    },\n  ]\n})\n\n\n\nexport const PhoenixBurningShip = mix.escape<PhoenixParams>({\n  label: \"Phoenix/Burning Ship\",\n\n  newParams: () => ({p: -0.5, k: 2, c: [0.6,0]}),\n\n  f: ({p, k, c}: PhoenixParams) => {\n    const bs = burningship(k)\n    const px = phoenix(p, 1, c);\n    const f = (z: Complex, zp: Complex) => px(bs(z), zp)\n    return (_: Complex) => lookback(f);\n  },\n\n  z0: () => (c: Complex) => complex(c.im, c.re),\n\n  latexZ0: () => 'y+xi',\n\n  latexF: ({p, k, c}: PhoenixParams) => {\n    return `\\\\left(|Re(z_{n})|+|Im(z_{n})|\\\\right)^{${fmt.num(k)}}${fmt.complex(c,{sign:true})}${fmt.num(p,{sign:true})}z_{n-1}`\n  },\n\n  controls: [\n    {\n      type: ControlType.Complex,\n      param: 'c',\n      label: 'c',\n      stepRadius: 0.02,\n      stepAngle: 0.05,\n    },\n    {\n      type: ControlType.Number,\n      param: 'p',\n      label: 'p',\n      step: 0.1,\n    },\n    {\n      type: ControlType.Number,\n      param: 'k',\n      label: 'k',\n      step: 0.5,\n    },\n  ]\n})\n","import {\n  ControlType,\n  ControlNumber,\n  ControlComplex,\n} from '../types'\n\n\nexport function number(param: string, {step=1, ...rest}: {\n  min?: number\n  max?: number\n  label?: string\n  step?: number\n}={}): ControlNumber {\n  return {\n    type: ControlType.Number,\n    param,\n    label: rest.label ? rest.label : param,\n    step,\n    ...rest,\n  }\n}\n\n\nexport function complex(param: string, {stepRadius=0.02, stepAngle=0.05, ...rest}: {\n  label?: string\n  stepRadius?: number\n  stepAngle?: number\n}={}): ControlComplex {\n  return {\n    type: ControlType.Complex,\n    param,\n    label: rest.label ? rest.label : param,\n    stepRadius,\n    stepAngle,\n    ...rest,\n  }\n}","import { Complex, ControlType, FractalInterface } from './types';\nimport { EscapeParams, describeEscapeFunction } from './mixers/escape';\nimport { BurningShipParams } from './burningship';\nimport { MandelboxParams } from './mandelbox';\nimport * as mix from './mixers';\nimport {\n  complex,\n  add,\n  exp,\n  mult,\n  multReal,\n  abs2,\n  powInt,\n  powFloat,\n  powReal,\n} from '../math/complex';\nimport { R as Math } from '../math';\nimport { isInt } from '../math/util';\nimport * as fmt from '../formatting'\nimport { burningship, mandelbox, phoenix, lookback } from '../math/fractals';\nimport * as ctrl from './mixers/controls';\n\n\n\n\ninterface ExpoParams {\n  k: number\n}\n\nexport const Exponential = mix.escape<ExpoParams>({\n  label: {math: 'e^{z^k}+c'},\n\n  newParams: () => ({k: 3}),\n\n  latexF: ({k}: ExpoParams) => `e^{z^{${fmt.num(k)}}}+x+yi`,\n\n  f: ({k}: ExpoParams) => (c: Complex) => {\n    return (z: Complex) => add(exp(powReal(z, k)), c);\n  },\n\n  controls: [\n    {\n      type: ControlType.Number,\n      label: 'k',\n      param: 'k',\n      step: 0.5,\n    },\n    {\n      type: ControlType.Number,\n      label: 'bound',\n      param: 'bound',\n      min: 0,\n      step: 1,\n    },\n  ]\n})\n\n\ninterface P {\n  m1: number\n  m2: number\n  m3: number\n  k: number\n  p: number\n  c: [number, number]\n}\n\nexport const Test1 = mix.escape<P>({\n  label: 'Test',\n\n  newParams: () => ({p: 0.5, k: 2, m1: 2, m2: 2, m3: 2, c: [0.001, 0]}),\n\n  f: ({p, k, m1, m2, m3, c}) => {\n    const bs = burningship(k)\n    const bx = mandelbox(m1, m2, m3)\n    const px = phoenix(p, 1, c)\n    const f = (z: Complex, zp: Complex) => bx(px(bs(z), zp))\n    return (_: Complex) => lookback(f)\n  },\n\n  z0: () => (c: Complex) => c,\n\n  describe: () => [''],\n\n  controls: [\n    ctrl.complex('c'),\n    ctrl.number('k', {step: 0.5}),\n    ctrl.number('p', {step: 0.5}),\n    ctrl.number('m1', {step: 0.1}),\n    ctrl.number('m2', {step: 0.5}),\n    ctrl.number('m3', {step: 0.1}),\n\n  ]\n})","import { FractalInterface } from './types';\nimport * as burningship from './burningship';\nimport * as julias from './julias';\nimport * as magnet from './magnet';\nimport * as mandelbox from './mandelbox';\nimport * as mandelbrot from './mandelbrot';\nimport * as phoenix from './phoenix';\nimport * as testing from './testing';\n\nexport const ALLFRACTALS: {[k: string]: FractalInterface<any>} = ({\n  ...burningship,\n  ...julias,\n  ...magnet,\n  ...mandelbox,\n  ...mandelbrot,\n  ...phoenix,\n  ...testing,\n});","import CanvasDrawer from './CanvasDrawer';\nimport { ALLFRACTALS } from './algorithm';\nimport { Algorithm } from './types';\nimport { colorScale, COLORSCHEMES } from './color';\n\n\n\nfunction fractal<T>({method, params}: Algorithm<T>) {\n  return {\n    label: method.label,\n    calc: method.calc(params),\n    range: method.range(params),\n    describe: method.describe(params),\n    controls: method.controls,\n  }\n}\n\nexport { colorScale }\n\n\n\nexport { CanvasDrawer, ALLFRACTALS, COLORSCHEMES, fractal }\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState, Dispatch } from '../../store/types';\nimport { State as FractalState } from '../../store/fractal/types';\nimport { setCenter } from '../../store/fractal/actions';\nimport { redraw, finish } from '../../store/ui/actions';\nimport { StretchMode, CanvasAction, Nav } from '../../store/ui/types';\nimport { CanvasDrawer } from '../../fractals';\nimport Box from '@material-ui/core/Box';\nimport styles from './Canvas.module.css';\n\n\ntype Props = {\n  visible: boolean\n  fractal: FractalState\n  canvasAction: CanvasAction\n  stretch: StretchMode\n  setCenter: (x: number, y: number) => void\n  finishDrawing: () => void\n}\n\nclass Canvas extends React.Component<Props> {\n  drawer: CanvasDrawer\n  canvasRef: React.RefObject<HTMLCanvasElement>\n\n  constructor(props: Props) {\n    super(props);\n    this.drawer = new CanvasDrawer();\n    this.drawer.fullResolution = false;\n    this.canvasRef = React.createRef();\n  }\n\n  get canvas() {\n    return this.canvasRef.current as HTMLCanvasElement\n  }\n\n  draw() {\n    this.drawer.draw(this.props.fractal);\n    this.drawer.putOnCanvas(this.canvas)\n    this.props.finishDrawing()\n  }\n\n  componentDidMount() {\n    if (this.canvas) {\n      this.draw()\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.canvasAction === CanvasAction.Draw) {\n      this.draw()\n    }\n    else if (this.props.canvasAction === CanvasAction.Color) {\n      this.draw();\n    }\n  }\n\n  centerOnClick = (evt: any) => {\n    if (this.props.setCenter) {\n      if (this.canvas) {\n        const {h, w, ppu, cx, cy} = this.props.fractal.view;\n        let {width, height} = this.canvas.getBoundingClientRect();\n        let {offsetX, offsetY} = evt.nativeEvent;\n\n        if (this.props.stretch === StretchMode.Contain) {\n          const ww = width / w;\n          const hh = height / h;\n          if (hh > ww) {\n            const imageH = h * ww;\n            offsetY -= (height - imageH) / 2\n            height = imageH\n          } else if (ww > hh) {\n            const imageW = w * hh;\n            offsetX -= (width - imageW) / 2\n            width = imageW\n          }\n        }\n\n        const pixel_x = Math.round((offsetX / width) * w);\n        const pixel_y = Math.round((offsetY / height) * h);\n        const dx = (pixel_x - (w / 2)) / ppu;\n        const dy = (pixel_y - (h / 2)) / ppu;\n        this.props.setCenter(cx + dx, cy - dy);\n      }\n    }\n  }\n\n  render() {\n    const outerClasses = [styles.Outer]\n    let objectFit: 'contain' | 'cover' | undefined\n    const outerstyle = this.props.visible ? {} : {display: 'none'}\n    switch (this.props.stretch) {\n      case StretchMode.Contain:\n        objectFit = 'contain';\n        outerClasses.push(styles.Stretch);\n        break;\n      case StretchMode.Cover:\n        objectFit = 'cover';\n        outerClasses.push(styles.Stretch);\n        break;\n    }\n\n    return (\n      <Box m={0} className={outerClasses.join(' ')} style={outerstyle}>\n\n          <canvas\n            id=\"fractal-preview-canvas\"\n            className={styles.Canvas}\n            ref={this.canvasRef}\n            onDoubleClick={this.centerOnClick}\n            style={{objectFit}}\n          />\n      </Box>\n    )\n  }\n}\n\n\nexport default connect(\n  (state: AppState) => ({\n    visible: (state.ui.nav === Nav.Params || state.ui.nav === Nav.Explore),\n    fractal: state.fractal,\n    canvasAction: state.ui.canvasAction,\n    stretch: state.ui.canvasStretch,\n  }),\n  (dispatch: Dispatch) => ({\n    setCenter: (x: number, y: number) => {\n      dispatch(setCenter(x, y));\n      dispatch(redraw());\n    },\n    finishDrawing: () => dispatch(finish()),\n  })\n)(Canvas)","import Canvas from './Canvas';\n\n\nexport default Canvas;","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport { withStyles, Theme } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\n\ntype Props = {\n  visible: boolean\n}\n\nconst Outside = withStyles((theme: Theme) => ({\n  root: {\n    //position: 'absolute',\n    bottom: '0',\n    width: '100%',\n    backgroundColor: theme.palette.background.default + '99',\n  }\n}))(Paper);\n\nconst Inside = withStyles({\n  root: {\n    display: 'flex',\n    flexFlow: 'row wrap',\n    alignItems: 'center',\n    justifyContent: 'space-around',\n    paddingBottom: '0.7em',\n    paddingTop: '0.3em',\n  }\n})(Toolbar)\n\n\nfunction ControlPanel(props: React.PropsWithChildren<Props>) {\n\n  return (\n    <Outside elevation={0} style={props.visible ? {} : {display: 'none'}}>\n      <Inside>\n        {props.children}\n      </Inside>\n    </Outside>\n  )\n}\n\nexport default ControlPanel","import { COLORSCHEMES, ALLFRACTALS } from './fractals'\n\n\n//export const fractalName = 'Julia1KC';\nexport const methodName = 'Julia_'\nexport const colorSchemeName = 'Rainbow'\nexport const pixelCount = 90000\nexport const captureSize = {\n  w: 1920,\n  h: 1080,\n}\n\nexport const canvasSize = {\n  w: 600,\n  h: 500,\n}\n\n\nexport const method = ALLFRACTALS[methodName]\nexport const colorScheme = COLORSCHEMES[colorSchemeName]\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types';\nimport { State as FractalState } from '../../store/fractal/types';\nimport { addToGallery } from '../../store/gallery/actions';\nimport { capture, finish, wait } from '../../store/ui/actions';\nimport { CanvasAction } from '../../store/ui/types';\nimport Cropper from 'react-easy-crop';\nimport Box from '@material-ui/core/Box';\nimport { Nav } from '../../store/ui/types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CanvasDrawer, { linearScale, scaleDown } from '../../fractals/CanvasDrawer';\nimport ControlPanel from '../Controls/ControlPanel';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Icon, NumberInput } from '../../components';\nimport { captureSize } from '../../defaults';\nimport Fab from '@material-ui/core/Fab';\n\nconst CropContainer = withStyles({\n  root: {\n    position: 'relative',\n    display: 'flex',\n    height: '100%',\n    width: '100%',\n    //backgroundColor: 'none',\n  }\n})(Box);\n\n\n\nlet FractalCounter = 1;\n\ninterface Crop {x: number, y: number}\ninterface Area extends Crop {width: number, height: number}\n\ninterface CropperProps {\n  crop: Crop\n  zoom: number\n}\n\ninterface Props {\n  visible: boolean\n  fractal: FractalState\n  addToGallery: (image: string, title: string) => void\n  capturing: boolean\n  startCapture: () => void\n  finishCapture: () => void\n}\n\n\nclass Capture extends React.Component<Props> {\n  state: CropperProps & {\n    image: string | null,\n    w: number,\n    h: number,\n  }\n  cropPixels: Area\n  drawer: CanvasDrawer\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      ...captureSize,\n      crop: {x: 0, y: 0},\n      zoom: 1,\n      image: null,\n    }\n    this.cropPixels = {x: 0, y: 0, width: captureSize.w, height: captureSize.h}\n    this.drawer = new CanvasDrawer();\n    this.drawer.fullResolution = true;\n  }\n\n  setW = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const w = +evt.target.value;\n    this.setState({w, aspect: w / this.state.h});\n  }\n\n  setH = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const h = +evt.target.value;\n    this.setState({h, aspect: this.state.w / h});\n  }\n\n  swapWH = () => {\n    this.setState({\n      w: this.state.h,\n      h: this.state.w,\n    })\n  }\n\n  getImage = () => {\n    const cvs = document.getElementById('fractal-preview-canvas') as HTMLCanvasElement;\n    if (cvs) {\n      const image =  cvs.toDataURL();\n      this.setState({ image })\n    }\n  }\n\n  onCropChange = (crop: Crop) => this.setState({crop});\n  onCropComplete = (area: Area, areaPixels: Area) => {\n    this.cropPixels = areaPixels;\n  }\n  onZoomChange = (zoom: number) => this.setState({zoom});\n\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.visible && !prevProps.visible) {\n      this.getImage();\n    }\n    if (this.props.capturing) {\n      setTimeout(this.capture, 500);\n    }\n  }\n\n  renderImage() {\n    const {cx, cy, w, h, ppu} = {...this.props.fractal.view, ...scaleDown(this.props.fractal.view)};\n    const rx = w / ppu / 2;\n    const ry = h / ppu / 2;\n    const xscale = linearScale([0, w], [cx - rx, cx + rx]);\n    const yscale = linearScale([h, 0], [cy - ry, cy + ry]);\n\n    const {x, y, width, height} = this.cropPixels;\n\n    const view = {\n      x: [xscale(x), xscale(x+width)] as [number,number],\n      y: [yscale(y), yscale(y+height)] as [number,number],\n      w: this.state.w,\n      h: this.state.h,\n    }\n\n    this.drawer.draw({...this.props.fractal, view});\n  }\n\n  saveImage() {\n    //const url = this.drawer.canvas.toDataURL();\n      //this.props.addToGallery(url, 'Fractal' + FractalCounter++);\n    const filename = 'Fractal' + FractalCounter++;\n    const canvas = document.createElement('canvas');\n    this.drawer.putOnCanvas(canvas);\n    canvas.toBlob((blob) => {\n      if (blob) {\n        const url = URL.createObjectURL(blob);\n        this.props.addToGallery(url, filename);\n      }\n    });\n  }\n\n  capture = () => {\n    this.renderImage();\n    this.saveImage();\n    this.props.finishCapture();\n  }\n\n  onClick = () => {\n    this.props.startCapture();\n  }\n\n  render() {    \n    return (\n      <>\n      <CropContainer style={this.props.visible ? {} : {display: 'none'}} >\n        <Cropper\n          image={this.state.image || ''}\n          crop={this.state.crop}\n          zoom={this.state.zoom}\n          aspect={this.state.w / this.state.h}\n          onCropChange={this.onCropChange}\n          onCropComplete={this.onCropComplete}\n          onZoomChange={this.onZoomChange}\n        />\n      </CropContainer>\n      <ControlPanel visible={this.props.visible}>\n\n          <Box>\n            <NumberInput\n              value={this.state.w}\n              label=\"width\"\n              onChange={this.setW}\n              min={0}\n              step={10}\n              inputProps={{style: {maxWidth: '4em'}}}\n            />\n          </Box>\n\n          <IconButton onClick={this.swapWH}>\n            <Icon.SwapHoriz />\n          </IconButton>\n\n          <Box>\n            <NumberInput\n              value={this.state.h}\n              label=\"height\"\n              onChange={this.setH}\n              min={0}\n              step={10}\n              inputProps={{style: {maxWidth: '4em'}}}\n            />\n          </Box>\n\n          <Fab onClick={this.onClick} color=\"primary\">\n            <Icon.AddAPhoto/>\n          </Fab>\n\n      </ControlPanel>\n      </>\n    )\n  }\n}\n\n\nexport default connect(\n  (state: State) => ({\n    visible: state.ui.nav === Nav.Capture,\n    capturing: state.ui.canvasAction === CanvasAction.Capture,\n    fractal: state.fractal,\n  }),\n  (dispatch: Dispatch) => ({\n    addToGallery: (image:string, title: string) => dispatch(addToGallery(image, title)),\n    startCapture: () => {\n      dispatch(wait());\n      dispatch(capture());\n    },\n    finishCapture: () => dispatch(finish()),\n  }),\n)(Capture);","import Capture from './Capture';\n\nexport default Capture;","import {\n  AddToGallery,\n  ADD_TO_GALLERY,\n  DeleteImage,\n  DELETE_IMAGE,\n} from './types';\n\n\nexport const addToGallery = (url: string, title: string): AddToGallery => ({\n  type: ADD_TO_GALLERY,\n  payload: {title, url}\n})\n\nexport const deleteImage = (url: string): DeleteImage => ({\n  type: DELETE_IMAGE,\n  payload: url,\n})\n","export const ADD_TO_GALLERY = 'GALLERY_ADD'\nexport const DELETE_IMAGE = 'GALLERY_DELETE'\n\nexport interface GalleryImage {\n  title: string\n  url: string\n}\n\nexport type State = GalleryImage[]\n\nexport type AddToGallery = {\n  type: typeof ADD_TO_GALLERY\n  payload: GalleryImage\n}\n\nexport type DeleteImage = {\n  type: typeof DELETE_IMAGE\n  payload: string\n}\n\nexport type Action = AddToGallery | DeleteImage\n\n\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { zoomIn, zoomOut } from '../../store/fractal/view/actions';\nimport { redraw } from '../../store/ui/actions';\nimport DownUpButtons, { DownUpButtonsProps } from '../../components/DownUpButtons';\nimport { Icon } from '../../components';\n\ninterface NewProps {\n  factor?: number\n  label?: string\n  fontSize?: 'small' | 'default' | 'large' | 'inherit'\n  zoomIn: (n: number) => void\n  zoomOut: (n: number) => void\n}\n\ninterface Props extends NewProps, Omit<DownUpButtonsProps, 'onUp' | 'onDown'> {}\n\nconst Zoom = ({factor=2, zoomIn, zoomOut, ...rest}: Props) => {\n  const zin = () => zoomIn(factor);\n  const zout = () => zoomOut(factor);\n  \n  return (\n    <DownUpButtons \n      {...rest}\n      onUp={zin} \n      onDown={zout} \n      downIcon={Icon.ZoomOut} \n      upIcon={Icon.ZoomIn}\n    />\n  )\n}\n\n\n\nexport default connect(\n  null,\n  (dispatch: any) => ({\n    zoomIn: (n: number) => {\n      dispatch(zoomIn(n));\n      dispatch(redraw());\n    },\n    zoomOut: (n: number) => {\n      dispatch(zoomOut(n));\n      dispatch(redraw());\n    }\n  })\n)(Zoom)","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  NumberIncrementer,\n  ComplexIncrementer,\n } from '../../components';\nimport {\n  ControlProps, ControlType, Params, \n  ControlNumber, ControlComplex, ControlCall,\n} from '../../fractals/algorithm/types'\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Icon } from '../../components';\nimport { State, Dispatch } from '../../store/types';\nimport { fractal } from '../../fractals';\nimport { updateParams } from '../../store/fractal/actions';\nimport { redraw } from '../../store/ui/actions';\n\n\ninterface Props {\n  controls: ControlProps[]\n  params: Params\n  onChange: (x: Params) => void\n}\n\nclass ParamControls extends React.Component<Props> {\n\n  paramUpdater = (k: string) => {\n    return (v: any) => {\n      //console.log(\"setting \" + k + ' => ' + v);\n      this.props.onChange({[k]: v});\n    }\n  }\n\n  renderNumberIncrementer(x: ControlNumber) {\n    const {param} = x;\n    return (\n      <NumberIncrementer\n        key={'number-'+param}\n        controlProps={x}\n        value={this.props.params[param]}\n        onChange={this.paramUpdater(param)}\n      />\n    )\n  }\n\n  renderComplexIncrementer(x: ControlComplex) {\n    const {param} = x;\n    return (\n      <ComplexIncrementer\n        key={'complex-'+param}\n        controlProps={x}\n        value={this.props.params[param]}\n        onChange={this.paramUpdater(param)}\n      />\n    )\n  }\n\n  renderCall(x: ControlCall) {\n    const {icon, label} = x;\n    if (label && icon === 'Random') {\n      return (\n        <Button\n          key={'action-'+label}\n          variant=\"outlined\"\n          color=\"inherit\"\n          size=\"small\"\n          onClick={() => this.props.onChange(x.onCall())}\n          startIcon={<Icon.Random/>}\n        >{x.label}</Button>\n      )\n    }\n    if (!label && icon === 'Random') {\n      return (\n        <IconButton key={'action-'+icon} onClick={() => this.props.onChange(x.onCall())}>\n          <Icon.Random/>\n        </IconButton>\n      )\n    }\n    if (label) {\n      return (\n        <Button\n          key={'action-'+label}\n          variant=\"outlined\"\n          size=\"small\"\n          onClick={() => this.props.onChange(x.onCall())}\n        >{x.label}</Button>\n      )\n    }\n  }\n\n  renderControl(x: ControlProps) {\n    if (x.type === ControlType.Number) {\n      return this.renderNumberIncrementer(x);\n    }\n    if (x.type === ControlType.Complex) {\n      return this.renderComplexIncrementer(x);\n    }\n    if (x.type === ControlType.Call) {\n      return this.renderCall(x);\n    }\n    return null;\n  }\n\n\n  render() {\n    return (\n      <>\n        {this.props.controls.map(x => this.renderControl(x))}\n      </>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({\n    controls: [...fractal(state.fractal.algorithm).controls],\n    params: {...state.fractal.algorithm.params},\n  }),\n  (dispatch: Dispatch) => ({\n    onChange: (x: Params) => {\n      dispatch(updateParams(x));\n      dispatch(redraw());\n    },\n  })\n)(ParamControls)","import { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types';\nimport { updateParams } from '../../store/fractal/algorithm/actions';\nimport { ControlType, ControlNumber } from '../../fractals/algorithm/types';\nimport { redraw } from '../../store/ui/actions';\nimport { NumberIncrementer}  from '../../components';\n\nexport default connect(\n  (state: State) => ({\n    value: state.fractal.algorithm.params.iterations,\n    controlProps: {\n      type: ControlType.Number,\n      param: 'iterations',\n      label: 'iterations',\n      step: 2,\n      min: 0,\n    } as ControlNumber\n  }),\n  (dispatch: Dispatch) => ({\n    onChange: (iterations: number) => {\n      dispatch(updateParams({iterations}));\n      dispatch(redraw());\n    }\n  })\n)(NumberIncrementer)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State } from '../../store/types'; \nimport { Nav } from '../../store/ui/types';\nimport Zoom from './Zoom';\nimport ParamControls from './ParamControls';\nimport Iterator from './Iterator';\nimport ControlPanel from './ControlPanel';\n\ntype Props = {\n  nav: Nav,\n}\n\nclass Controls extends React.Component<Props> {\n\n  render() {\n    return (\n      <>\n        <ControlPanel visible={this.props.nav === Nav.Params}>\n          <ParamControls/>\n        </ControlPanel>\n        <ControlPanel visible={this.props.nav === Nav.Explore}>\n          <Iterator fontSize=\"large\"/>\n          <Zoom factor={2} fontSize=\"large\" label=\"Zoom\"/>\n        </ControlPanel>\n      </>\n    )\n  }\n}\n\nexport default connect(\n  (state: State) => ({nav: state.ui.nav}),\n)(Controls)","import Controls from './Controls';\n\nexport default Controls;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../../store/types';\nimport { Nav } from '../../store/ui/types';\nimport { State as GalleryState } from '../../store/gallery/types';\nimport { deleteImage } from '../../store/gallery/actions';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Box from '@material-ui/core/Box';\nimport { Icon } from '../../components';\nimport IconButton from '@material-ui/core/IconButton';\nimport Popover from '@material-ui/core/Popover';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\n\nconst StyledGridList = withStyles({\n  root: {\n    padding: '3px',\n    paddingTop: '20px',\n  },\n})(GridList)\n\nconst StyledGridListTile = withStyles({\n  root: {\n    maxWidth: '200px',\n    maxHeight: '200px',\n    margin: '1mm',\n  },\n  tile: {\n    width: '200px',\n    height: '200px',\n  },\n})(GridListTile);\n\nconst StyledIconButton = withStyles({\n  root: {\n    color: 'rgba(255,255,255,0.5)',\n    '& :hover': {\n      color: 'rgba(255,255,255,1)',\n    }\n  }\n})(IconButton)\n\n\nfunction ImageTile(props: {\n  title: string, \n  url: string,\n  onView: () => void,\n  onDelete: () => void,\n}) {\n  return (\n    <StyledGridListTile key={props.title} cols={1}>\n      <img \n        src={props.url}\n        alt={props.title} \n        style={{objectFit: 'cover'}}/>\n      <GridListTileBar\n        //title={<TypographyWithMath data={props.title}/>}\n        actionIcon={\n          <>\n          <StyledIconButton onClick={props.onDelete}>\n            <Icon.Delete/>\n          </StyledIconButton>\n          <StyledIconButton onClick={props.onView}>\n            <Icon.ViewImage/>\n          </StyledIconButton>\n          </>\n        }\n      />\n    </StyledGridListTile>\n  )\n}\n\n\ninterface Props {\n  images: GalleryState\n  visible: boolean\n  deleteImage: (url: string | null) => void\n}\n\n\nclass Gallery extends React.Component<Props> {\n  state: {\n    viewURL: string | null\n    deleteURL: string | null\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      viewURL: null,\n      deleteURL: null\n    };\n  }\n\n  closePopup = () => {\n    this.setState({viewURL: null, deleteURL: null});\n  }\n\n  delete = () => {\n    this.props.deleteImage(this.state.deleteURL);\n    this.setState({deleteURL: null})\n  }\n\n  viewer = (img: string) => () => {\n    this.setState({viewURL: img});\n  }\n\n  deleter = (img: string) => () => {\n    this.setState({deleteURL: img});\n  }\n\n  render() {\n\n    return (\n      <>\n      <StyledGridList \n        cellHeight={180} \n        style={this.props.visible ? {} : {display: 'none'}}\n      >\n        {this.props.images.map((tile, index) => {\n          return React.createElement(ImageTile, {\n            ...tile,\n            key: tile.url,\n            onView: this.viewer(tile.url),\n            onDelete: this.deleter(tile.url),\n          });\n        })}\n      </StyledGridList>\n      <Popover\n        style={{overflow: 'hidden'}}\n        open={this.state.viewURL !== null}\n        onClick={this.closePopup}\n        onClose={this.closePopup}>\n        <div style={{width: '100%', height: '100%', overflow: 'scroll'}}>\n          <img \n            alt=\"fractal\"\n            src={this.state.viewURL || ''}\n            style={{objectFit: 'contain'}}/>\n        </div>\n      </Popover>\n      <Popover\n        open={this.state.deleteURL !== null}\n        onClose={this.closePopup}\n      >\n        <Box m={2}>\n          <Typography>Delete this image?</Typography>\n          <ButtonGroup color=\"primary\" variant=\"outlined\">\n            <Button onClick={this.delete}>Yes</Button>\n            <Button onClick={this.closePopup}>No</Button>\n          </ButtonGroup>\n        </Box>\n      </Popover>\n\n      </>\n    )\n  }\n}\n\n\nexport default connect(\n  (state: State) => ({\n    visible: state.ui.nav === Nav.Gallery,\n    images: state.gallery,\n  }),\n  (dispatch: Dispatch) => ({\n    deleteImage: (url: string | null) => {\n      if (url) dispatch(deleteImage(url));\n    }\n  })\n)(Gallery)","import Gallery from './Gallery';\n\nexport default Gallery;","import React from 'react'\nimport Canvas from './Canvas';\nimport Capture from './Capture';\nimport Controls from './Controls';\nimport Box from '@material-ui/core/Box';\nimport Gallery from './Gallery';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'absolute',\n    overflow: 'clip',\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n    top: '50px',\n    bottom: '55px',\n    width: '100%',\n    //paddingTop: '50px'\n  }\n});\n\nexport default function Display() {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.root}>\n      <Canvas/>\n      <Capture/>\n      <Gallery/>\n      <Controls/>\n    </Box>\n  )\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State as AppState, Dispatch } from '../../store/types';\nimport { setModal } from '../../store/ui/actions';\nimport { Modal } from '../../store/ui/types';\nimport { TypographyWithMath } from '../../components';\nimport Button, { ButtonProps } from '@material-ui/core/Button';\nimport { withStyles } from '@material-ui/core/styles';\nimport { fractal } from '../../fractals';\n\n\nconst KatexButton = withStyles({\n  label: {textTransform: 'none'},\n})(Button)\n\nconst InfoButton = ({formula, ...rest}: {\n  formula: string | {math: string} | (string | {math: string})[]\n} & ButtonProps) => (\n  <KatexButton {...rest}>\n    <TypographyWithMath data={formula}/>\n  </KatexButton>\n)\n\nexport default connect(\n  (state: AppState) => {\n    const formula = fractal(state.fractal.algorithm).label;\n    return {\n      disabled: state.ui.modal === Modal.Info,\n      formula,\n    }\n  },\n  (dispatch: Dispatch) => ({\n    onClick: () => dispatch(setModal(Modal.Info))\n  })\n)(InfoButton)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from '../../store/types';\nimport { redraw } from '../../store/ui/actions';\nimport { recenter } from '../../store/fractal/view/actions';\nimport Button, { ButtonProps } from '@material-ui/core/Button';\nimport { Icon } from '../../components';\n\n\n\nconst RecenterButton = (props: ButtonProps) => (\n  <Button startIcon={<Icon.Recenter/>} {...props}>\n    Recenter\n  </Button>\n)\n\nexport default connect(\n  null,\n  (dispatch: Dispatch) => ({\n    onClick: () => {\n      dispatch(recenter());\n      dispatch(redraw());\n    }\n  }),\n)(RecenterButton)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State, Dispatch } from '../store/types';\nimport { setModal } from '../store/ui/actions';\nimport { Modal, Nav } from '../store/ui/types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Icon } from '../components'\nimport InfoButton from './Controls/InfoButton';\nimport RecenterButton from './Controls/Recenter';\nimport Typography from '@material-ui/core/Typography';\n\n\nconst TopBar = (props: {\n  nav: Nav,\n  disableMenu: boolean,\n  openMenu: () => void,\n}) => {\n  const isGallery = props.nav === Nav.Gallery;\n  return (\n    <AppBar position=\"static\" elevation={0}>\n      <Toolbar style={{justifyContent: 'space-between'}}>\n        <IconButton onClick={props.openMenu} edge=\"start\">\n          <Icon.Menu/>\n        </IconButton>\n        <InfoButton\n          style={isGallery ? {display: 'none'} : {}}\n        />\n        <Typography\n          style={isGallery ? {} : {display: 'none'}}\n        >Saved Fractals</Typography>\n        <RecenterButton />\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nexport default connect(\n  (state: State) => ({\n    nav: state.ui.nav,\n    disableMenu: state.ui.modal === Modal.Menu,\n  }),\n  (dispatch: Dispatch) => ({\n    openMenu: () => dispatch(setModal(Modal.Menu)),\n  }),\n)(TopBar);","import React from 'react';\nimport { connect } from 'react-redux';\nimport Katex from '../components/Katex';\nimport { State as AppState, Dispatch } from '../store/types';\nimport { setModal } from '../store/ui/actions';\nimport { Modal } from '../store/ui/types';\nimport { State as AlgorithmState } from '../store/fractal/algorithm/types';\nimport { TypographyWithMath } from '../components';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport { fractal } from '../fractals';\nimport { withStyles, createStyles, WithStyles, Theme } from '@material-ui/core/styles';\n\n\nconst styles = createStyles((theme: Theme) => ({\n  text: {\n    fontSize: '1em',\n  }\n}))\n\n\nfunction rounder(p: number) {\n  const d = Math.pow(10, p);\n  return (n: number) => Math.round(n * d) / d;\n}\n\nfunction science(n: number, p: number=4) {\n  const a = n.toPrecision(4);\n  const b = a.split('e')\n  if (b.length === 1) {\n    return a;\n  } else {\n    return b[0] + '\\\\times 10^{' + b[1] + '}'\n  }\n}\n\ninterface Props {\n  visible: boolean\n  anchorEl?: HTMLElement\n  onClose: () => void\n  cx: number\n  cy: number\n  rx: number\n  ry: number\n  algorithm: AlgorithmState<object>\n}\n\ninterface PP extends Props, WithStyles<typeof styles> {}\n\n\nconst FractalInfo = (props: PP) => {\n\n  const {algorithm} = props;\n  const fractalinfo = fractal(algorithm).describe;\n\n  const round = rounder(3-Math.floor(Math.log10(props.rx)))\n\n  const cx = round(props.cx)\n  const cy = round(props.cy)\n\n  const rx = science(Math.abs(props.rx))\n  const ry = science(Math.abs(props.ry))\n\n  const centerx = 'x_c = ' + cx\n  const centery = 'y_c = ' + cy\n  const domainx = '|x - x_c| \\\\leq ' + rx \n  const domainy = '|y - y_c| \\\\leq ' + ry \n\n  const classes = props.classes as {text: string};\n\n  return (\n    <Popover\n      open={props.visible}\n      onClose={props.onClose}\n      marginThreshold={10}\n    >\n      <Paper >\n        <Box p={2} onClick={props.onClose}>\n          <TypographyWithMath data={fractalinfo} className={classes.text}/>\n          <Typography style={{marginTop: '1em'}} className={classes.text}>\n            The currently displayed portion of this fractal is centered\n            at <Katex math=\"(x_c, y_c)\"/>, where\n          </Typography>\n          <Katex math={centerx + '\\\\text{ and }' + centery} displayMode={true} className={classes.text}/>\n          <Typography className={classes.text}>\n            and plotted over <Katex math=\"(x, y)\"/> such that \n          </Typography>\n          <Katex math={domainx + '\\\\text{ and }' + domainy} displayMode={true} className={classes.text}/>\n        </Box>\n      </Paper>\n    </Popover>\n  )\n}\n\nexport default connect(\n  (state: AppState) => {\n    const {cx, cy, ppu, w, h} = state.fractal.view;\n    const rx = w/ppu/2, ry = h/ppu/2;\n    return {\n      visible: state.ui.modal === Modal.Info,\n      cx: cx,\n      cy: cy,\n      rx: rx,\n      ry: ry,\n      algorithm: state.fractal.algorithm,\n    }\n  },\n  (dispatch: Dispatch) => ({\n    onClose: () => dispatch(setModal(Modal.None))\n  })\n)(withStyles(styles)(FractalInfo))","import React from 'react';\nimport { connect } from 'react-redux';\nimport { State } from '../store/types';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Modal from '@material-ui/core/Modal';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  typography: {\n    color: 'white',\n  },\n  progress: {\n    outline: 'none',\n  }\n})\n\ninterface Props {\n  open: boolean\n}\n\nfunction Waiting({open}: Props) {\n  const classes = useStyles();\n  return (\n    <Modal open={open} className={classes.root}>\n      <>\n      <CircularProgress className={classes.progress}/>\n      <Typography className={classes.typography}>Rendering Image</Typography>\n      </>\n    </Modal>\n  )\n}\n\nexport default connect(\n  (state: State) => ({open: state.ui.waiting}),\n)(Waiting);","import React from 'react';\nimport BottomBar from './Bottombar';\nimport Settings from './Settings';\nimport Display from './Display';\nimport TopBar from './TopBar';\nimport Info from './Info';\nimport Waiting from './Waiting';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\n\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    height: '100%',\n    flexDirection: 'column',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    position: 'absolute',\n    overflow: 'hidden',\n    justifyContent: 'space-between',\n  }\n}))\n\n\nexport default function App() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Waiting/>\n      <Display/>\n      <TopBar />\n      <Settings />\n      <Info />\n      <BottomBar />\n    </div>\n  )\n}","import React from 'react';\nimport { Provider } from 'react-redux';\nimport Theme from './Theme';\nimport { Store } from 'redux';\nimport App from './App';\nimport { State as AppState, Action as AppAction } from '../store/types';\n\ntype Props = {\n  store: Store<Partial<AppState>, AppAction>\n}\n\nexport default class Root extends React.Component<Props> {\n  render() {\n    const { store } = this.props;\n    return (\n      <Provider store={store}>\n        <Theme>\n          <App/>\n        </Theme>\n      </Provider>\n    )\n  }\n}\n","import {\n  State,\n  Action,\n  SET_FRACTAL,\n  UPDATE,\n  UPDATE_PARAMS,\n} from './types';\nimport { method, methodName } from '../../../defaults';\n\nconst initialState = {\n  methodName,\n  method,\n  params: method.newParams()\n}\n\nexport default function<T>(state: State<any>=initialState, action: Action<T>) {\n  switch (action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    case SET_FRACTAL:\n      return {\n        methodName: action.payload.methodName,\n        method: action.payload.method, \n        params: action.payload.params ? action.payload.params : action.payload.method.newParams(),\n      } as State<T>\n    case UPDATE_PARAMS:\n      return {...state, params: {...state.params, ...action.payload}} as typeof state\n    default:\n      return state\n  }\n}","import { COLORSCHEMES } from '../../../fractals/color';\nimport {\n  State,\n  Action,\n  UPDATE,\n} from './types';\nimport { colorSchemeName } from '../../../defaults';\n\nconst initialState: State = {\n  schemeName: colorSchemeName,\n  scheme: COLORSCHEMES[colorSchemeName],\n  reverse: false,\n  skew: 0,\n}\n\nexport default function(state: State=initialState, action: Action) {\n  switch(action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    default:\n      return state;\n  }\n}","import {\n  State,\n  Action,\n  UPDATE,\n  RECENTER,\n  ZOOM_IN,\n  ZOOM_OUT,\n} from './types';\nimport { pixelCount, canvasSize } from '../../../defaults';\n\nconst initialState: State = {\n  ...canvasSize,\n  cx: 0, \n  cy: 0,\n  ppu: 256,\n  pixelCount,\n}\n\nfunction recenter({w, h}: {w: number, h: number}) {\n  return {cx: 0, cy: 0, ppu: Math.round(Math.min(h,w)/5)}\n}\n\nexport default function(state: State={...initialState, ...recenter(initialState)}, action: Action) {\n  switch(action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    case RECENTER:\n      return {...state, ...recenter(state)}\n    case ZOOM_IN:\n      return {...state, ppu: state.ppu * action.payload}\n    case ZOOM_OUT:\n      return {...state, ppu: Math.round(state.ppu / action.payload)}\n    default:\n      return state;\n  }\n}","import algorithm from './algorithm/reducer';\nimport color from './color/reducer';\nimport view from './view/reducer';\nimport { combineReducers } from 'redux';\n\nexport default combineReducers({\n  algorithm,\n  color,\n  view,\n})","import {\n  State,\n  Nav,\n  Modal,\n  StretchMode,\n  CanvasAction,\n  SET_NAV,\n  SET_MODAL,\n  SET_STRETCH,\n  SET_CANVAS_ACTION,\n  UPDATE,\n  ADD_COLOR_SCHEME,\n} from './types';\nimport { Action } from '../types';\nimport { ADD_TO_GALLERY } from '../gallery/types';\nimport { ALLFRACTALS } from '../../fractals/algorithm';\nimport { COLORSCHEMES } from '../../fractals/color';\n\n\nconst initialState: State = ({\n  nav: Nav.Explore,\n  modal: Modal.None,\n  canvasAction: CanvasAction.None,\n  canvasStretch: StretchMode.Contain,\n  galleryBadge: 0,\n  methodList: ALLFRACTALS,\n  colorSchemeList: COLORSCHEMES,\n  waiting: false,\n});\n\n\nexport default function(state: State=initialState, action: Action) {\n  switch(action.type) {\n    case UPDATE:\n      return {...state, ...action.payload}\n    case SET_NAV:\n      if (action.payload === Nav.Gallery) {\n        return {...state, nav: action.payload, galleryBadge: 0}\n      } else {\n        return {...state, nav: action.payload}\n      }\n    case SET_MODAL:\n      return {...state, modal: action.payload}\n    case SET_CANVAS_ACTION:\n      if (state.nav === Nav.Capture && (action.payload === CanvasAction.Draw || action.payload === CanvasAction.Color)) {\n        return {...state, canvasAction: action.payload, nav: Nav.Explore}\n      } else {\n        return {...state, canvasAction: action.payload}\n      }\n    case SET_STRETCH:\n      return {...state, canvasStretch: action.payload}\n    case ADD_COLOR_SCHEME:\n      return {\n        ...state, \n        colorSchemeList: {\n          ...state.colorSchemeList,\n          [action.payload.name]: action.payload.scheme,\n        },\n      }\n    case ADD_TO_GALLERY:\n      return {...state, galleryBadge: state.galleryBadge+1}\n    default:\n      return state\n  }\n}","import {\n  State,\n  Action,\n  ADD_TO_GALLERY,\n  DELETE_IMAGE,\n} from './types'\n\nconst initialState: State = [];\n\nexport default function(state: State=initialState, action: Action) {\n  switch(action.type) {\n    case ADD_TO_GALLERY:\n      return [...state, action.payload];\n    case DELETE_IMAGE:\n      URL.revokeObjectURL(action.payload)\n      return state.filter(v => v.url !== action.payload);\n    default:\n      return state\n  }\n}","import { combineReducers } from 'redux';\nimport fractal from './fractal/reducer';\nimport ui from './ui/reducer';\nimport gallery from './gallery/reducer';\n\nexport default combineReducers({\n  fractal,\n  ui,\n  gallery,\n});","import { createStore } from 'redux';\nimport reducer from './reducer';\n\nexport default createStore(reducer);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Root from './containers/Root';\nimport store from './store';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root store={store} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.register();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Outer\":\"Canvas_Outer__3WApH\",\"Canvas\":\"Canvas_Canvas__2ENmD\",\"Stretch\":\"Canvas_Stretch__2sMXG\"};"],"sourceRoot":""}