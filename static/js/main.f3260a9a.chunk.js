(this["webpackJsonpfractal-explorer"]=this["webpackJsonpfractal-explorer"]||[]).push([[0],{133:function(e){e.exports=JSON.parse('{"a":"0.4.4"}')},167:function(e,t,n){e.exports=n(180)},179:function(e,t,n){},180:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"AddAPhoto",(function(){return F.a})),n.d(a,"Back",(function(){return J.a})),n.d(a,"Capture",(function(){return W.a})),n.d(a,"Code",(function(){return Y.a})),n.d(a,"Copy",(function(){return $.a})),n.d(a,"Delete",(function(){return X.a})),n.d(a,"Explore",(function(){return Q.a})),n.d(a,"FullResolution",(function(){return te.a})),n.d(a,"Functions",(function(){return ae.a})),n.d(a,"Gallery",(function(){return oe.a})),n.d(a,"Help",(function(){return ce.a})),n.d(a,"Link",(function(){return ue.a})),n.d(a,"Menu",(function(){return pe.a})),n.d(a,"Minus",(function(){return he.a})),n.d(a,"Palette",(function(){return de.a})),n.d(a,"Plus",(function(){return be.a})),n.d(a,"Random",(function(){return ye.a})),n.d(a,"Recenter",(function(){return Oe.a})),n.d(a,"RotateLeft",(function(){return we.a})),n.d(a,"RotateRight",(function(){return ke.a})),n.d(a,"Save",(function(){return Ne.a})),n.d(a,"Settings",(function(){return Se.a})),n.d(a,"SwapHoriz",(function(){return Ae.a})),n.d(a,"Tune",(function(){return Ie.a})),n.d(a,"Upload",(function(){return _e.a})),n.d(a,"View",(function(){return Le.a})),n.d(a,"ViewImage",(function(){return Ue.a})),n.d(a,"ZoomIn",(function(){return Fe.a})),n.d(a,"ZoomOut",(function(){return Je.a}));var r={};n.r(r),n.d(r,"PI",(function(){return bt})),n.d(r,"TAU",(function(){return gt})),n.d(r,"abs",(function(){return yt})),n.d(r,"asin",(function(){return Et})),n.d(r,"atan2",(function(){return Ot})),n.d(r,"cos",(function(){return St})),n.d(r,"exp",(function(){return Ct})),n.d(r,"floor",(function(){return wt})),n.d(r,"pow",(function(){return xt})),n.d(r,"random",(function(){return kt})),n.d(r,"round",(function(){return jt})),n.d(r,"sin",(function(){return Nt})),n.d(r,"sqrt",(function(){return Rt}));var o=n(0),i=n.n(o),c=n(20),l=n.n(c),u=n(9),s=n(8),p=n(12),m=n(13),h=n(15),f=n(14),d=n(6),v=n(225),b=n(137),g=n(227),y=n(76),E=n(75),O=n(229),C=n(230),w=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.state={type:"detect"===n.props.type?"light":n.props.type},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"setDark",value:function(e){this.setState({type:e?"dark":"light"})}},{key:"componentDidMount",value:function(){var e=this;"detect"===this.props.type&&(this.setDark(window.matchMedia("(prefers-color-scheme:dark)").matches),window.matchMedia("(prefers-color-scheme:dark)").addListener((function(t){e.setDark(t.matches)})))}},{key:"render",value:function(){var e=Object(d.a)({},this.props.theme,{palette:Object(d.a)({},this.props.theme.palette,{},this.state,{},"dark"===this.state.type?this.props.darkPalette:this.props.lightPalette)});return i.a.createElement(v.a,{theme:Object(b.a)(e)},i.a.createElement(g.a,null),this.props.children)}}]),t}(i.a.Component);w.defaultProps={type:"detect",lightPalette:{primary:y.a,secondary:E.a},darkPalette:{primary:O.a,secondary:C.a},theme:{props:{MuiAppBar:{color:"inherit"},MuiBackdrop:{invisible:!0},MuiTextField:{variant:"outlined",size:"small",fullWidth:!0,margin:"normal"}}}};var x,k,j,N,R=w,S=n(2),P="UI_UPDATE";!function(e){e[e.Params=0]="Params",e[e.Explore=1]="Explore",e[e.Capture=2]="Capture",e[e.Gallery=3]="Gallery"}(x||(x={})),function(e){e[e.None=0]="None",e[e.Menu=1]="Menu",e[e.Info=2]="Info",e[e.FullResolution=3]="FullResolution"}(k||(k={})),function(e){e[e.None=0]="None",e[e.Contain=1]="Contain",e[e.Cover=2]="Cover"}(j||(j={})),function(e){e[e.None=0]="None",e[e.Draw=1]="Draw",e[e.Color=2]="Color",e[e.Capture=3]="Capture"}(N||(N={}));var A=function(e){return{type:"UI_SET_MODAL",payload:e}},M=function(e){return{type:"UI_SET_NAV",payload:e}},I=function(){return{type:"UI_SET_CANVAS_ACTION",payload:N.Draw}},D=function(){return{type:P,payload:{canvasAction:N.None,waiting:!1}}},_=n(239),z=n(240),L=n(241),T=n(259),U=n(4),B=n(99),F=n.n(B),G=n(102),J=n.n(G),V=n(103),W=n.n(V),H=n(104),Y=n.n(H),Z=n(105),$=n.n(Z),q=n(106),X=n.n(q),K=n(107),Q=n.n(K),ee=n(108),te=n.n(ee),ne=n(109),ae=n.n(ne),re=n(110),oe=n.n(re),ie=n(111),ce=n.n(ie),le=n(112),ue=n.n(le),se=n(113),pe=n.n(se),me=n(114),he=n.n(me),fe=n(115),de=n.n(fe),ve=n(116),be=n.n(ve),ge=n(117),ye=n.n(ge),Ee=n(118),Oe=n.n(Ee),Ce=n(119),we=n.n(Ce),xe=n(120),ke=n.n(xe),je=n(121),Ne=n.n(je),Re=n(122),Se=n.n(Re),Pe=n(123),Ae=n.n(Pe),Me=n(124),Ie=n.n(Me),De=n(125),_e=n.n(De),ze=n(126),Le=n.n(ze),Te=n(127),Ue=n.n(Te),Be=n(128),Fe=n.n(Be),Ge=n(129),Je=n.n(Ge),Ve=n(234),We=n(256),He=n(10),Ye=n(132),Ze=n.n(Ye),$e=(n(178),Object(T.a)({root:{whiteSpace:"nowrap"}})),qe=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).ref=void 0,n.ref=i.a.createRef(),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"renderMath",value:function(){this.ref.current&&Ze.a.render(this.props.math,this.ref.current,{displayMode:this.props.displayMode})}},{key:"componentDidMount",value:function(){this.renderMath()}},{key:"componentDidUpdate",value:function(){this.renderMath()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className;return i.a.createElement("span",{ref:this.ref,className:n?t.root+" "+n:t.root})}}]),t}(i.a.PureComponent),Xe=Object(U.a)($e)(qe),Ke=n(54),Qe=function(e){return"string"===typeof e?e:i.a.createElement(Xe,e)},et=function(e){var t=e.data,n=Object(S.a)(e,["data"]);return Array.isArray(t)?i.a.createElement.apply(i.a,[Ke.a,n].concat(Object(He.a)(t.map(Qe)))):"string"===typeof t?i.a.createElement(Ke.a,n,t):i.a.createElement(Ke.a,n,i.a.createElement(Xe,t))},tt=Object(U.a)((function(e){return{root:{width:"200px"}}}))(We.a),nt=Object(U.a)((function(e){return{root:{padding:"0.5em"}}}))(Ve.a),at=Object(U.a)((function(e){return{root:{fontSize:"0.8em"}}}))(et),rt=n(255),ot=n(183),it=n(236),ct=n(261),lt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.changeName=function(e){var t=e.target.value;n.setState({name:t})},n.changeNum=function(e){return n.setNum(+e.target.value)},n.changeColor=function(e){return function(t){var a=Object(He.a)(n.state.colors);a[e]=t.target.value,n.setState({colors:a})}},n.addColor=function(){return n.setNum(n.state.num+1)},n.removeColor=function(){return n.setNum(n.state.num-1)},n.save=function(){n.props.onSave(n.state.name,n.state.colors),n.props.onClose()},n.validName=function(){return""!==n.state.name&&(n.props.takenNames.forEach((function(e){if(e.toLowerCase()===n.state.name.toLowerCase())return!1})),!0)},n.state={name:"",num:2,colors:["#FF0055","#0055FF"]},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"setNum",value:function(e){var t=Math.max(2,e),n=Object(He.a)(this.state.colors);if(t>n.length)for(var a=n[n.length-1];n.length<t;)n.push(a);else n=n.slice(0,t);this.setState({num:t,colors:n})}},{key:"renderColorInput",value:function(e){return e<this.state.colors.length?i.a.createElement(it.a,{item:!0,xs:1},i.a.createElement("input",{type:"color",value:this.state.colors[e],onChange:this.changeColor(e),style:{width:"40px",borderRadius:0,padding:0}})):null}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ct.a,null,"New Colorscheme"),i.a.createElement(rt.a,null,i.a.createElement(We.a,{label:"Name",variant:"filled",value:this.state.name,onChange:this.changeName,inputProps:{type:"text"}})),i.a.createElement(rt.a,{p:1},i.a.createElement(mn,{style:{width:"100%",height:"4mm"},scheme:this.state.colors,reverse:!1,skew:0,width:100,height:10})),i.a.createElement(rt.a,null,i.a.createElement(it.a,{container:!0},this.state.colors.map((function(t,n){return i.a.createElement(rt.a,{m:.5},e.renderColorInput(n))}))),i.a.createElement(rt.a,{m:1},i.a.createElement(mt,{variant:"contained",style:{alignSelf:"center"},onDown:this.removeColor,disableDown:this.state.colors.length<3,onUp:this.addColor})),i.a.createElement(rt.a,null,i.a.createElement(ot.a,{fullWidth:!0,color:"primary",disabled:!this.validName(),onClick:this.save},"Save"))))}}]),t}(i.a.Component);lt.defaultProps={takenNames:[]};var ut=lt,st=n(237),pt=n(238),mt=Object(U.a)((function(e){var t=e.palette;return Object(T.a)({container:{position:"relative",marginTop:"5px",marginBottom:"5px"},label:{textAlign:"center",position:"absolute",bottom:"-5px",width:"100%",userSelect:"none",color:t.text.secondary},value:{textAlign:"center",position:"absolute",top:"-5px",width:"100%",userSelect:"none",color:t.text.secondary}})}))((function(e){var t=e.label,n=e.value,a=e.classes,r=e.onUp,o=e.onDown,c=e.fontSize,l=e.disableUp,u=e.disableDown,s=e.downIcon,p=void 0===s?he.a:s,m=e.upIcon,h=void 0===m?be.a:m,f=Object(S.a)(e,["label","value","classes","onUp","onDown","fontSize","disableUp","disableDown","downIcon","upIcon"]);return i.a.createElement(rt.a,{className:a.container},t?i.a.createElement(Ke.a,{variant:"caption",className:a.label},t):null,n?i.a.createElement(Ke.a,{variant:"caption",className:a.value},n):null,i.a.createElement(st.a,f,i.a.createElement(pt.a,{onClick:o,disabled:u},i.a.createElement(p,{fontSize:c})),i.a.createElement(pt.a,{onClick:r,disabled:l},i.a.createElement(h,{fontSize:c}))))})),ht=n(29);function ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sign,a=t.fixed,r=void 0===a?4:a;return!n||e<0?r?(+e.toFixed(r)).toString():e.toString():"+"+ft(e,{fixed:r})}function dt(e){var t=Object(ht.a)(e,2),n=t[0],a=t[1],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ft(n,r)+ft(a,Object(d.a)({},r,{sign:!0}))+"i"}var vt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onClickDown=function(){n.setValue(n.incrementDown())},n.onClickUp=function(){n.setValue(n.incrementUp())},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"setValue",value:function(e){this.props.onChange(e)}},{key:"incrementDown",value:function(){var e=this.props.controlProps,t=e.min,n=e.step,a=this.props.value-n;return void 0!==t?Math.max(t,a):a}},{key:"incrementUp",value:function(){var e=this.props.controlProps,t=e.max,n=e.step,a=this.props.value+n;return void 0!==t?Math.min(t,a):a}},{key:"render",value:function(){var e=this.props,t=e.controlProps,n=(e.params,e.onChange,Object(S.a)(e,["controlProps","params","onChange"]));return i.a.createElement(mt,Object.assign({},n,{value:ft(this.props.value),label:t.label,onDown:this.onClickDown,onUp:this.onClickUp}))}}]),t}(i.a.Component),bt=Math.PI,gt=2*bt,yt=Math.abs,Et=Math.asin,Ot=Math.atan2,Ct=Math.exp,wt=Math.floor,xt=Math.pow,kt=Math.random,jt=Math.round,Nt=Math.sin,Rt=Math.sqrt,St=Math.cos;function Pt(e,t){return{angle:e.angle*t,radius:xt(e.radius,t)}}function At(e,t){return{re:e,im:t}}function Mt(e){var t=e.angle,n=e.radius;return{re:n*St(t),im:n*Nt(t)}}function It(e){return{angle:Ot(e.im,e.re),radius:Rt(e.re*e.re+e.im*e.im)}}function Dt(e,t){return{re:e.re+t.re,im:e.im+t.im}}function _t(e,t){return{re:e.re+t,im:e.im}}function zt(e,t){return Dt(e,Mt(t))}function Lt(e,t){return{re:e.re-t.re,im:e.im-t.im}}function Tt(e,t){return{re:e.re*t.re-e.im*t.im,im:e.re*t.im+e.im*t.re}}function Ut(e,t){return{re:t*e.re,im:t*e.im}}function Bt(e,t){var n=Qt(t);return{re:(e.re*t.re+e.im*t.im)/n,im:(e.im*t.re-e.re*t.im)/n}}function Ft(e){return Mt({radius:Ct(e.re),angle:e.im})}function Gt(e,t){return Mt(Pt(It(e),t))}function Jt(e,t){return t<0?Bt(At(1,0),Jt(e,-t)):0===t?At(1,0):1===t?e:2===t?Tt(e,e):3===t?Tt(Tt(e,e),e):4===t?Tt(Tt(Tt(e,e),e),e):5===t?Tt(Tt(Tt(Tt(e,e),e),e),e):6===t?Tt(Tt(Tt(Tt(Tt(e,e),e),e),e),e):7===t?Tt(Tt(Tt(Tt(Tt(Tt(e,e),e),e),e),e),e):8===t?Tt(Tt(Tt(Tt(Tt(Tt(Tt(e,e),e),e),e),e),e),e):Gt(e,t)}function Vt(e,t){return Jt(e,t)}var Wt=function(e){return Tt(e,e)},Ht=function(e){return Tt(Tt(e,e),e)},Yt=function(e){return Tt(Tt(Tt(e,e),e),e)},Zt=function(e){return Tt(Tt(Tt(Tt(e,e),e),e),e)},$t=function(e){return Tt(Tt(Tt(Tt(Tt(e,e),e),e),e),e)},qt=function(e){return Tt(Tt(Tt(Tt(Tt(Tt(e,e),e),e),e),e),e)},Xt=function(e){return Wt(Wt(Wt(e)))};function Kt(e){if(e<0){var t=Kt(-e);return function(e){return Bt(At(1,0),t(e))}}if(0===e)return function(e){return At(1,0)};if(1===e)return function(e){return e};if(2===e)return Wt;if(3===e)return Ht;if(4===e)return Yt;if(5===e)return Zt;if(6===e)return $t;if(7===e)return qt;if(8===e)return Xt;if(e%1===0){if(e%2===0){var n=Kt(e/2);return function(e){return Wt(n(e))}}var a=Kt((e-1)/2);return function(e){return Tt(e,Wt(a(e)))}}return function(t){return Gt(t,e)}}function Qt(e){return e.re*e.re+e.im*e.im}function en(e){return Rt(Qt(e))}var tn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onAngleDown=function(){n.setValue(n.angleDown())},n.onAngleUp=function(){n.setValue(n.angleUp())},n.onRadiusDown=function(){n.setValue(n.radiusDown())},n.onRadiusUp=function(){n.setValue(n.radiusUp())},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"setValue",value:function(e){this.props.onChange(e)}},{key:"toPolar",value:function(){return It(At(this.props.value[0],this.props.value[1]))}},{key:"fromPolar",value:function(e){var t=Mt(e);return[t.re,t.im]}},{key:"radiusDown",value:function(){var e=this.props.controlProps.stepRadius,t=this.toPolar();return this.fromPolar(Object(d.a)({},t,{radius:t.radius-e}))}},{key:"radiusUp",value:function(){var e=this.props.controlProps.stepRadius,t=this.toPolar();return this.fromPolar(Object(d.a)({},t,{radius:t.radius+e}))}},{key:"angleDown",value:function(){var e=this.props.controlProps.stepAngle,t=this.toPolar();return this.fromPolar(Object(d.a)({},t,{angle:t.angle-e}))}},{key:"angleUp",value:function(){var e=this.props.controlProps.stepAngle,t=this.toPolar();return this.fromPolar(Object(d.a)({},t,{angle:t.angle+e}))}},{key:"render",value:function(){var e=this.props,t=e.controlProps,n=(e.onChange,Object(S.a)(e,["controlProps","onChange"])),r=this.toPolar();return i.a.createElement(i.a.Fragment,null,i.a.createElement(mt,Object.assign({},n,{value:ft(r.angle),label:t.label+": angle",onDown:this.onAngleDown,onUp:this.onAngleUp,downIcon:a.RotateRight,upIcon:a.RotateLeft})),i.a.createElement(mt,Object.assign({},n,{value:ft(r.radius),label:t.label+": radius",onDown:this.onRadiusDown,onUp:this.onRadiusUp})))}}]),t}(i.a.Component),nn=Object(T.a)((function(e){return{root:{height:"100%"}}})),an=Object(U.a)(nn)(rt.a),rn=n(11);function on(e){var t=Array.isArray(e.scheme)?Object(rn.L)(rn.k,e.scheme):e.scheme,n=e.reverse?[1,0]:[0,1],a=Math.pow(2,e.skew);return function(e){var r=Object(rn.M)().domain(e).range(n).exponent(a);return function(e){return t(r(e))}}}var cn={Cool:rn.e,Cubehelix:rn.f,Greys:rn.i,Inferno:rn.j,Magma:rn.l,Plasma:rn.q,Rainbow:rn.w,Sinebow:rn.D,Spectral:rn.E,Viridis:rn.F,Warm:rn.G},ln={Blues:rn.a,BrBG:rn.b,BuGn:rn.c,BuPu:rn.d,GnBu:rn.g,Greens:rn.h,OrRd:rn.m,Oranges:rn.n,PRGn:rn.o,PiYG:rn.p,PuBu:rn.r,PuBuGn:rn.s,PuOr:rn.t,PuRd:rn.u,Purples:rn.v,RdBu:rn.x,RdGy:rn.y,RdPu:rn.z,RdYlBu:rn.A,RdYlGn:rn.B,Reds:rn.C,YlGn:rn.H,YlGnBu:rn.I,YlOrBr:rn.J,YlOrRd:rn.K},un=Object(d.a)({},cn,{},ln,{},{Paint:["#3db5ec","#73c2b0","#b9e375","#f4bb44","#eb591b"],Ink:["#000000","#FFDD8C"]}),sn=Object(T.a)({root:{borderRadius:"8px",boxShadow:"2px 2px 4px rgba(0,0,0,0.5)"}}),pn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).ref=void 0,n.ref=i.a.createRef(),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.docolors()}},{key:"componentDidUpdate",value:function(){this.docolors()}},{key:"docolors",value:function(){var e=this.ref.current;if(e){var t=e.getContext("2d");if(t){var n=this.props,a=n.scheme,r=n.reverse,o=n.skew,i=n.width,c=n.height;if("horizontal"===n.orientation)for(var l=on({scheme:a,reverse:r,skew:o})([0,i]),u=i+1;u--;)t.fillStyle=l(u),t.fillRect(u,0,1,c);else for(var s=on({scheme:a,reverse:r,skew:o})([c,0]),p=c+1;p--;)t.fillStyle=s(p),t.fillRect(0,p,i,1)}}}},{key:"render",value:function(){return i.a.createElement("canvas",{ref:this.ref,width:this.props.width,height:this.props.height,style:this.props.style,className:this.props.classes.root})}}]),t}(i.a.Component);pn.defaultProps={width:400,height:10,orientation:"horizontal"};var mn=Object(U.a)(sn)(pn),hn=Object(T.a)({root:{padding:"0px",userSelect:"none"},grid:{strokeLinecap:"square",fill:"none"},major:{strokeWidth:.5,strokeOpacity:1},minor:{strokeWidth:.5,strokeOpacity:.3},marker:{strokeWidth:0}}),fn=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).ref=void 0,n.GRID=void 0,n.round=void 0,n.onClick=function(e){if(n.props.onClick){var t=n.getValueAtClick(e);t&&n.props.onClick(t)}},n.onDoubleClick=function(e){if(n.props.onDoubleClick){var t=n.getValueAtClick(e);t&&n.props.onDoubleClick(t)}},n.ref=i.a.createRef();var a=Math.pow(10,e.precision);n.round=function(e){return Math.round(e*a)/a};var r=n.props,o=r.max,c=r.stepRadius,l=r.stepRect,s=r.stepAngle,h=r.angles;return n.GRID=function(e){var t=e.max,n=e.stepX,a=e.stepY,r=e.stepRadius,o=e.stepAngle,i=e.angles,c=1.5*t;function l(e,t,n){return"M"+e+n+","+t+"A"+n+","+n+",0,1,0,"+e+","+t+n+"A"+n+","+n+",0,0,0,"+e+n+","+t}function u(e){return"M"+-t+","+e+"H"+t}function s(e){return"M"+e+","+-t+"V"+t}var p="",m=0;for(;m<=t;)p+=s(m)+s(-m),m+=n;m=0;for(;m<=t;)p+=u(m)+u(-m),m+=a;var h="";if(i)i.forEach((function(e){var t=e*Math.PI/180;h+="M0,0L"+c*Math.cos(t)+","+c*Math.sin(t)}));else for(m=0;m<360;){var f=m*Math.PI/180;h+="M0,0L"+c*Math.cos(f)+","+c*Math.sin(f),m+=o}m=r;for(;m<=c;)h+=l(0,0,m),m+=r;return{RECT:{MINOR:p,MAJOR:u(0)+s(0)},POLAR:{MINOR:h,MAJOR:l(0,0,1)}}}({max:o,stepRadius:c,stepAngle:s,angles:h,stepX:l,stepY:l}),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"getValueAtClick",value:function(e){var t=this.ref.current;if(t){var n=t.getBoundingClientRect(),a=n.x,r=n.y,o=e.nativeEvent,i=o.clientX,c=o.clientY,l=2*((i-a)/this.props.size-.5)*this.props.max,u=2*-((c-r)/this.props.size-.5)*this.props.max;return[this.round(l),this.round(u)]}}},{key:"polarGrid",value:function(){return this.GRID.POLAR?i.a.createElement(i.a.Fragment,null,this.GRID.POLAR.MINOR?i.a.createElement("path",{d:this.GRID.POLAR.MINOR,className:this.props.classes.minor,vectorEffect:"non-scaling-stroke"}):null,this.GRID.POLAR.MAJOR?i.a.createElement("path",{d:this.GRID.POLAR.MAJOR,className:this.props.classes.major,vectorEffect:"non-scaling-stroke"}):null):null}},{key:"rectGrid",value:function(){return this.GRID.RECT?i.a.createElement(i.a.Fragment,null,this.GRID.RECT.MINOR?i.a.createElement("path",{d:this.GRID.RECT.MINOR,className:this.props.classes.minor,vectorEffect:"non-scaling-stroke"}):null,this.GRID.RECT.MAJOR?i.a.createElement("path",{d:this.GRID.RECT.MAJOR,className:this.props.classes.major,vectorEffect:"non-scaling-stroke"}):null):null}},{key:"render",value:function(){var e=this.props.max/24,t=[-this.props.max,-this.props.max,2*this.props.max,2*this.props.max];return i.a.createElement("svg",{ref:this.ref,onClick:this.onClick,onDoubleClick:this.onDoubleClick,viewBox:t.join(" "),className:this.props.classes.root,style:Object(d.a)({},this.props.style,{width:this.props.size,height:this.props.size})},i.a.createElement("g",{className:this.props.classes.grid,style:{stroke:this.props.gridColor}},this.rectGrid(),this.polarGrid()),i.a.createElement("circle",{cx:this.props.value[0],cy:-this.props.value[1],r:e,className:this.props.classes.marker,style:{stroke:this.props.markerColor,fill:this.props.markerColor}}))}}]),t}(i.a.Component);fn.defaultProps={size:100,precision:3,stepAngle:30,stepRadius:.2,stepRect:.2,markerColor:"blue"};Object(U.a)(hn)(fn);var dn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.onChange=function(e){var t=e.target.value;""===t?n.setState({isEmpty:!0}):n.setState({isEmpty:!1}),n.props.onChange&&(isNaN(+t)||n.props.onChange(e))},n.onBlur=function(e){n.props.onBlur&&n.props.onBlur(e),n.setState({isEmpty:!1})},n.state={isEmpty:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.step,n=e.min,a=e.max,r=e.inputProps,o=(e.onChange,e.onBlur,e.value),c=void 0===o?"":o,l=e.emptyValue,u=void 0===l?0:l,s=Object(S.a)(e,["step","min","max","inputProps","onChange","onBlur","value","emptyValue"]);return i.a.createElement(We.a,Object(d.a)({type:"number",value:c?+c:this.state.isEmpty?"":u,inputProps:Object(d.a)({step:t,min:n,max:a},r),onChange:this.onChange,onBlur:this.onBlur},s))}}]),t}(i.a.Component),vn=Object(T.a)((function(e){return{root:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid "+e.palette.divider}}})),bn=Object(U.a)(vn)(_.a),gn=Object(f.b)((function(e){return{value:e.ui.nav,galleryBadge:e.ui.galleryBadge}}),(function(e){return{onChange:function(t,n){return e(M(n))}}}))((function(e){var t=e.galleryBadge,n=Object(S.a)(e,["galleryBadge"]);return i.a.createElement(bn,n,i.a.createElement(z.a,{value:x.Params,label:"Parameters",icon:i.a.createElement(a.Tune,null)}),i.a.createElement(z.a,{value:x.Explore,label:"Explore",icon:i.a.createElement(a.Explore,null)}),i.a.createElement(z.a,{value:x.Capture,label:"Capture",icon:i.a.createElement(a.Capture,null)}),i.a.createElement(z.a,{value:x.Gallery,label:"Saved",icon:i.a.createElement(L.a,{badgeContent:t,color:"primary"},i.a.createElement(a.Gallery,null))}))}));function yn(e,t){var n=(t[1]-t[0])/(e[1]-e[0]),a=t[0]-n*e[0];return function(e){return n*e+a}}function En(e){var t=e.w,n=e.h,a=e.ppu,r=e.pixelCount,o=t*n,i=Math.sqrt(r/o);return{w:Math.round(t*i),h:Math.round(n*i),ppu:Math.round(a*i)}}function On(e){return"x"in e}var Cn,wn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(u.a)(this,e),this.ctx=void 0,this.fullResolution=void 0,this.cmap=void 0,this.image=void 0,this.ctx=document.createElement("canvas").getContext("2d"),this.fullResolution=t,this.cmap=[],this.image=new ImageData(1,1)}return Object(s.a)(e,[{key:"getView",value:function(e){return On(e)?e:Object(d.a)({},e,{},En(e))}},{key:"recolor",value:function(e){this.draw(e)}},{key:"draw",value:function(e){var t=performance.now();this.makeCMap(e),this.makeImage(e);var n=performance.now();console.log("draw time:",n-t,"ms")}},{key:"makeCMap",value:function(e){for(var t=e.color,n=ma(e.algorithm).range,a=on(t)(n),r=[],o=0;o<=n[1];o++){this.ctx.fillStyle=a(o);var i=[this.ctx.fillStyle.slice(1,3),this.ctx.fillStyle.slice(3,5),this.ctx.fillStyle.slice(5,7)].map((function(e){return parseInt(e,16)})),c=Object(ht.a)(i,3),l=c[0],u=c[1],s=c[2];r.push([l,u,s])}this.cmap=r}},{key:"makeImage",value:function(e){var t,n,a=e.algorithm,r=this.cmap,o=this.getView(e.view),i=o.w,c=o.h,l=ma(a).calc,u=new ImageData(i,c);if(On(o))t=o.x,n=o.y;else{var s=o.cx,p=o.cy,m=o.w,h=o.h,f=o.ppu,d=m/f/2,v=h/f/2;t=[s-d,s+d],n=[p+v,p-v]}for(var b=yn([-.5,i-.5],t),g=yn([-.5,c-.5],n),y=0;y<c;y++)for(var E=g(y),O=i*y,C=0;C<i;C++){var w=4*(C+O),x=r[l(b(C),E)];u.data[w]=x[0],u.data[w+1]=x[1],u.data[w+2]=x[2],u.data[w+3]=255}this.image=u}},{key:"putOnCanvas",value:function(e){var t;e.width=this.image.width,e.height=this.image.height,null===(t=e.getContext("2d"))||void 0===t||t.putImageData(this.image,0,0)}}]),e}();!function(e){e[e.Call=0]="Call",e[e.Number=1]="Number",e[e.Complex=2]="Complex",e[e.Boolean=3]="Boolean"}(Cn||(Cn={}));var xn=function(e){var t=e.controls,n=void 0===t?[]:t,a=Object(S.a)(e,["controls"]);return Object(d.a)({},a,{controls:n})},kn=function(e,t){var n=e*e;return function(e){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{re:0,im:0},r=0,o=a;r<t&&Qt(o)<n;)r+=1,o=e(o);return r}},jn={bd:10,iter:20};function Nn(e){return function(){return Object(d.a)({},jn,{},e())}}function Rn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===t?function(t){var n=e(t);return function(e,a){return kn(t.bd,t.iter)(n(At(e,a)))}}:"c"===t?function(t){var n=e(t);return function(e,a){return kn(t.bd,t.iter)(n(At(e,a)),At(e,a))}}:function(n){var a=e(n),r=t(n);return function(e,t){return kn(n.bd,n.iter)(a(At(e,t)),r(At(e,t)))}}}function Sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return An(e(n),0===t?"0":"c"===t?"x+yi":t(n),n.bd,n.iter)}}function Pn(e){if("describe"in e)return xn({label:e.label,calc:Rn(e.f,e.z0),range:function(e){return[0,e.iter]},describe:e.describe,newParams:Nn(e.newParams),controls:e.controls});var t=void 0!==e.latexZ0||0!==e.z0&&"c"!==e.z0?e.latexZ0:e.z0;return xn({label:e.label,calc:Rn(e.f,e.z0),range:function(e){return[0,e.iter]},describe:Sn(e.latexF,t),newParams:Nn(e.newParams),controls:e.controls})}function An(e,t,n,a){return[{math:"\\begin{aligned}z_0 &= "+t+"\\\\z_{n+1} &= "+(-1===e.indexOf("z_")?e.replace(/z/g,"z_n"):e)+"\\end{aligned}",displayMode:!0},"The color of the pixel located at ",{math:"(x, y)"}," corresponds to ",{math:"k"},", where ",{math:"z_k"}," is the first term of the above sequence such that ",{math:"|z_k| > ".concat(ft(n))},". If this does not occur in the first ",{math:ft(a)}," terms of the sequence, then ",{math:"k = "+ft(a)},"."]}function Mn(e){return Array.isArray(e)?["Julia: "].concat(Object(He.a)(e)):["Julia: ",e]}function In(e){return function(t){var n=e(t),a=kn(t.bd,t.iter);return function(e,t){return a(n,At(e,t))}}}function Dn(e){var t=e.f,n=e.label,a=e.latexF,r=Object(S.a)(e,["f","label","latexF"]);return xn({label:Mn(n),calc:In(t),range:function(e){return[0,e.iter]},describe:function(e){return An(a(e),"x+yi",e.bd,e.iter)},newParams:Nn(r.newParams),controls:r.controls})}function _n(e){return e%1===0}var zn=function(e){return function(e){for(var t in e)if(!_n(+t)||+t<0)return!1;return!0}(e)?function(t){var n={re:0,im:0};for(var a in e)n=Dt(n,Ut(Jt(t,+a),e[a]));return n}:function(t){var n,a,r=It(t),o={re:0,im:0};for(var i in e)o=zt(o,(n=Pt(r,+i),a=e[i],{angle:n.angle,radius:a*n.radius}));return o}},Ln=function(e){return At(yt(e.re),yt(e.im))};function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;if(t){var n=Tn(e),a=At(t[0],t[1]);return function(e){return Dt(n(e),a)}}if(1===e)return Ln;var r=Kt(e);return function(e){return r(At(yt(e.re),yt(e.im)))}}function Un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=2*e,r=function(t){return t>e?a-t:t<-e?-a-t:t},o=t*t,i=1/o,c=function(e){var t=Qt(e);return Ut(e,t<i?n*o:t<1?n/t:n)};return function(e){return c(At(r(e.re),r(e.im)))}}function Bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At(0,0),n=t;return function(t){var a=e(t,n);return n=t,a}}function Fn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2?arguments[2]:void 0,a=Kt(t);if(n){var r=At(n[0],n[1]);return function(t,n){return Dt(Dt(a(t),r),Ut(n,e))}}return function(t,n){return Dt(a(t),Ut(n,e))}}function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.step,a=void 0===n?1:n,r=Object(S.a)(t,["step"]);return Object(d.a)({type:Cn.Number,param:e,label:r.label?r.label:e,step:a},r)}function Jn(e){return{re:r.abs(e.re),im:r.abs(e.im)}}var Vn=Pn({label:"Burning Ship",latexF:function(e){return"\\left(|Re(z)|+|Im(z)|\\right)^{".concat(ft(e.k),"}+x-yi")},f:function(e){var t=e.k;return _n(t)?function(e){var n={re:e.re,im:-e.im};return function(e){return Dt(Jt(Jn(e),t),n)}}:function(e){var n={re:e.re,im:-e.im};return function(e){return Dt(Gt(Jn(e),t),n)}}},newParams:function(){return{k:2}},controls:[{type:Cn.Number,label:"exponent (k)",param:"k",step:.1,min:0}]}),Wn=Pn({label:"Burning Ship (Mandelbox Remix)",f:function(e){var t=e.box1,n=e.box2,a=e.box3,o=e.k,i=_n(o)&&o>0?Jt:Gt,c=Un(t,n,a);return function(e){return function(t){var n=Ut(i(At(r.abs(t.re),-r.abs(t.im)),o),1/a);return Dt(c(n),e)}}},z0:0,describe:function(e){e.box1,e.box2;var t=e.box3,n=e.k;e.bd,e.iter;return["This follows the same algorithm as the Mandelbox fractal, but first applies the function ",{math:"z \\mapsto \\left(|Re(z)|-|Im(z)|\\right)^{".concat(ft(n),"} \\div ").concat(ft(t)),displayMode:!0}]},newParams:function(){return{box1:1,box2:2,box3:2.2,k:2,bd:50}},controls:[{type:Cn.Call,icon:"Random",onCall:function(){return{box3:r.round(100*r.random())/100+.5}}}].concat(Object(He.a)(["box1","box2","box3"].map((function(e){return Gn(e,{step:.1})}))),[Gn("k",{step:.1,min:0}),Gn("bd",{step:5,min:0})])}),Hn=n(22);function Yn(){var e=r.PI-2*r.asin(r.pow(r.random(),.9));r.random()<.5&&(e=2*r.PI-e);var t=.3+.6*r.sin(e/2)*(.4*r.random()+.8);return[r.round(t*r.cos(e)*1e3)/1e3,r.round(t*r.sin(e)*1e3)/1e3]}var Zn={k:{type:Cn.Number,label:"exponent (k)",param:"k",step:.5},c:{type:Cn.Complex,label:"c",param:"c",stepRadius:.02,stepAngle:.05},randomC:{type:Cn.Call,icon:"Random",onCall:function(){return{c:Yn()}}}},$n=Dn({label:{math:"z^k+c"},f:function(e){var t=e.k,n=e.c,a=At(n[0],n[1]),r=Kt(t);return function(e){return Dt(r(e),a)}},latexF:function(e){var t=e.k,n=e.c;return"z^{".concat(ft(t),"}").concat(dt(n,{sign:!0}))},newParams:function(){return{k:2,c:Yn()}},controls:[Zn.randomC,Zn.c,Zn.k,{type:Cn.Number,label:"bound",param:"bd",step:5,min:0}]}),qn=Dn({label:{math:"az^m+bz^n+c"},f:function(e){var t,n=e.a,a=e.b,r=e.c,o=e.m,i=e.n,c=zn((t={},Object(Hn.a)(t,o,n),Object(Hn.a)(t,i,a),t)),l=At(r[0],r[1]);return function(e){return Dt(c(e),l)}},latexF:function(e){var t=e.a,n=e.b,a=e.c,r=e.m,o=e.n;return"".concat(ft(t),"z^{").concat(ft(r),"}")+"".concat(ft(n,{sign:!0}),"z^{").concat(ft(o),"}")+"".concat(dt(a,{sign:!0}))},newParams:function(){return{a:-5,m:-2,b:1,n:1,c:[-.5,.5]}},controls:[].concat(Object(He.a)(["a","m","b","n"].map((function(e){return{type:Cn.Number,param:e,label:e,step:"a"===e||"b"===e?1:.1}}))),[Zn.c])}),Xn=Dn({label:{math:"e^{z^k}+c"},newParams:function(){return{k:3,c:[-.6,0]}},latexF:function(e){var t=e.k,n=e.c;return"e^{z^{".concat(ft(t),"}}").concat(dt(n,{sign:!0}))},f:function(e){var t=e.k,n=e.c,a=At(n[0],n[1]);return function(e){return Dt(Ft(Vt(e,t)),a)}},controls:[Zn.randomC,Zn.c,Zn.k,{type:Cn.Number,label:"bound",param:"bd",min:0,step:1}]}),Kn=Dn({label:{math:"\\sqrt{\\sinh(z^{k})}+c"},newParams:function(){return{k:2,c:[.06,.12]}},latexF:function(e){var t=e.k,n=e.c;return"\\sqrt{\\sinh(z^{".concat(ft(t),"})}").concat(dt(n,{sign:!0}))},f:function(e){var t=e.k,n=e.c,a=At(n[0],n[1]);return function(e){return Dt(function(e){return Mt({angle:Ot(e.im,e.re)/2,radius:Rt(en(e))})}(function(e){return function(e,t){return{re:e.re/t,im:e.im/t}}(Lt(Ft(e),Ft({re:-(t=e).re,im:-t.im})),2);var t}(Vt(e,t))),a)}},controls:[Zn.randomC,Zn.c,Zn.k,{type:Cn.Number,label:"bound",param:"bd",min:0,step:1}]}),Qn=Dn({label:"Burning Ship",newParams:function(){return{k:2,c:[-.52,-1.1]}},f:function(e){var t=e.k,n=e.c,a=At(n[0],n[1]),r=Tn(t);return function(e){return Dt(r(e),a)}},latexF:function(e){var t=e.k,n=e.c;return"(|Re(z)|+|Im(z)|)^{".concat(ft(t),"}").concat(dt(n,{sign:!0}))},controls:[Zn.randomC,Zn.c,Zn.k]}),ea=Pn({label:"Magnet Type I",f:function(e){var t=e.k,n=_n(t)&&t>0?Jt:Gt;return function(e){var a=_t(e,-1),r=_t(e,-2);return function(e){return n(Bt(Dt(Jt(e,2),a),Dt(Ut(e,2),r)),t)}}},latexF:function(e){return"\\left(\\frac{z^2 + x+yi - 1}{2z + x+yi - 2}\\right)^{"+ft(e.k)+"}"},newParams:function(){return{k:2}},controls:[{type:Cn.Number,param:"k",label:"exponent",step:.5},{type:Cn.Number,param:"bd",label:"bound",step:5,min:0}]}),ta=Pn({label:"Magnet Type II",newParams:function(){return{k:2}},f:function(e){var t=e.k,n=_n(t)&&t>0?Jt:Gt;return function(e){var a=_t(e,-1),r=_t(e,-2),o=Ut(a,3),i=Ut(r,3),c=Tt(a,r);return function(e){return n(Bt(Dt(Dt(Jt(e,3),Tt(o,e)),c),Dt(Dt(Ut(Jt(e,2),3),Tt(i,e)),_t(c,1))),t)}}},latexF:function(e){return"\\left(\\frac{z^3 + 3(x+yi-1)z + (x+yi-1)(x+yi-2)}{3z^2 + 3(x+yi-2)z + (x+yi-1)(x+yi-2) + 1}\\right)^{"+ft(e.k)+"}"},controls:[{type:Cn.Number,param:"k",label:"exponent",step:.5},{type:Cn.Number,param:"bd",label:"bound",step:5,min:0}]});var na=function(e){return"\\left\\{\\begin{aligned}"+"".concat(ft(2*e),"z &, \\text{ if $|z|<").concat(ft(1/e),"$}\\\\")+"z \\div |z|^2 &, \\text{ if $".concat(ft(1/e)," \\leq |z| < 1$}\\\\")+"z &, \\text{ otherwise}\\\\\\end{aligned}\\right."};function aa(e,t,n,a,r){return[{math:"f_{\\mathbb{R}\\mapsto\\mathbb{R}}(n) ="+(o=e,"\\left\\{\\begin{aligned}"+"".concat(ft(2*o)," - n &, \\text{ if $n > ").concat(ft(o),"$}\\\\")+"".concat(ft(-2*o)," - n &, \\text{ if $n < ").concat(ft(-o),"$}\\\\")+"n &, \\text{ otherwise}\\end{aligned}\\right."),displayMode:!0},{math:"A_{\\mathbb{C}\\mapsto\\mathbb{C}}(z) =f(Re(z))+f(Im(z))i",displayMode:!0},{math:"B_{\\mathbb{C}\\mapsto\\mathbb{C}}(z) ="+na(t),displayMode:!0}].concat(Object(He.a)(An(function(e){return ft(e)+"\\cdot B(A(z)) + x + yi"}(n),"0",a,r)));var o}var ra={type:Cn.Call,icon:"Random",onCall:function(){return{box3:r.round(20*r.random())/10+2}}},oa=[Gn("box1",{step:.1}),Gn("box2",{step:.1}),Gn("box3",{step:.1})],ia=Pn({label:"Mandelbox",f:function(e){var t=Un(e.box1,e.box2,e.box3);return function(e){return function(n){return Dt(t(n),e)}}},newParams:function(){return{box1:1,box2:2,box3:2.2}},describe:function(e){return aa(e.box1,e.box2,e.box3,e.bd,e.iter)},controls:[ra].concat(oa,[{type:Cn.Number,param:"bd",label:"bound",step:10,min:0}])}),ca=Pn({label:"Mandelcorner",f:function(e){var t=e.box1,n=e.box2,a=e.box3;return function(e){var r=At(e.re,-e.im),o=Un(t,n,a),i=Tn();return function(e){var t=At(e.re,e.im);return t=o(t),Dt(i(t),r)}}},newParams:function(){return{box1:1,box2:2,box3:3}},describe:function(e){return["Mandelbox("+[e.box1,e.box2,e.box3].map((function(e){return ft(e)})).join(",")+") -> Burning Ship"]},controls:[ra].concat(oa,[{type:Cn.Number,param:"bd",label:"bound",step:1}])}),la=Pn({label:"Mandelbrot",latexF:function(e){return"z^{".concat(ft(e.k),"}+x+yi")},f:function(e){var t=e.k;return _n(t)?function(e){return function(n){return Dt(Jt(n,t),e)}}:function(e){return function(n){return Dt(Gt(n,t),e)}}},newParams:function(){return{k:2}},controls:[{type:Cn.Number,label:"exponent (k)",param:"k",step:1,min:0}]}),ua=Pn({label:"Phoenix",newParams:function(){return{p:-.5,k:2,c:[.5667,0],iter:40}},f:function(e){var t=e.p,n=e.k,a=e.c;return function(e){return Bn(Fn(t,n,a))}},z0:function(){return function(e){return At(e.im,e.re)}},latexZ0:function(){return"y+xi"},latexF:function(e){var t=e.p,n=e.k,a=e.c;return"z_{n}^{".concat(ft(n),"}").concat(dt(a,{sign:!0})).concat(ft(t,{sign:!0}),"z_{n-1}")},controls:[{type:Cn.Complex,param:"c",label:"c",stepRadius:.02,stepAngle:.05},{type:Cn.Number,param:"p",label:"p",step:.1},{type:Cn.Number,param:"k",label:"k",step:.5}]}),sa=Pn({label:"Phoenix/Burning Ship",newParams:function(){return{p:-.5,k:2,c:[.6,0]}},f:function(e){var t=e.p,n=e.k,a=e.c,r=Tn(n),o=Fn(t,1,a),i=function(e,t){return o(r(e),t)};return function(e){return Bn(i)}},z0:function(){return function(e){return At(e.im,e.re)}},latexZ0:function(){return"y+xi"},latexF:function(e){var t=e.p,n=e.k,a=e.c;return"\\left(|Re(z_{n})|+|Im(z_{n})|\\right)^{".concat(ft(n),"}").concat(dt(a,{sign:!0})).concat(ft(t,{sign:!0}),"z_{n-1}")},controls:[{type:Cn.Complex,param:"c",label:"c",stepRadius:.02,stepAngle:.05},{type:Cn.Number,param:"p",label:"p",step:.1},{type:Cn.Number,param:"k",label:"k",step:.5}]}),pa=(Pn({label:{math:"e^{z^k}+c"},newParams:function(){return{k:3}},latexF:function(e){var t=e.k;return"e^{z^{".concat(ft(t),"}}+x+yi")},f:function(e){var t=e.k;return function(e){return function(n){return Dt(Ft(Vt(n,t)),e)}}},controls:[{type:Cn.Number,label:"k",param:"k",step:.5},{type:Cn.Number,label:"bound",param:"bd",min:0,step:1}]}),{Bs:Vn,BsMbx:Wn,JlBs:Qn,Jl1:$n,Jl2:qn,JlExp:Xn,JlSinh:Kn,Mg1:ea,Mg2:ta,Mbx:ia,Md:la,MbxBs:ca,Ph:ua,PhBs:sa,Test1:Pn({label:"Test",newParams:function(){return{p:.5,k:2,m1:2,m2:2,m3:2,c:[.001,0]}},f:function(e){var t=e.p,n=e.k,a=e.m1,r=e.m2,o=e.m3,i=e.c,c=Tn(n),l=Un(a,r,o),u=Fn(t,1,i),s=function(e,t){return l(u(c(e),t))};return function(e){return Bn(s)}},z0:function(){return function(e){return e}},describe:function(){return[""]},controls:[function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.stepRadius,a=void 0===n?.02:n,r=t.stepAngle,o=void 0===r?.05:r,i=Object(S.a)(t,["stepRadius","stepAngle"]);return Object(d.a)({type:Cn.Complex,param:e,label:i.label?i.label:e,stepRadius:a,stepAngle:o},i)}("c"),Gn("k",{step:.5}),Gn("p",{step:.5}),Gn("m1",{step:.1}),Gn("m2",{step:.5}),Gn("m3",{step:.1})]})});function ma(e){var t=e.method,n=e.params;return{label:t.label,calc:t.calc(n),range:t.range(n),describe:t.describe(n),controls:t.controls}}var ha=n(86);function fa(e){return function(e){var t=e.algorithm,n=e.color,a=e.view,r=n.schemeName,o=un[r]?null:n.scheme,i=[n.schemeName,n.skew,n.reverse?1:0];return Array.isArray(o)&&i.push.apply(i,Object(He.a)(o)),{v:"2",alg:[t.methodName,t.params],col:i,view:[a.cx,a.cy,a.w,a.h,a.ppu]}}(e)}function da(e){return"1"===e.v?function(e){var t=pa[e.alg.m],n=un[e.col.sc];if(t)return{algorithm:{methodName:e.alg.m,method:t,params:e.alg.p},color:{schemeName:n?e.col.sc:"Rainbow",scheme:n||un.Rainbow,skew:e.col.sk,reverse:e.col.rv},view:{cx:e.view.cx,cy:e.view.cy,w:e.view.w,h:e.view.h,ppu:e.view.pp}}}(e):function(e){var t=e.alg[0],n=e.col[0],a=pa[t],r=un[n];if(r||(r=e.col.slice(3)),a)return{algorithm:{methodName:t,method:a,params:e.alg[1]},color:{schemeName:r&&r.length?n:"Rainbow",scheme:r&&r.length?r:un.Rainbow,skew:e.col[1],reverse:!!e.col[2]},view:{cx:e.view[0],cy:e.view[1],w:e.view[2],h:e.view[3],ppu:e.view[4]}}}(e)}function va(e){return"1"===e.v?function(e){var t=new URLSearchParams,n=e.v,a=Object(S.a)(e,["v"]);return t.append("v",n),t.append("data",btoa(JSON.stringify(a))),t.toString()}(e):function(e){var t=new URLSearchParams,n=e.v,a=e.alg,r=e.col,o=e.view,i=Object.entries(a[1]).map((function(e){var t=Object(ht.a)(e,2),n=t[0],a=t[1];return n+":"+JSON.stringify(a)})).join(";");return t.append("v",n),t.append("al",a[0]+";"+i),t.append("co",r.join(";")),t.append("vw",o.join(";")),t.toString()}(e)}function ba(e){try{var t=new URLSearchParams(e),n=t.get("v");if("1"===n)return function(e){try{var t=e.get("data");if(t){var n=JSON.parse(atob(t)),a=n.alg,r=n.col,o=n.view;if(a&&r&&o)return{v:"1",alg:a,col:r,view:o}}}catch(i){}}(t);if("2"===n)return function(e){try{var t=e.get("al"),n=e.get("co"),a=e.get("vw");if(t&&n&&a){var r=t.split(";"),o=Object(ha.a)(r),i=o[0],c=o.slice(1),l=Object.fromEntries(c.map((function(e){var t=e.split(":");try{return[t[0],JSON.parse(t[1])]}catch(n){return console.log(t),["xx",1]}}))),u=n.split(";"),s=Object(ha.a)(u),p=s[0],m=s[1],h=s[2],f=s.slice(3),d=a.split(";").map((function(e){return+e})),v=Object(ht.a)(d,5),b=v[0],g=v[1],y=v[2],E=v[3],O=v[4];return{v:"2",alg:[i,l],col:[p,+m,+h].concat(Object(He.a)(f)),view:[b,g,y,E,O]}}}catch(C){}}(t)}catch(a){}}var ga,ya=function(e){return{type:"ALGORITHM_UPDATE_PARAMS",payload:e}},Ea=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.selectMethod=function(e){var t=e.target.value,a=n.props.methodList[t];n.setState({methodName:t,method:a,params:a.newParams()})},n.apply=function(){var e=n.state,t=e.methodName,a=e.method,r=e.params;n.props.setAlgorithm(t,a,r),n.props.onClose&&n.props.onClose()},n.reset=function(){var e=n.props,t=e.methodName,a=e.params;n.setState({methodName:t,method:n.props.methodList[t],params:Object(d.a)({},a)})},n.state={methodName:e.methodName,method:e.methodList[e.methodName],params:Object(d.a)({},e.params)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(an,null,i.a.createElement(rt.a,{m:1},i.a.createElement(rt.a,{m:1},i.a.createElement(tt,{select:!0,label:"Method",value:this.state.methodName,onChange:this.selectMethod},Object.keys(this.props.methodList).map((function(t){return i.a.createElement(nt,{key:t,value:t},i.a.createElement(at,{data:e.props.methodList[t].label}))})))),i.a.createElement(rt.a,{m:1},i.a.createElement(st.a,{fullWidth:!0,color:"primary",orientation:"vertical"},i.a.createElement(ot.a,{fullWidth:!0,onClick:this.apply},"Apply"),i.a.createElement(ot.a,{fullWidth:!0,onClick:this.reset},"Reset")))))}}]),t}(i.a.Component),Oa=Object(f.b)((function(e){return{methodName:e.fractal.algorithm.methodName,methodList:e.ui.methodList,params:e.fractal.algorithm.params}}),(function(e){return{setAlgorithm:function(t,n,a){e(function(e,t,n){return{type:"ALGORITHM_SET",payload:{methodName:e,method:t,params:n}}}(t,n,a)),e({type:"VIEW_RECENTER"}),e(I())}}}))(Ea),Ca=n(232),wa=n(242),xa=n(260),ka=n(263),ja=n(262),Na=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.openCustomPopup=function(){return n.setState({customPopup:!0})},n.closeCustomPopup=function(){return n.setState({customPopup:!1})},n.changeReverse=function(e){return n.setCurrent({reverse:e.target.checked})},n.changeSkew=function(e,t){"number"===typeof t?n.setCurrent({skew:t}):console.log(t)},n.selectScheme=function(e){var t=e.target.value;"CUSTOM"===t?n.openCustomPopup():n.setScheme(t)},n.hasChanged=function(){return n.state.current.schemeName!==n.props.current.schemeName||n.state.current.reverse!==n.props.current.reverse||n.state.current.skew!==n.props.current.skew},n.saveScheme=function(e,t){n.props.addScheme(e,t),n.setScheme(e)},n.apply=function(){n.props.updateColor({schemeName:n.state.current.schemeName,scheme:n.props.schemeList[n.state.current.schemeName],reverse:n.state.current.reverse,skew:n.state.current.skew}),n.props.onClose&&n.props.onClose()},n.revert=function(){n.setState({schemeName:n.props.current.schemeName,reverse:n.props.current.reverse,skew:n.props.current.skew})},n.state={current:{schemeName:e.current.schemeName,reverse:e.current.reverse,skew:e.current.skew},customPopup:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"setCurrent",value:function(e){this.setState(Object(d.a)({},this.state,{current:Object(d.a)({},this.state.current,{},e)}))}},{key:"setScheme",value:function(e){this.setCurrent({schemeName:e})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(an,null,i.a.createElement(rt.a,{m:1},i.a.createElement(rt.a,{m:1},i.a.createElement(tt,{select:!0,label:"Scheme",value:this.state.current.schemeName,onChange:this.selectScheme},i.a.createElement(nt,{value:"CUSTOM"},i.a.createElement(at,{data:"CREATE NEW SCHEME"})),Object.keys(this.props.schemeList).sort().map((function(e){return i.a.createElement(nt,{key:e,value:e},i.a.createElement(at,{data:e}))})))),i.a.createElement(rt.a,{m:2},i.a.createElement(wa.a,{label:"Reversed",control:i.a.createElement(ja.a,{checked:this.state.current.reverse,onChange:this.changeReverse,edge:"end"})})),i.a.createElement(rt.a,{m:2},i.a.createElement(Ca.a,{fullWidth:!0},i.a.createElement(ct.a,{shrink:!0},"Skew"),i.a.createElement(ka.a,{color:"secondary",value:this.state.current.skew,onChange:this.changeSkew,min:-5,max:5,step:.1}))),i.a.createElement(rt.a,{m:1},i.a.createElement(mn,{style:{width:"100%",height:"4mm"},scheme:this.props.schemeList[this.state.current.schemeName],reverse:this.state.current.reverse,skew:this.state.current.skew,width:100,height:10})),i.a.createElement(rt.a,{m:1},i.a.createElement(mn,{style:{width:"100%",height:"4mm"},scheme:this.props.schemeList[this.state.current.schemeName],reverse:this.props.current.reverse,skew:this.props.current.skew,width:100,height:10}),i.a.createElement(ct.a,null,"Current")),i.a.createElement(st.a,{fullWidth:!0,color:"primary",orientation:"vertical"},i.a.createElement(ot.a,{onClick:this.apply,disabled:!this.hasChanged()},"Apply"),i.a.createElement(ot.a,{onClick:this.revert,disabled:!this.hasChanged()},"Reset")))),i.a.createElement(xa.a,{open:this.state.customPopup,onClose:this.closeCustomPopup},i.a.createElement(rt.a,{m:2},i.a.createElement(ut,{onSave:this.saveScheme,onClose:this.closeCustomPopup,takenNames:Object.keys(this.props.schemeList)}))))}}]),t}(i.a.Component),Ra=Object(f.b)((function(e){return{current:Object(d.a)({},e.fractal.color),schemeList:e.ui.colorSchemeList}}),(function(e){return{updateColor:function(t){e({type:"COLOR_UPDATE",payload:t}),e({type:"UI_SET_CANVAS_ACTION",payload:N.Color})},addScheme:function(t,n){e({type:"UI_ADD_COLOR_SCHEME",payload:{name:t,scheme:n}})}}}))(Na),Sa=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.centerStep=void 0,n.hasChanged=function(){return n.props.current.cx!==n.state.current.cx||(n.props.current.cy!==n.state.current.cy||(n.props.current.w!==n.state.current.w||(n.props.current.h!==n.state.current.h||(n.props.current.ppu!==n.state.current.ppu||n.props.current.pixelCount!==n.state.current.pixelCount))))},n.apply=function(){n.props.updateView(n.state.current),n.props.onClose&&n.props.onClose()},n.revert=function(){n.setState({current:Object(d.a)({},n.props.current)})},n.setCX=function(e){return n.setCurrent({cx:+e.target.value})},n.setCY=function(e){return n.setCurrent({cy:+e.target.value})},n.setW=function(e){return n.setCurrent({w:+e.target.value})},n.setH=function(e){return n.setCurrent({h:+e.target.value})},n.setPPU=function(e){return n.setCurrent({ppu:+e.target.value})},n.setPixelCount=function(e){return n.setCurrent({pixelCount:+e.target.value})},n.centerStep=10/n.props.current.ppu,n.state={current:Object(d.a)({},e.current)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"setCurrent",value:function(e){this.setState({current:Object(d.a)({},this.state.current,{},e)})}},{key:"render",value:function(){return i.a.createElement(an,null,i.a.createElement(rt.a,{m:1},i.a.createElement(rt.a,{m:1},i.a.createElement(ct.a,null,"Relative Dimensions"),i.a.createElement(it.a,{container:!0,spacing:1},i.a.createElement(it.a,{item:!0,xs:6},i.a.createElement(dn,{fullWidth:!1,label:"Width",value:+this.state.current.w,onChange:this.setW,step:1,min:1,inputProps:{style:{maxWidth:"5em"}}})),i.a.createElement(it.a,{item:!0,xs:6},i.a.createElement(dn,{fullWidth:!1,label:"Height",value:+this.state.current.h,onChange:this.setH,step:1,min:1,inputProps:{style:{maxWidth:"5em"}}}))),i.a.createElement(rt.a,null,i.a.createElement(dn,{label:"Pixel count",value:+this.state.current.pixelCount,onChange:this.setPixelCount,step:1e4,min:1e4})),i.a.createElement(rt.a,null,i.a.createElement(dn,{label:"Center x-coordinate",value:+this.state.current.cx,onChange:this.setCX,step:this.centerStep})),i.a.createElement(rt.a,null,i.a.createElement(dn,{label:"Center y-coordinate",value:+this.state.current.cy,onChange:this.setCY,step:this.centerStep})),i.a.createElement(rt.a,null,i.a.createElement(dn,{label:"Scale (pixels per unit)",value:+this.state.current.ppu,onChange:this.setPPU,step:10,min:0})),i.a.createElement(st.a,{fullWidth:!0,color:"primary",orientation:"vertical"},i.a.createElement(ot.a,{onClick:this.apply,disabled:!this.hasChanged()},"Apply"),i.a.createElement(ot.a,{onClick:this.revert,disabled:!this.hasChanged()},"Reset")))))}}]),t}(i.a.Component),Pa=Object(f.b)((function(e){return{current:e.fractal.view}}),(function(e){return{updateView:function(t){e({type:"VIEW_UPDATE",payload:t}),e(I())}}}))(Sa),Aa=n(233),Ma=n(182),Ia=n(246),Da=n(245),_a=n(247),za=n(257),La=n(244),Ta=n(243),Ua=Object(U.a)({root:{maxWidth:"240px","& textarea, input":{fontFamily:"roboto mono, monospace"}}})(We.a),Ba=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.onCopyJson=function(){navigator.clipboard.writeText(n.props.currentJson)},n.onCopyLink=function(){navigator.clipboard.writeText(n.props.currentURL)},n.onChangeJson=function(e){try{var t=da(JSON.parse(e.target.value));n.setState({jsonInput:e.target.value,parsedJson:t})}catch(o){try{var a=ba(e.target.value.split("?").slice(-1)[0]);if(a){var r=da(a);n.setState({jsonInput:e.target.value,parsedJson:r})}else n.setState({jsonInput:e.target.value,parsedJson:void 0})}catch(i){n.setState({jsonInput:e.target.value,parsedJson:void 0})}}},n.onUploadJson=function(){n.state.parsedJson&&n.props.uploadData(n.state.parsedJson)},n.selectText=function(e){e.target.select()},n.state={jsonInput:"",parsedJson:void 0},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(rt.a,{m:2},i.a.createElement(rt.a,null,i.a.createElement(Ta.a,{variant:"body1",href:this.props.currentURL},"Link to Current Fractal")),i.a.createElement(rt.a,null,i.a.createElement(Ua,{label:"Current JSON",value:this.props.currentJson,InputProps:{onFocusCapture:this.selectText,readOnly:!0}})),i.a.createElement(rt.a,null,i.a.createElement(Ua,{label:"Load from URL or JSON",onChange:this.onChangeJson,value:this.state.jsonInput,InputProps:{endAdornment:i.a.createElement(La.a,{position:"end"},i.a.createElement(pt.a,{onClick:this.onUploadJson,disabled:!this.state.parsedJson,title:"load data into viewer"},i.a.createElement(a.Upload,null)))}})))}}]),t}(i.a.Component),Fa=Object(f.b)((function(e){var t=fa(e.fractal);return{currentJson:JSON.stringify(t),currentURL:window.location.href.split("?")[0]+"?"+va(t)}}),(function(e){return{uploadData:function(t){e(function(e){return{type:"FRACTAL_UPDATE",payload:e}}(t)),e(I())}}}))(Ba),Ga=n(133),Ja=Object(U.a)({root:{padding:"1em"}})(Ve.a),Va=Object(U.a)({root:{padding:0,margin:0}})(Da.a),Wa=Object(U.a)({paper:{display:"flex",flexDirection:"row",height:"100%",maxWidth:"90vw"}})(za.a);!function(e){e[e.None=0]="None",e[e.Algorithm=1]="Algorithm",e[e.Color=2]="Color",e[e.View=3]="View",e[e.JSON=4]="JSON"}(ga||(ga={}));var Ha=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.openMenu=function(){return n.props.setModal(k.Menu)},n.openAlgorithm=function(){return n.setState({menu:ga.Algorithm})},n.openColor=function(){return n.setState({menu:ga.Color})},n.openView=function(){return n.setState({menu:ga.View})},n.openJSON=function(){return n.setState({menu:ga.JSON})},n.closeAll=function(){n.setState({menu:ga.None}),n.closePopup(),n.props.setModal(k.None)},n.openPopup=function(){return n.setState({popup:!0})},n.closePopup=function(){return n.setState({popup:!1})},n.state={menu:ga.None,popup:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.menu===ga.None?{}:{display:"none"},t=this.state.menu===ga.None?{}:{width:"4em"};return i.a.createElement(Wa,{open:this.props.open,onOpen:this.openMenu,onClose:this.closeAll},i.a.createElement(Aa.a,{style:t},i.a.createElement(Ja,{onClick:this.openAlgorithm},i.a.createElement(Ia.a,null,i.a.createElement(a.Functions,null)),i.a.createElement(Va,{style:e},"Algorithm")),i.a.createElement(Ja,{onClick:this.openColor},i.a.createElement(Ia.a,null,i.a.createElement(a.Palette,null)),i.a.createElement(Va,{style:e},"Colors")),i.a.createElement(Ja,{onClick:this.openView},i.a.createElement(Ia.a,null,i.a.createElement(a.View,null)),i.a.createElement(Va,{style:e},"View")),i.a.createElement(Ja,{onClick:this.openJSON},i.a.createElement(Ia.a,null,i.a.createElement(a.Code,null)),i.a.createElement(Va,{style:e},"Serialize")),i.a.createElement(_a.a,null),i.a.createElement(Ja,{onClick:this.closeAll,style:{paddingTop:"2em",paddingBottom:"2em"}},i.a.createElement(Ia.a,null,i.a.createElement(a.Back,null)),i.a.createElement(Va,{style:e},"Close")),i.a.createElement(Ma.a,{style:{position:"absolute",bottom:"0",left:"0",right:"0"}},i.a.createElement(Ke.a,{style:e,variant:"caption"},Ga.a))),i.a.createElement(rt.a,null,this.state.menu===ga.Algorithm?i.a.createElement(Oa,null):this.state.menu===ga.Color?i.a.createElement(Ra,null):this.state.menu===ga.View?i.a.createElement(Pa,null):this.state.menu===ga.JSON?i.a.createElement(Fa,null):null))}}]),t}(i.a.Component),Ya=Object(f.b)((function(e){return{open:e.ui.modal===k.Menu}}),(function(e){return{setModal:function(t){return e(A(t))}}}))(Ha),Za=n(61),$a=n.n(Za),qa=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).drawer=void 0,n.canvasRef=void 0,n.centerOnClick=function(e){if(n.props.setCenter&&n.canvas){var t=n.props.fractal.view,a=t.h,r=t.w,o=t.ppu,i=t.cx,c=t.cy,l=n.canvas.getBoundingClientRect(),u=l.width,s=l.height,p=e.nativeEvent,m=p.offsetX,h=p.offsetY;if(n.props.stretch===j.Contain){var f=u/r,d=s/a;if(d>f){var v=a*f;h-=(s-v)/2,s=v}else if(f>d){var b=r*d;m-=(u-b)/2,u=b}}var g=(Math.round(m/u*r)-r/2)/o,y=(Math.round(h/s*a)-a/2)/o;n.props.setCenter(i+g,c-y)}},n.drawer=new wn,n.drawer.fullResolution=!1,n.canvasRef=i.a.createRef(),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"draw",value:function(){this.drawer.draw(this.props.fractal),this.drawer.putOnCanvas(this.canvas),this.props.finishDrawing()}},{key:"componentDidMount",value:function(){this.canvas&&this.draw()}},{key:"componentDidUpdate",value:function(){this.props.canvasAction===N.Draw?this.draw():this.props.canvasAction===N.Color&&this.draw()}},{key:"render",value:function(){var e,t=[$a.a.Outer],n=this.props.visible?{}:{display:"none"};switch(this.props.stretch){case j.Contain:e="contain",t.push($a.a.Stretch);break;case j.Cover:e="cover",t.push($a.a.Stretch)}return i.a.createElement(rt.a,{m:0,className:t.join(" "),style:n},i.a.createElement("canvas",{id:"fractal-preview-canvas",className:$a.a.Canvas,ref:this.canvasRef,onDoubleClick:this.centerOnClick,style:{objectFit:e}}))}},{key:"canvas",get:function(){return this.canvasRef.current}}]),t}(i.a.Component),Xa=Object(f.b)((function(e){return{visible:e.ui.nav===x.Params||e.ui.nav===x.Explore,fractal:e.fractal,canvasAction:e.ui.canvasAction,stretch:e.ui.canvasStretch}}),(function(e){return{setCenter:function(t,n){e({type:"VIEW_UPDATE",payload:{cx:t,cy:n}}),e(I())},finishDrawing:function(){return e(D())}}}))(qa),Ka=n(136),Qa=n(181),er=n(248),tr=Object(U.a)((function(e){return{root:{bottom:"0",width:"100%",backgroundColor:e.palette.background.default+"99"}}}))(Qa.a),nr=Object(U.a)({root:{display:"flex",flexFlow:"row wrap",alignItems:"center",justifyContent:"space-around",paddingBottom:"0.7em",paddingTop:"0.3em"}})(er.a);var ar,rr=function(e){return i.a.createElement(tr,{elevation:0,style:e.visible?{}:{display:"none"}},i.a.createElement(nr,null,e.children))},or={w:1920,h:1080},ir=pa.Jl1,cr=(un.Rainbow,n(249)),lr=Object(U.a)({root:{position:"relative",display:"flex",height:"100%",width:"100%"}})(rt.a),ur=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.cropPixels=void 0,n.drawer=void 0,n.data=void 0,n.setW=function(e){var t=+e.target.value;n.setState({w:t,aspect:t/n.state.h})},n.setH=function(e){var t=+e.target.value;n.setState({h:t,aspect:n.state.w/t})},n.swapWH=function(){n.setState({w:n.state.h,h:n.state.w})},n.getImage=function(){var e=document.getElementById("fractal-preview-canvas");if(e){var t=e.toDataURL();n.setState({image:t})}},n.onCropChange=function(e){return n.setState({crop:e})},n.onCropComplete=function(e,t){n.cropPixels=t},n.onZoomChange=function(e){return n.setState({zoom:e})},n.capture=function(){var e=n.determineView();n.drawer.draw(Object(d.a)({},n.props.fractal,{view:e})),n.setData(e),n.saveImage(),n.props.finishCapture()},n.onClick=function(){n.props.startCapture()},n.state=Object(d.a)({},or,{crop:{x:0,y:0},zoom:1,image:null}),n.cropPixels={x:0,y:0,width:or.w,height:or.h},n.drawer=new wn,n.drawer.fullResolution=!0,n.data=fa(e.fractal),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.visible&&!e.visible&&this.getImage(),this.props.capturing&&setTimeout(this.capture,500)}},{key:"determineView",value:function(){var e=Object(d.a)({},this.props.fractal.view,{},En(this.props.fractal.view)),t=e.cx,n=e.cy,a=e.w,r=e.h,o=e.ppu,i=a/o/2,c=r/o/2,l=yn([0,a],[t-i,t+i]),u=yn([r,0],[n-c,n+c]),s=this.cropPixels,p=s.x,m=s.y,h=s.width,f=s.height;return{x:[l(p),l(p+h)],y:[u(m),u(m+f)],w:this.state.w,h:this.state.h}}},{key:"setData",value:function(e){var t={cx:(e.x[0]+e.x[1])/2,cy:(e.y[0]+e.y[1])/2,w:e.w,h:e.h,ppu:Math.round(e.w/(e.x[1]-e.x[0]))};this.data=fa(Object(d.a)({},this.props.fractal,{view:Object(d.a)({},this.props.fractal.view,{},t)}))}},{key:"saveImage",value:function(){var e=this,t=document.createElement("canvas");this.drawer.putOnCanvas(t),t.toBlob((function(t){if(t){var n=URL.createObjectURL(t),a="fract"+Math.floor((Date.now()-new Date(2020,0,25).getTime())/1e3).toString(16);e.props.addToGallery(n,e.data,a)}}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(lr,{style:this.props.visible?{}:{display:"none"}},i.a.createElement(Ka.a,{image:this.state.image||"",crop:this.state.crop,zoom:this.state.zoom,aspect:this.state.w/this.state.h,onCropChange:this.onCropChange,onCropComplete:this.onCropComplete,onZoomChange:this.onZoomChange})),i.a.createElement(rr,{visible:this.props.visible},i.a.createElement(rt.a,null,i.a.createElement(dn,{value:this.state.w,label:"width",onChange:this.setW,min:0,step:10,inputProps:{style:{maxWidth:"4em"}}})),i.a.createElement(pt.a,{onClick:this.swapWH,title:"swap width and height"},i.a.createElement(a.SwapHoriz,null)),i.a.createElement(rt.a,null,i.a.createElement(dn,{value:this.state.h,label:"height",onChange:this.setH,min:0,step:10,inputProps:{style:{maxWidth:"4em"}}})),i.a.createElement(cr.a,{onClick:this.onClick,color:"primary",title:"render selected area"},i.a.createElement(a.AddAPhoto,null))))}}]),t}(i.a.Component),sr=Object(f.b)((function(e){return{visible:e.ui.nav===x.Capture,capturing:e.ui.canvasAction===N.Capture,fractal:e.fractal}}),(function(e){return{addToGallery:function(t,n,a){return e(function(e,t,n){return{type:"GALLERY_ADD",payload:{url:e,data:t,title:n}}}(t,n,a))},startCapture:function(){e({type:P,payload:{waiting:!0}}),e({type:"UI_SET_CANVAS_ACTION",payload:N.Capture})},finishCapture:function(){return e(D())}}}))(ur),pr=Object(f.b)(null,(function(e){return{zoomIn:function(t){e({type:"VIEW_ZOOM_IN",payload:t}),e(I())},zoomOut:function(t){e({type:"VIEW_ZOOM_OUT",payload:t}),e(I())}}}))((function(e){var t=e.factor,n=void 0===t?2:t,r=e.zoomIn,o=e.zoomOut,c=Object(S.a)(e,["factor","zoomIn","zoomOut"]);return i.a.createElement(mt,Object.assign({},c,{onUp:function(){return r(n)},onDown:function(){return o(n)},downIcon:a.ZoomOut,upIcon:a.ZoomIn}))})),mr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).paramUpdater=function(e){return function(t){n.props.onChange(Object(Hn.a)({},e,t))}},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"renderNumberIncrementer",value:function(e){var t=e.param;return i.a.createElement(vt,{key:"number-"+t,controlProps:e,value:this.props.params[t],onChange:this.paramUpdater(t)})}},{key:"renderComplexIncrementer",value:function(e){var t=e.param;return i.a.createElement(tn,{key:"complex-"+t,controlProps:e,value:this.props.params[t],onChange:this.paramUpdater(t)})}},{key:"renderCall",value:function(e){var t=this,n=e.icon,r=e.label;return r&&"Random"===n?i.a.createElement(ot.a,{key:"action-"+r,variant:"outlined",color:"inherit",size:"small",onClick:function(){return t.props.onChange(e.onCall())},startIcon:i.a.createElement(a.Random,null)},e.label):r||"Random"!==n?r?i.a.createElement(ot.a,{key:"action-"+r,variant:"outlined",size:"small",onClick:function(){return t.props.onChange(e.onCall())}},e.label):void 0:i.a.createElement(pt.a,{key:"action-"+n,onClick:function(){return t.props.onChange(e.onCall())}},i.a.createElement(a.Random,null))}},{key:"renderControl",value:function(e){return e.type===Cn.Number?this.renderNumberIncrementer(e):e.type===Cn.Complex?this.renderComplexIncrementer(e):e.type===Cn.Call?this.renderCall(e):null}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,this.props.controls.map((function(t){return e.renderControl(t)})))}}]),t}(i.a.Component),hr=Object(f.b)((function(e){return{controls:Object(He.a)(ma(e.fractal.algorithm).controls),params:Object(d.a)({},e.fractal.algorithm.params)}}),(function(e){return{onChange:function(t){e(ya(t)),e(I())}}}))(mr),fr=Object(f.b)((function(e){return{value:e.fractal.algorithm.params.iter,controlProps:{type:Cn.Number,param:"iter",label:"iterations",step:2,min:0}}}),(function(e){return{onChange:function(t){e(ya({iter:t})),e(I())}}}))(vt),dr=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(rr,{visible:this.props.nav===x.Params},i.a.createElement(hr,null)),i.a.createElement(rr,{visible:this.props.nav===x.Explore},i.a.createElement(fr,{fontSize:"large"}),i.a.createElement(pr,{factor:2,fontSize:"large",label:"Zoom"})))}}]),t}(i.a.Component),vr=Object(f.b)((function(e){return{nav:e.ui.nav}}))(dr),br=n(250),gr=n(251),yr=n(252),Er=Object(U.a)({root:{padding:"3px",paddingTop:"20px"}})(br.a),Or=Object(U.a)({root:{maxWidth:"200px",maxHeight:"200px",margin:"1mm"},tile:{width:"200px",height:"200px"}})(gr.a),Cr=Object(U.a)({root:{color:"rgba(255,255,255,0.5)","& :hover":{color:"rgba(255,255,255,1)"}}})(pt.a);function wr(e){var t=e.title;return i.a.createElement(Or,{key:t,cols:1},i.a.createElement("img",{src:e.url,alt:t,style:{objectFit:"cover"}}),i.a.createElement(yr.a,{title:t,actionIcon:i.a.createElement(i.a.Fragment,null,i.a.createElement(Cr,{onClick:e.onView},i.a.createElement(a.ViewImage,null)))}))}!function(e){e[e.None=0]="None",e[e.Delete=1]="Delete",e[e.JSON=2]="JSON",e[e.Link=3]="Link"}(ar||(ar={}));var xr=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=void 0,n.close=function(){n.setState({current:null,popup:ar.None})},n.closePopup=function(){n.setState({popup:ar.None})},n.openDelete=function(){n.setState({popup:ar.Delete})},n.onDelete=function(){n.state.current&&(n.props.deleteImage(n.state.current.url),n.close())},n.onCopy=function(){n.state.current},n.onLink=function(){if(n.state.current){var e=va(n.state.current.data);navigator.clipboard.writeText(window.location.href.split("?")[0]+"?"+e)}},n.onDownload=function(){if(n.state.current){var e=document.createElement("a");e.download=n.state.current.title+".png",e.href=n.state.current.url,e.click()}},n.onLoad=function(){n.state.current&&(n.props.loadJson(n.state.current.data),n.close())},n.viewer=function(e){return function(){n.setState({current:e})}},n.state={current:null,popup:ar.None},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Er,{cellHeight:180,style:this.props.visible?{}:{display:"none"}},this.props.images.map((function(e,n){return i.a.createElement(wr,Object(d.a)({},e,{key:e.url,onView:t.viewer(e)}))}))),i.a.createElement(xa.a,{open:null!==this.state.current,onClose:this.close},i.a.createElement(rt.a,{style:{position:"relative"}},i.a.createElement(er.a,null,i.a.createElement(pt.a,{onClick:this.close,title:"close",edge:"start"},i.a.createElement(a.Back,null)),i.a.createElement(pt.a,{onClick:this.openDelete,title:"delete image"},i.a.createElement(a.Delete,null)),i.a.createElement(pt.a,{onClick:this.onLoad,title:"load in fractal viewer"},i.a.createElement(a.Upload,null)),i.a.createElement(pt.a,{onClick:this.onDownload,title:"download image"},i.a.createElement(a.Save,null))),i.a.createElement("img",{alt:"fractal",src:(null===(e=this.state.current)||void 0===e?void 0:e.url)||"",style:{objectFit:"contain",maxWidth:"100%",maxHeight:"100%"}})),i.a.createElement(xa.a,{open:this.state.popup===ar.Delete,onClose:this.close},i.a.createElement(rt.a,{m:2},i.a.createElement(Ke.a,null,"Delete this image?"),i.a.createElement(st.a,{color:"primary",variant:"outlined"},i.a.createElement(ot.a,{onClick:this.onDelete},"Yes"),i.a.createElement(ot.a,{onClick:this.closePopup},"No"))))))}}]),t}(i.a.Component),kr=Object(f.b)((function(e){return{visible:e.ui.nav===x.Gallery,images:e.gallery}}),(function(e){return{deleteImage:function(t){t&&e(function(e){return{type:"GALLERY_DELETE",payload:e}}(t))},loadJson:function(t){e(function(e){return{type:"FRACTAL_UPDATE",payload:da(e)}}(t)),e(I()),e(M(x.Explore))}}}))(xr),jr=n(131),Nr=Object(jr.a)({root:{position:"absolute",overflow:"clip",display:"flex",flexDirection:"column",flexGrow:1,top:"50px",bottom:"55px",width:"100%"}});function Rr(){var e=Nr();return i.a.createElement(rt.a,{className:e.root},i.a.createElement(Xa,null),i.a.createElement(sr,null),i.a.createElement(kr,null),i.a.createElement(vr,null))}var Sr=n(253),Pr=Object(U.a)({label:{textTransform:"none"}})(ot.a),Ar=Object(f.b)((function(e){var t=ma(e.fractal.algorithm).label;return{disabled:e.ui.modal===k.Info,formula:t}}),(function(e){return{onClick:function(){return e(A(k.Info))}}}))((function(e){var t=e.formula,n=Object(S.a)(e,["formula"]);return i.a.createElement(Pr,n,i.a.createElement(et,{data:t}))})),Mr=Object(f.b)(null,(function(e){return{onClick:function(){e({type:"VIEW_RECENTER"}),e(I())}}}))((function(e){return i.a.createElement(pt.a,Object.assign({},e,{title:"recenter image at origin"}),i.a.createElement(a.Recenter,null))})),Ir=Object(jr.a)({toolbar:{justifyContent:"flex-start"},gallery:{flexGrow:1,textAlign:"center"},formula:{},recenter:{},Params:{"& $gallery":{display:"none"}},Explore:{"& $gallery":{display:"none"}},Capture:{"& $gallery":{display:"none"},"& $recenter":{display:"none"}},Gallery:{"& $formula":{display:"none"},"& $recenter":{display:"none"}}});var Dr=Object(f.b)((function(e){return{nav:e.ui.nav,disableMenu:e.ui.modal===k.Menu}}),(function(e){return{openMenu:function(){return e(A(k.Menu))}}}))((function(e){var t=Ir(),n=e.nav===x.Params?"Params":e.nav===x.Explore?"Explore":e.nav===x.Capture?"Capture":"Gallery";return i.a.createElement(Sr.a,{position:"static",elevation:0},i.a.createElement(er.a,{className:t.toolbar+" "+t[n]},i.a.createElement(pt.a,{onClick:e.openMenu,edge:"start"},i.a.createElement(a.Menu,null)),i.a.createElement(Ar,{className:t.formula,title:"algorithm information",style:{marginLeft:"auto",marginRight:"auto"}}),i.a.createElement(Ke.a,{className:t.gallery},"Saved Fractals"),i.a.createElement(Mr,{className:t.recenter})))})),_r=Object(T.a)((function(e){return{text:{fontSize:"1em"}}}));function zr(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.toPrecision(4),n=t.split("e");return 1===n.length?t:n[0]+"\\times 10^{"+n[1]+"}"}var Lr=Object(f.b)((function(e){var t=e.fractal.view,n=t.cx,a=t.cy,r=t.ppu,o=t.w/r/2,i=t.h/r/2;return{visible:e.ui.modal===k.Info,cx:n,cy:a,rx:o,ry:i,algorithm:e.fractal.algorithm}}),(function(e){return{onClose:function(){return e(A(k.None))}}}))(Object(U.a)(_r)((function(e){var t=ma(e.algorithm).describe,n=function(e){var t=Math.pow(10,e);return function(e){return Math.round(e*t)/t}}(3-Math.floor(Math.log10(e.rx))),a="x_c = "+n(e.cx),r="y_c = "+n(e.cy),o="|x - x_c| \\leq "+zr(Math.abs(e.rx)),c="|y - y_c| \\leq "+zr(Math.abs(e.ry)),l=e.classes;return i.a.createElement(xa.a,{open:e.visible,onClose:e.onClose,marginThreshold:10},i.a.createElement(Qa.a,null,i.a.createElement(rt.a,{p:2,onClick:e.onClose},i.a.createElement(et,{data:t,className:l.text}),i.a.createElement(Ke.a,{style:{marginTop:"1em"},className:l.text},"The currently displayed portion of this fractal is centered at ",i.a.createElement(Xe,{math:"(x_c, y_c)"}),", where"),i.a.createElement(Xe,{math:a+"\\text{ and }"+r,displayMode:!0,className:l.text}),i.a.createElement(Ke.a,{className:l.text},"and plotted over ",i.a.createElement(Xe,{math:"(x, y)"})," such that"),i.a.createElement(Xe,{math:o+"\\text{ and }"+c,displayMode:!0,className:l.text}))))}))),Tr=n(254),Ur=n(258),Br=Object(jr.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},typography:{color:"white"},progress:{outline:"none"}});var Fr=Object(f.b)((function(e){return{open:e.ui.waiting}}))((function(e){var t=e.open,n=Br();return i.a.createElement(Ur.a,{open:t,className:n.root},i.a.createElement(i.a.Fragment,null,i.a.createElement(Tr.a,{className:n.progress}),i.a.createElement(Ke.a,{className:n.typography},"Rendering Image")))})),Gr=Object(jr.a)((function(e){return{root:{height:"100%",flexDirection:"column",top:0,bottom:0,left:0,right:0,position:"absolute",overflow:"hidden",justifyContent:"space-between"}}}));function Jr(){var e=Gr();return i.a.createElement("div",{className:e.root},i.a.createElement(Fr,null),i.a.createElement(Rr,null),i.a.createElement(Dr,null),i.a.createElement(Ya,null),i.a.createElement(Lr,null),i.a.createElement(gn,null))}var Vr=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.store;return i.a.createElement(f.a,{store:e},i.a.createElement(R,null,i.a.createElement(Jr,null)))}}]),t}(i.a.Component),Wr=n(42),Hr={methodName:"Jl1",method:ir,params:ir.newParams()},Yr={schemeName:"Rainbow",scheme:un.Rainbow,reverse:!1,skew:0},Zr=Object(d.a)({},{w:600,h:500},{cx:0,cy:0,ppu:256,pixelCount:9e4});function $r(e){var t=e.w,n=e.h;return{cx:0,cy:0,ppu:Math.round(Math.min(n,t)/5)}}var qr=Object(Wr.b)({algorithm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALGORITHM_UPDATE":return Object(d.a)({},e,{},t.payload);case"ALGORITHM_SET":return{methodName:t.payload.methodName,method:t.payload.method,params:t.payload.params?t.payload.params:t.payload.method.newParams()};case"ALGORITHM_UPDATE_PARAMS":return Object(d.a)({},e,{params:Object(d.a)({},e.params,{},t.payload)});default:return e}},color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COLOR_UPDATE":return Object(d.a)({},e,{},t.payload);default:return e}},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(d.a)({},Zr,{},$r(Zr)),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VIEW_UPDATE":return Object(d.a)({},e,{},t.payload);case"VIEW_RECENTER":return Object(d.a)({},e,{},$r(e));case"VIEW_ZOOM_IN":return Object(d.a)({},e,{ppu:e.ppu*t.payload});case"VIEW_ZOOM_OUT":return Object(d.a)({},e,{ppu:Math.round(e.ppu/t.payload)});default:return e}}}),Xr={nav:x.Explore,modal:k.None,canvasAction:N.None,canvasStretch:j.Contain,galleryBadge:0,methodList:pa,colorSchemeList:Object(d.a)({},un),waiting:!1},Kr=[],Qr=Object(Wr.b)({fractal:function(e,t){if("FRACTAL_UPDATE"===t.type){if(void 0!==t.payload){var n=t.payload.view.w/e.view.w,a=t.payload.view.h/e.view.h;return n>a?t.payload.view.h=e.view.h*n:t.payload.view.w=e.view.w*a,{algorithm:Object(d.a)({},e.algorithm,{},t.payload.algorithm),color:Object(d.a)({},e.color,{},t.payload.color),view:Object(d.a)({},e.view,{},t.payload.view)}}return e}return qr(e,t)},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(d.a)({},e,{},t.payload);case"UI_SET_NAV":return t.payload===x.Gallery?Object(d.a)({},e,{nav:t.payload,galleryBadge:0}):Object(d.a)({},e,{nav:t.payload});case"UI_SET_MODAL":return Object(d.a)({},e,{modal:t.payload});case"UI_SET_CANVAS_ACTION":return e.nav!==x.Capture||t.payload!==N.Draw&&t.payload!==N.Color?Object(d.a)({},e,{canvasAction:t.payload}):Object(d.a)({},e,{canvasAction:t.payload,nav:x.Explore});case"UI_SET_STRETCH":return Object(d.a)({},e,{canvasStretch:t.payload});case"UI_ADD_COLOR_SCHEME":return Object(d.a)({},e,{colorSchemeList:Object(d.a)({},e.colorSchemeList,Object(Hn.a)({},t.payload.name,t.payload.scheme))});case"GALLERY_ADD":return Object(d.a)({},e,{galleryBadge:e.galleryBadge+1});case"FRACTAL_UPDATE":return t.payload&&!e.colorSchemeList[t.payload.color.schemeName]?Object(d.a)({},e,{colorSchemeList:Object(d.a)({},e.colorSchemeList,Object(Hn.a)({},t.payload.color.schemeName,t.payload.color.scheme))}):e;default:return e}},gallery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GALLERY_ADD":return[].concat(Object(He.a)(e),[t.payload]);case"GALLERY_DELETE":return URL.revokeObjectURL(t.payload),e.filter((function(e){return e.url!==t.payload}));default:return e}}}),eo=Object(Wr.c)(Qr),to=(n(179),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function no(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}eo.dispatch(function(e){var t=ba(e);return t?{type:"FRACTAL_UPDATE",payload:da(t)}:{type:"FRACTAL_UPDATE",payload:void 0}}(window.location.search)),l.a.render(i.a.createElement(Vr,{store:eo}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/fractal-explorer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/fractal-explorer","/service-worker.js");to?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):no(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):no(t,e)}))}}()},61:function(e,t,n){e.exports={Outer:"Canvas_Outer__3WApH",Canvas:"Canvas_Canvas__2ENmD",Stretch:"Canvas_Stretch__2sMXG"}}},[[167,1,2]]]);
//# sourceMappingURL=main.f3260a9a.chunk.js.map